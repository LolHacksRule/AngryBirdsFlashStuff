package
{
   import § ""§.§#"r§;
   import § ""§.§-&§;
   import § ""§.§<$+§;
   import § ""§.§>"+§;
   import § "v§.§+o§;
   import § "v§.§4$4§;
   import § "v§.§5#=§;
   import § "v§.§5#[§;
   import § "v§.§8M§;
   import § "v§.§9!p§;
   import § "v§.§]#?§;
   import § h§.§-!S§;
   import § h§.§-$#§;
   import § h§.§-;§;
   import § h§.§<"!§;
   import § h§.AvatarCreatorPopup;
   import § h§.ErrorPopup;
   import § h§.InviteFriendsPopup;
   import § h§.QuestionPopup;
   import § h§.QuickPurchaseSlingshotPopup;
   import §!#Y§.§>h§;
   import §#!G§.§-#]§;
   import §#!S§.§#$2§;
   import §#!S§.§[!s§;
   import §#"3§.§"$!§;
   import §#"3§.§4!h§;
   import §#$E§.§;$2§;
   import §#Q§.§ l§;
   import §%#^§.§""P§;
   import §%#^§.§%![§;
   import §%#^§.§2$-§;
   import §&!A§.§7!8§;
   import §&1§.§,"I§;
   import §'q§.GiftInboxPopup;
   import §+!n§.§+!p§;
   import §+"Y§.§%#p§;
   import §+"Y§.§,$@§;
   import §+"Y§.§="d§;
   import §,X§.§2"q§;
   import §-!j§.§#"+§;
   import §-!j§.§,"!§;
   import §-!j§.§7#I§;
   import §-"S§.§>#G§;
   import §-"T§.§7#f§;
   import §-"T§.§[$'§;
   import §1!1§.§<#M§;
   import §2E§.§'@§;
   import §2E§.§'r§;
   import §2E§.§4!H§;
   import §2E§.§6h§;
   import §2E§.§7J§;
   import §2E§.§9#U§;
   import §2E§.§=$3§;
   import §2E§.§]!P§;
   import §2E§.§^u§;
   import §3#q§.§6"R§;
   import §3#t§.§51§;
   import §3#t§.§>!H§;
   import §4#$§.§5"L§;
   import §4#$§.§6#!§;
   import §4#l§.TabbedShopPopup;
   import §5"l§.§0!b§;
   import §6#x§.§'!G§;
   import §6#x§.§4"2§;
   import §7!3§.§-!>§;
   import §7"1§.§!"`§;
   import §7"1§.§5"f§;
   import §7"1§.§;" §;
   import §7"1§.§="A§;
   import §7#D§.DailyRewardPopup;
   import §8!G§.§<$9§;
   import §8!G§.CoinShopPopup;
   import §8!G§.§[n§;
   import §8#^§.§-B§;
   import §9!6§.§## §;
   import §9!6§.§?!y§;
   import §9!6§.§@M§;
   import §9#n§.§#!b§;
   import §9#n§.§]!O§;
   import §9x§.§7",§;
   import §9x§.§9"B§;
   import §9x§.§9§;
   import §<"I§.§4$>§;
   import §<#b§.§+$ §;
   import §=!&§.§<$!§;
   import §>#Y§.§!",§;
   import §>#Y§.§!#?§;
   import §>#Y§.§"1§;
   import §>#Y§.§,#b§;
   import §>#Y§.§2"%§;
   import §>#Y§.§2$8§;
   import §>#Y§.§6"k§;
   import §>#Y§.§;"]§;
   import §>#Y§.§@K§;
   import §?$#§.§<d§;
   import §?$#§.§^#j§;
   import §?_§.§9! §;
   import §?o§.§4#?§;
   import §?o§.§?"m§;
   import §@!R§.§!"5§;
   import §@!_§.§ !G§;
   import §[!&§.§2_§;
   import §[!;§.§#P§;
   import §[!;§.§;#k§;
   import §[!;§.§<#a§;
   import §["#§.TournamentResultsPopup;
   import §[#v§.§'"b§;
   import §[#v§.§0!n§;
   import §[#v§.§4e§;
   import §[#v§.§7"Z§;
   import §[#v§.§>#P§;
   import §[#v§.§?"R§;
   import §[#v§.StateLastWeeksTournamentResults;
   import §[#v§.StateTournamentResults;
   import §[#v§.§["!§;
   import §[#v§.§]#<§;
   import §]!4§.§=#c§;
   import §]M§.§=!a§;
   import §^#?§.§?#,§;
   import §^1§.§ "g§;
   import §^1§.§ v§;
   import §^1§.§""Z§;
   import §^1§.§"T§;
   import §^1§.§+!Y§;
   import §^1§.§2#u§;
   import §^1§.§3"o§;
   import §^1§.§3#P§;
   import §^1§.§6g§;
   import §^1§.§;O§;
   import §^1§.§;r§;
   import §^1§.§@§;
   import §^1§.§@9§;
   import §^1§.StateCutScene;
   import §^1§.StatePlay;
   import §^1§.§[!=§;
   import §^1§.§[$2§;
   import §^1§.§`$D§;
   import §catch§.§ !M§;
   import com.rovio.assets.§=@§;
   import com.rovio.assets.LoadingScreen;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.external.ExternalInterface;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class §^"a§ extends AngryBirdsBase implements §'r§, IAngryBirdsFacebook
   {
      
      public static const §!"O§:String = "r12277";
      
      public static const §4!9§:String = "v4.0";
      
      private static var §]!x§:String = "AngryBirdsFriends";
      
      private static const §?#a§:String = "angrybirdsfriendsdev_d8f18df";
      
      public static const §>!Y§:String = "http://bit.ly/playfriends";
      
      public static const §+"A§:String = "https://cloud.rovio.com/privacyweb/index.html";
      
      public static const §-#r§:String = "external_assets/";
      
      public static const §^"P§:String = §-#r§ + "tournaments/";
      
      public static const §""§:String = §-#r§ + "sale_campaigns/";
      
      public static const §5"N§:String = "packages/";
      
      public static const §4!6§:String = "tournamentJSONLevels-";
      
      public static const §6#8§:String = "tournamentJSONLevels/";
      
      private static const § "f§:String = "AngryBirdsFacebookSettings";
      
      public static const §7!l§:String = "/";
      
      public static const §&#d§:String = "brand.lua";
      
      protected static var §]#w§:Class = §@N§;
      
      protected static var §^C§:Class = § #3§;
      
      protected static var §^V§:Class = §]"W§;
      
      protected static var §3;§:Class = §=#q§;
      
      protected static var §"O§:Class = §]%§;
      
      protected static var §2!l§:Class = §&!5§;
      
      public static var §'e§:§>!H§;
      
      public static var §9!h§:IAngryBirdsFacebook;
      
      private static var §'"`§:Boolean = false;
      
      public static var §?#8§:String = null;
      
      public static var §,W§:Boolean;
      
      private static const §-#Q§:int = 0;
      
      private static const §2!a§:int = 1;
      
      public static const §3A§:Array = [[§[$2§.STATE_NAME,"MAIN_MENU"],[§@#4§.STATE_NAME,"STORY_MODE_EPISOLE_SELECTION"],[§4e§.STATE_NAME,"LEVEL_SELECTION"],[§7"Z§.STATE_NAME,"OVERLAPPING_TOURNAMENT_MENU"],[§`$D§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§;O§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§[!=§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§?"R§.STATE_NAME,"INGAME"],[StatePlay.STATE_NAME,"INGAME"],[§9! §.§ "O§,"INGAME"],[§9! §.§["l§,"PAUSE_PAGE"]];
      
      private static var §`"&§:Boolean = false;
      
      private static var §""t§:Boolean = false;
      
      public static var §?"g§:Object;
      
      private static var §5#8§:XML;
       
      
      protected var §#$3§:§9! §;
      
      private var §0#<§:InviteFriendsPopup;
      
      public var §`$6§:§#!b§;
      
      private var §!$'§:§]!O§;
      
      private var §#!]§:String = "";
      
      private var §'d§:§9#U§;
      
      private var §6"[§:§5#=§;
      
      private var §2$,§:Sprite;
      
      private var §,!N§:Boolean = false;
      
      protected var §'$>§:§^u§;
      
      private var §<#'§:String;
      
      private var §,K§:String;
      
      private var §`i§:String;
      
      private var §9!U§:String;
      
      private var §&"3§:§;#k§;
      
      private var §"!p§:uint = 0;
      
      private var §<",§:Array;
      
      private var §;"h§:Timer;
      
      private var §?!2§:QuestionPopup;
      
      private var §;"K§:int = 0;
      
      private var §=!g§:Boolean;
      
      private var §=!<§:Vector.<§5"f§>;
      
      private var §4"W§:Timer;
      
      private var §!$C§:§;"]§;
      
      public function §^"a§(param1:§,"I§)
      {
         §@#F§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§?f§();
         §+!p§.DEBUG_MODE_ENABLED = false;
         §2_§.§1#N§ = true;
         this.§#"@§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§!"O§,param1.stage.loaderInfo.parameters.userId || this.§<#'§);
         this.§8"-§();
         param1.stage.addChild(this.§2$,§ = new Sprite());
         super(param1,§@#F§,SERVER_ROOT);
         this.§'$>§.§2"O§(mLevelManager);
         this.§'$>§.§&"9§();
         §=#c§.addCallback("trialPayClosed",this.§2y§);
         §=#c§.addCallback("handleExpiredMobilePricePoints",this.§+!K§);
         §=#c§.addCallback("handleUserCancelledOrder",§!#3§);
         §=#c§.addCallback("orderReceived",§^!s§);
         this.§<",§ = new Array();
         this.§<",§[§-#Q§] = false;
         this.§<",§[§2!a§] = false;
         §,W§ = true;
      }
      
      public static function get §-!"§() : String
      {
         return §]!x§;
      }
      
      public static function § $"§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as §>#G§).userID)
         {
            return § "f§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as §>#G§).userID;
         }
         return null;
      }
      
      public static function get §=?§() : §?"m§
      {
         return (singleton as §^"a§).§&!q§;
      }
      
      private static function §!#3§() : void
      {
         CoinShopPopup.§[$%§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§!"S§();
         }
         var _loc2_:QuickPurchaseSlingshotPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchaseSlingshotPopup.ID) as QuickPurchaseSlingshotPopup;
         if(_loc2_)
         {
            _loc2_.§!"S§();
         }
      }
      
      private static function §^!s§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§?J§();
         }
      }
      
      public static function §4#u§() : void
      {
         §'"`§ = true;
         §9!h§.§`"_§();
      }
      
      public static function §2i§() : Boolean
      {
         if(§'"`§)
         {
            return true;
         }
         return false;
      }
      
      private function get §&!q§() : §?"m§
      {
         return mLevelManager as §?"m§;
      }
      
      protected function §#"@§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§'$>§ = new §^u§(param1,param2,param3,param4);
      }
      
      private function §?f§() : void
      {
      }
      
      protected function §8"-§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §2!l§(),_loc2_);
      }
      
      private function §2y§(param1:int, param2:int, param3:String = "") : void
      {
         §'@§.§7$9§("TrialPay",param2);
         §'@§.trackPageView(this,§'@§.§0#6§);
         §'@§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         §!",§.§3"1§.§,"&§();
         var _loc4_:§-!>§;
         (_loc4_ = new §-!>§()).currency = "IVC";
         _loc4_.§>#$§ = §2$8§.§,"p§;
         _loc4_.screen = §'@§.§0#6§;
         _loc4_.amount = param2;
         _loc4_.§'#w§ = §]!P§.§<#%§;
         _loc4_.itemType = §2$8§.§,"p§;
         §]!P§.§1!7§().§=#3§(false,_loc4_.itemType,_loc4_.amount,_loc4_.§'#w§,_loc4_.screen,_loc4_.level,_loc4_.itemType,_loc4_.§>#$§,_loc4_.§7$&§,_loc4_.currency,_loc4_.§;"u§);
      }
      
      private function §+!K§() : void
      {
         §,#b§(dataModel).§'!<§.§7c§();
      }
      
      protected function §`n§() : void
      {
         var _loc3_:Stage3D = null;
         §7J§.enabled = true;
         §'@§.§##_§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §'@§.§-"Q§("no-stage3d");
         }
         §9!h§ = this;
         §'@§.§4"x§(§7J§.§^"<§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§6!C§();
         §4$4§.addEventListener(§5#[§.§?!u§,this.§1U§);
         §4$4§.addEventListener(§9!p§.§,$;§,this.§%G§);
         §4$4§.addEventListener(§9!p§.§+"V§,this.§`s§);
      }
      
      protected function §6!C§() : void
      {
         this.§'d§ = new §9#U§("");
         this.§'d§.start();
      }
      
      private function get accessToken() : String
      {
         return §[#j§("accessToken") || this.§,K§;
      }
      
      private function §1U§(param1:§5#[§) : void
      {
         §'@§.§4$3§(param1.§9§,param1.errorID);
      }
      
      private function §%G§(param1:§9!p§) : void
      {
         §'@§.§]+§(param1.§9§);
      }
      
      private function §`s§(param1:§9!p§) : void
      {
         §'@§.§0!&§(param1.§9§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §4"?§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §6"k§.§3"1§.§`"5§(_loc2_);
         }
      }
      
      private function §7#l§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§,!N§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§'!@§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§-!S§.NORMAL,§## §.DEFAULT,false);
               _loc2_.addEventListener(§2"q§.§2%§,this.§`$B§,false,0,true);
               _loc2_.§``§();
            }
         }
      }
      
      protected function §`$B§(param1:§2"q§) : void
      {
         var _loc2_:§?!y§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§-!S§.NORMAL,§## §.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §"$!§.§0!T§(§]#w§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §"$!§.§0!T§(§^C§);
         this.§8"H§(_loc2_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §"$!§.§0!T§(§^V§);
         this.§8"H§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §"$!§.§0!T§(§"O§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers","Powerup_Velocity_Multipliers","Material_Damage_Factor_Limits"];
         this.§8"H§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§"#=§();
      }
      
      protected function §"#=§() : void
      {
         this.§-!X§.§-"E§(§6h§.§<#E§(this.§`e§.§5!§(§&#d§,"chaptertournament")),§6h§.§<#E§(this.§`e§.§5!§("frommobile.lua","chaptertournament")),§6h§.§<#E§(this.§`e§.§5!§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§`e§.§&2§)
         {
            this.§-!X§.§0#T§(this.§`e§.§3"@§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §"$!§.§0!T§(§3;§);
         this.§8"H§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §6"A§() : void
      {
         if(stage.loaderInfo.url.indexOf("angrybirds-facebook-dev") > -1 || stage.loaderInfo.url.indexOf("angrybirds-friends-new-feature") > -1)
         {
            §]!x§ = §?#a§;
         }
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §'@§.§<$8§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §'@§.§<$8§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §'@§.§<$8§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§ !I§,"Did not receive a facebook user ID.\nError code: " + §=$3§.§8!q§));
         }
         §4!H§.accessToken = this.accessToken;
         this.§`$6§ = new §#!b§(stage.loaderInfo.parameters.accessToken || this.§,K§);
         var _loc5_:String = §7#f§.§=#J§;
         this.§`i§ = "https://" + _loc5_ + ".rovio.com";
         if(stage.loaderInfo.parameters.analyticsUrl)
         {
            this.§`i§ = stage.loaderInfo.parameters.analyticsUrl;
            if(this.§`i§.indexOf(§7#f§.§"$;§) != -1)
            {
               _loc5_ = §7#f§.§"$;§;
            }
            else if(this.§`i§.indexOf(§7#f§.§4!P§) != -1)
            {
               _loc5_ = §7#f§.§4!P§;
            }
            else
            {
               _loc5_ = §7#f§.§=#J§;
            }
         }
         this.§9!U§ = stage.loaderInfo.parameters.userId;
         this.§9$0§.§0"6§ = new §[$'§(_loc1_,_loc2_,_loc5_);
         this.§9$0§.§0"6§.§0$@§();
         §2"%§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§9$0§.§0"6§);
      }
      
      public function §4#%§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §4[§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§`n§();
         super.initialize();
         §?#8§ = stage.loaderInfo.parameters.levelId;
         §>#J§.addEventListener(Event.INIT,this.§#"h§);
         §>#J§.addEventListener(Event.COMPLETE,this.§8$#§);
         §!",§.§3"1§.§2"O§(mLevelManager);
         this.§6"A§();
         this.§7#i§();
         §4!T§(false);
         §=#c§.addCallback("purchaseComplete",this.§>#§);
         §=#c§.addCallback("purchaseFailed",this.§0!h§);
         §=#c§.addCallback("giftsSentToUsers",this.§4"?§);
         §=#c§.addCallback("onUrl",this.§7#l§);
         ExternalInterface.call("trapMouse","if (window.addEventListener) window.addEventListener(\'DOMMouseScroll\', handleWheelEvent, false); window.onmousewheel = document.onmousewheel = handleWheelEvent; function handleWheelEvent(e){e.preventDefault();}");
         this.§3Y§();
         this.§4b§();
      }
      
      private function §[$"§() : void
      {
         this.§&"3§ = new §#P§();
         (this.§&"3§ as §#P§).addEventListener(Event.COMPLETE,this.§8$,§);
         this.§&"3§.§&#I§();
      }
      
      private function §8$,§(param1:Event) : void
      {
         var _loc3_:§<#a§ = null;
         var _loc4_:§?!y§ = null;
         var _loc5_:§?!y§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§&"3§.§<$%§)
         {
            if(_loc3_.§9$2§)
            {
               _loc5_ = new §<$+§(§-!S§.NORMAL,§## §.§^!$§);
               _loc4_ = new §>"+§(§-!S§.NORMAL,§## §.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §-$#§(§-!S§.NORMAL,§## §.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§&"3§.§ #g§(_loc2_);
         }
      }
      
      private function §3Y§() : void
      {
         var _loc1_:String = this.§9!U§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§]!P§ = §]!P§.§1!7§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§`i§ && this.§`i§.indexOf("https://") == -1)
         {
            this.§`i§ = "https://" + this.§`i§;
         }
         _loc3_.analyticsUrl = this.§`i§;
      }
      
      private function §4b§() : void
      {
         §;$2§.§3#X§();
      }
      
      private function §>#§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            §!",§.§3"1§.§,"&§(param2 > 0);
         }
      }
      
      private function §0!h§() : void
      {
         CoinShopPopup.§[$%§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§!"S§();
         }
      }
      
      protected function §7#i§() : void
      {
         this.§6"[§ = new §5#=§(new §]#?§());
      }
      
      public function §^"C§() : §]#?§
      {
         return this.§6"[§.§&=§;
      }
      
      protected function §]#1§() : void
      {
         this.§#$3§ = new §9! §(§'e§,SERVER_ROOT,(§'"G§.userProgress as §>#G§).userID,this.§&!q§);
         this.§2$,§.addChild(this.§#$3§);
         this.§#$3§.height = stage.stageHeight;
         this.§#$3§.x = stage.stageWidth - 180;
         this.§#$3§.addEventListener(§-B§.§9#2§,this.§""b§);
         this.§#$3§.addEventListener(§-B§.§,#"§,this.§>!§);
         this.§#$3§.addEventListener(§-B§.§1!=§,this.§0#h§);
         this.§#$3§.addEventListener(§-B§.§%!>§,this.§;"?§);
         this.§#$3§.addEventListener(§-B§.§+n§,this.§>#y§);
         this.§#$3§.addEventListener(§-B§.§2#R§,this.§9#P§);
         this.§#$3§.addEventListener(§-B§.§&,§,this.§,!D§);
         this.§#$3§.addEventListener(§-B§.§]";§,this.§7'§);
         this.§#$3§.addEventListener(§-B§.BRAG,this.§>#-§);
         this.§#$3§.addEventListener(§-B§.PLAY_LEVEL,this.§=$9§);
         this.§#$3§.addEventListener(§-B§.§3#g§,this.§#6§);
         this.§0#<§ = new InviteFriendsPopup(§-!S§.NORMAL,§## §.DEFAULT);
         this.§0#<§.addEventListener(§-B§.§9#2§,this.§""b§);
         this.§0#<§.addEventListener(§-B§.§5J§,this.§-C§);
         this.§;"h§ = null;
      }
      
      protected function §#6§(param1:Event) : void
      {
         var _loc2_:§?!y§ = new §#"r§(§-!S§.NORMAL,§## §.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §#"h§(param1:Event) : void
      {
         §7",§.§ #?§(false);
      }
      
      protected function §8$#§(param1:Event) : void
      {
         §7",§.§ #?§(true);
      }
      
      public function §7#$§(param1:int, param2:Array = null) : void
      {
         this.§#$3§.§7!Z§(param1,param2);
      }
      
      public function §6H§(param1:String) : void
      {
         this.§#$3§.§!##§(param1);
      }
      
      public function §7"2§(param1:String) : void
      {
         this.§#$3§.§]!q§(param1);
         this.§#$3§.§!##§(param1);
      }
      
      override protected function initializeLevelMain() : §<d§
      {
         return new §^#j§(stage,§+#D§,§8$;§,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §#"+§
      {
         return new §7#I§();
      }
      
      override protected function initializeLevelThemeManager() : §[!s§
      {
         return new §#$2§();
      }
      
      override protected function initializeDataModel() : void
      {
         §'"G§ = new §,#b§();
      }
      
      override protected function initializeLevelManager() : §4#?§
      {
         return new §?"m§();
      }
      
      override protected function initializePackageManager() : §"1§
      {
         return new §@K§(mLevelManager,§,"!§(§+#D§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §'"G§.userProgress = new §>#G§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §"<§(new §3"o§(mLevelManager,§,"!§(§+#D§),§6%§,false));
         §"<§(new §"T§(mLevelManager,§6%§,false));
         §"<§(new §[$2§(mLevelManager,§6%§,false));
         §"<§(new §@#4§(mLevelManager,§6%§,false));
         §"<§(new § "g§(mLevelManager,§6%§,false));
         §"<§(new §2#u§(mLevelManager,§6%§,false));
         §"<§(new §@9§(mLevelManager,§6%§,false));
         §"<§(new § v§(mLevelManager,§6%§,false));
         §"<§(new §6g§(mLevelManager,§6%§,false));
         §"<§(new §3#P§(mLevelManager,§6%§,false));
         §"<§(new §;r§(mLevelManager,§6%§,false));
         §"<§(new §[!=§(mLevelManager,§6%§,false));
         §"<§(new §`$D§(mLevelManager,§6%§,false));
         §"<§(new §["!§(mLevelManager,§6%§,false));
         §"<§(new §>#P§(mLevelManager,§6%§,false));
         §"<§(new §]#<§(mLevelManager,§6%§,false));
         §"<§(new §'"b§(mLevelManager,§,"!§(§+#D§),§6%§,false));
         §"<§(new §?"R§(mLevelManager,§6%§,false));
         §"<§(new §4e§(mLevelManager,§6%§,false));
         §"<§(new §7"Z§(mLevelManager,§6%§));
         §"<§(new StateLastWeeksTournamentResults(mLevelManager,§6%§,false));
         §"<§(new §0!n§(mLevelManager,§6%§,false));
         §"<§(new StateTournamentResults(mLevelManager,false,§6%§));
      }
      
      override protected function createStateObject(param1:Class) : §'!G§
      {
         if(param1 == §'"b§)
         {
            return new param1(mLevelManager,§,"!§(§+#D§),§6%§);
         }
         return new param1(mLevelManager,§6%§);
      }
      
      public function §7!s§() : void
      {
         mLevelManager.selectEpisode(6);
         §%!?§(§`$D§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §"-§ = new MovieClip();
         § "U§.stage.addChild(§"-§);
         §,#O§ = new §<"!§(§"-§,§6%§,this);
         §,#O§.addEventListener(§0!b§.OPEN,§5#§);
         §,#O§.addEventListener(§0!b§.CLOSE,§&j§);
         §7#P§ = new §="d§(§,#O§,§'"G§,§@M§.§<!P§,new §,$@§(),new §%#p§());
         §,#O§.addLayer(§-!S§.NORMAL,true,new Rectangle(0,0,0,0));
         §,#O§.addLayer(§-!S§.INFO,true,new Rectangle(0,0,0,0));
         §,#O§.addLayer(§-!S§.§ !^§,true,new Rectangle(0,0,0,0));
         §,#O§.addLayer(§-!S§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §4"2§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §'@§.§<$8§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         §2$-§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,"");
         return new §""Z§(§6%§,true,§4"2§.STATE_NAME,getMinLoadingScreenTime(),"","");
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc4_:String = null;
         §1# § = true;
         var _loc2_:String = §[$2§.STATE_NAME;
         if(§?#8§)
         {
            if(§?#8§.indexOf("2000-") > -1)
            {
               _loc2_ = §4e§.STATE_NAME;
            }
            else if(§7!8§.§1"O§(§7!8§.§&$ §) == §7!8§.§'!N§)
            {
               _loc2_ = §[$2§.STATE_NAME;
               §?#8§ = null;
            }
            else
            {
               §5"L§.§3"1§.§9"G§();
               if((_loc4_ = mLevelManager.getValidLevelId(§?#8§)) != §?#8§)
               {
                  §'@§.§=!N§(§?#8§);
               }
               §?#8§ = null;
               if(§'"G§.userProgress.isLevelOpen(_loc4_))
               {
                  this.§7#$§(§9! §.§[@§);
                  this.§[5§(_loc4_);
                  _loc2_ = null;
               }
               else
               {
                  _loc2_ = §@#4§.STATE_NAME;
               }
            }
         }
         var _loc3_:String = §[#j§("fb_source");
         if(_loc3_ && _loc3_ != "null")
         {
            §]!P§.§1!7§().§2!6§(_loc3_,"");
         }
         if(_loc2_)
         {
            §%!?§(_loc2_);
         }
      }
      
      public function §[5§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §%!?§(§["!§.STATE_NAME);
         }
         else
         {
            §%!?§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§,!N§ = true;
         this.§`"_§();
      }
      
      protected function §!&§() : void
      {
         super.setFirstGameState();
      }
      
      public function §`"_§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§?!y§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§5"f§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§,!N§ || !§'"`§)
         {
            return;
         }
         this.§!&§();
         §5"L§.§3"1§.§2"O§(mLevelManager);
         §5"L§.§3"1§.addEventListener(§<$!§.§%>§,this.§5#]§);
         §?#,§.§3"1§.addEventListener(§<#M§.§-"%§,this.§>'§);
         §9#4§.§3U§ = new §9"B§();
         §9#4§.§3U§.§-v§();
         this.§]#1§();
         §>h§.§3"1§.init(popupManager);
         if(!§?#,§.§3"1§.active)
         {
            if(TournamentResultsPopup.§;!S§)
            {
               _loc2_ = new TournamentResultsPopup(§-!S§.NORMAL,§## §.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§5"L§.§3"1§.tournamentRules && §5"L§.§3"1§.tournamentRules.§7!W§)
         {
            _loc3_ = §5"L§.§3"1§.tournamentRules.§7!W§;
            _loc2_ = new _loc3_(§-!S§);
            popupManager.openPopup(_loc2_);
         }
         §5"L§.§3"1§.addEventListener(§<$!§.§'!H§,this.§=""§);
         §5"L§.§3"1§.addEventListener(§<$!§.§3!=§,this.§5#b§);
         §5"L§.§3"1§.addEventListener(§<$!§.§#F§,this.§4$;§);
         if(GiftInboxPopup.§96§)
         {
            _loc2_ = new GiftInboxPopup(§-!S§.NORMAL,§## §.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§!",§.§3"1§.§%$7§.§1_§(§<$9§.§&!y§))
         {
            popupManager.openPopup(new §[n§(§-!S§.NORMAL,§## §.DEFAULT));
         }
         this.§!$'§ = new §]!O§();
         this.§!$'§.§-#$§();
         this.§=!<§ = new Vector.<§5"f§>();
         for each(_loc1_ in §!",§.§3"1§.§%$7§.claimableBundles)
         {
            if(§!",§.§3"1§.§%$7§.§1_§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §4$>§.§#!q§.definition.toUpperCase():
                     popupManager.openPopup(new §-;§(§-!S§.NORMAL,§## §.DEFAULT,§4$>§.§#!q§));
               }
               for each(_loc4_ in §-&§.§=!C§)
               {
                  if(_loc4_[§-&§.§7#9§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §-&§(_loc4_[§-&§.§7#9§],§-&§.§<`§));
                     (_loc5_ = new §5"f§()).addEventListener(Event.COMPLETE,this.§1h§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§?!A§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§?!A§);
                     _loc5_.addEventListener(§;" §.§`S§,this.§?!A§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§=!<§.push(_loc5_);
                     (_loc6_ = §!"`§.§@!A§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§-&§.§7#9§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §,#b§(dataModel).§'!<§.§7c§();
         §,#b§(dataModel).§+!J§.slingshots;
         this.§[$"§();
         if(§,#b§(dataModel).§^"O§.§#!?§)
         {
            §,#b§(dataModel).§^"O§.addEventListener(Event.COMPLETE,this.§;"'§);
         }
         else
         {
            this.§;"'§(null);
         }
      }
      
      private function §5#b§(param1:§<$!§) : void
      {
         var blueprintItems:Array = null;
         var blueprintPackageLoader:§""P§ = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§<$!§ = param1;
         if(event.data.bluePrintPackLoader)
         {
            blueprintItems = this.§-!X§.§%A§();
            blueprintPackageLoader = §""P§(event.data.bluePrintPackLoader);
            if(blueprintPackageLoader.§&!H§)
            {
               §+!p§.§@V§(blueprintPackageLoader.§&!H§,blueprintItems);
            }
            return;
         }
         var packageLoader:§""P§ = §""P§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §5"L§.§3"1§.brandedTournamentAssetId;
         var backgroundFileName:String = "background.xml";
         var backgroundLoadedFromXML:Boolean = false;
         if(packageLoader.§@$8§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§5!§(backgroundFileName,packName));
            §8$;§.loadBackgroundXML(backgroundData);
            backgroundLoadedFromXML = true;
         }
         if(packageLoader.§@$8§(§&#d§,packName))
         {
            try
            {
               luaObject = §6h§.§<#E§(packageLoader.§5!§(§&#d§,packName));
               this.§2#<§(luaObject);
               items = this.§-!X§.§'!W§(luaObject);
               if(luaObject.linkButton)
               {
                  §;$2§.§6!8§(§5"L§.§3"1§.brandedTournamentAssetId,luaObject.linkButton);
               }
               if(!backgroundLoadedFromXML && luaObject.dynamicBlocks)
               {
                  (§8$;§ as §#$2§).§,"E§(luaObject.dynamicBlocks.themes,§5"L§.§3"1§.brandedTournamentAssetId);
               }
               §5"L§.§3"1§.§2#5§ = luaObject.special;
               this.§-!X§.§+"o§(luaObject.audio);
               fn = function(param1:Event):void
               {
                  cb();
               };
               if(packageLoader.§&!H§)
               {
                  §+!p§.§@V§(packageLoader.§&!H§,items,fn);
               }
            }
            catch(e:Error)
            {
               AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§ !I§,"Tournament brand error: " + e.name + "\n" + e.errorID + "\n" + e.message));
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §2#<§(param1:Object) : void
      {
         §5"L§.§3"1§.§9#,§ = param1.shareButton;
      }
      
      protected function §=""§(param1:§<$!§) : void
      {
         if(this.§-!X§ && !§`"&§)
         {
            §`"&§ = true;
            §""t§ = true;
            this.§-!X§.§9#]§(§5"L§.§3"1§.brandedTournamentAssetId);
         }
         var _loc2_:§6#!§ = §5"L§.§3"1§.tournamentRules;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§,d§;
         if(§=@§.§8!l§(_loc3_))
         {
            this.§6"[§.§;=§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §'$§() : void
      {
         if(this.§-!X§)
         {
            this.§-!X§.§9#]§();
            §`"&§ = false;
         }
      }
      
      protected function §5$B§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§-!S§.NORMAL,§## §.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function §5#]§(param1:Event) : void
      {
         this.§<",§[§-#Q§] = true;
         this.§<",§[§2!a§] = true;
         this.§2#i§();
      }
      
      protected function §>'§(param1:Event) : void
      {
         this.§<",§[§-#Q§] = true;
         this.§<",§[§2!a§] = true;
         this.§2#i§();
      }
      
      private function §2#i§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§?!y§ = null;
         for each(_loc1_ in this.§<",§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§0!b§.CLOSE,this.§7!N§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§<",§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§6!z§();
         if(_loc3_)
         {
            §^"a§.§'e§.§3H§();
            if(!§?#,§.§3"1§.active)
            {
               this.§5$B§();
            }
         }
      }
      
      private function §7!N§(param1:§0!b§) : void
      {
         this.§2#i§();
      }
      
      protected function §["t§(param1:§!"5§) : void
      {
         var _loc2_:§?!y§ = null;
         if(DailyRewardPopup.§["p§)
         {
            _loc2_ = new DailyRewardPopup(§-!S§.NORMAL,§## §.TOP,TournamentResultsPopup.§;!S§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function §;"'§(param1:Event) : void
      {
         var _loc2_:Object = §,#b§(AngryBirdsBase.singleton.dataModel).§^"O§.§6!D§(§ !G§.§0"z§);
         if(_loc2_)
         {
            §4!T§(_loc2_[0]);
         }
         else
         {
            §4!T§(true);
         }
         this.§#$3§.§6!b§();
         var _loc3_:Object = §,#b§(AngryBirdsBase.singleton.dataModel).§^"O§.§6!D§(§ !G§.§ #w§);
         if(_loc3_)
         {
            if(§?#,§.§3"1§.active && _loc3_[0] == §9! §.§"!"§)
            {
               this.§#$3§.§ !A§(§9! §.§`"x§);
            }
            else
            {
               this.§#$3§.§ !A§(§9! §.§5#O§);
            }
         }
         this.§1B§(null);
         if(this.§?!2§)
         {
            if(!§,#b§(AngryBirdsBase.singleton.dataModel).§^"O§.§,!F§(this.§?!2§.§##J§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§?!2§);
               §,#b§(AngryBirdsBase.singleton.dataModel).§^"O§.§""C§(§ !G§.§-y§,[this.§?!2§.§##J§()]);
            }
            else
            {
               this.§?!2§ = null;
            }
         }
      }
      
      private function §1B§(param1:Event) : void
      {
         §,#b§(dataModel).§^"O§.removeEventListener(Event.COMPLETE,this.§1B§);
         §,#b§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§1B§);
         if(§,#b§(dataModel).currencyModel.§+Y§)
         {
            §,#b§(dataModel).§+!J§.§!$"§();
            §,#b§(dataModel).§6"J§.loadItems();
         }
         else
         {
            §,#b§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§1B§);
         }
      }
      
      protected function §4$;§(param1:Event) : void
      {
         this.§"!p§ = setInterval(this.§;§,1000);
      }
      
      private function §;§() : void
      {
         if(§5"L§.§3"1§.§2o§())
         {
            §7"Z§.§,#M§();
         }
         if(§1"Z§() != StateTournamentResults.STATE_NAME && §1"Z§() != §4e§.STATE_NAME && §1"Z§() != §?"R§.STATE_NAME && !§5"L§.§3"1§.§#!$§ && §5"L§.§3"1§.§@!-§() <= 0)
         {
            if(!§5"L§.§3"1§.§2o§())
            {
               §4e§.§7!v§(§5"L§.§3"1§.§54§.id);
            }
            §5"L§.§3"1§.§3!%§();
            §5"L§.§3"1§.§#!$§ = true;
            §?#,§.§3"1§.§5!i§();
            §^"a§.§'e§.§3H§();
            §51§.§8!a§ = new Array();
            §`"&§ = false;
            (dataModel as §,#b§).§+!J§.§0#K§();
            if(!§!",§.§3"1§.§#!?§)
            {
               §!",§.§3"1§.§,"&§();
            }
            if(§5"L§.§3"1§.§54§)
            {
               §5"L§.§3"1§.§54§.brandedTournamentAssetId = null;
            }
            §,W§ = true;
         }
         clearInterval(this.§"!p§);
      }
      
      public function §[K§(param1:Object) : void
      {
         if(!§'e§)
         {
            §'e§ = new §>!H§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as §>#G§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as §>#G§).userName);
         }
         §'e§.injectData(param1);
         var _loc2_:int = §-#]§.§7#'§();
         if(_loc2_ >= 0)
         {
            §'@§.§<$<§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:int = param1;
         if(this.§#$3§)
         {
            param1 -= 180;
            this.§#$3§.x = param1;
            this.§#$3§.height = param2;
         }
         super.resizeViews(param1,param2,param3);
         this.§`,§(_loc4_,param2);
      }
      
      public function §`,§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §8"H§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §""b§(param1:§-B§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            §]!P§.§1!7§().§]!M§(_loc5_,_loc4_);
            §=#c§.§<!t§("updateSessionToken",§="A§.§<!9§);
            §=#c§.§<!t§("flashInviteFriendsHandler",_loc3_,_loc2_,§!#?§.§]!2§(§!#?§.INVITE));
         }
         else
         {
            §'@§.§8#_§();
            popupManager.openPopup(this.§0#<§);
         }
      }
      
      protected function §-C§(param1:§-B§) : void
      {
         if(param1.data != null)
         {
            this.§?"c§.§9"a§(param1.data);
         }
      }
      
      protected function §>!§(param1:§-B§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§-!S§.NORMAL,§## §.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§0!b§.§9"5§,this.§^!x§);
      }
      
      protected function §0#h§(param1:§-B§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§-!S§.NORMAL,§## §.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§0!b§.§9"5§,this.§]!G§);
      }
      
      protected function §]!G§(param1:Event) : void
      {
         this.§#$3§.§?!3§(§,#b§(dataModel).§`!6§);
      }
      
      protected function §^!x§(param1:Event) : void
      {
         this.§,#@§();
      }
      
      public function §,#@§() : void
      {
         this.§#$3§.§!p§();
      }
      
      protected function §;"?§(param1:Event) : void
      {
         §=!Y§();
      }
      
      protected function §>#y§(param1:§-B§) : void
      {
         § "F§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §9#P§(param1:§-B§) : void
      {
         if(§ "F§ is StatePlay)
         {
            StatePlay(§ "F§).showTutorials();
         }
      }
      
      protected function §7'§(param1:§-B§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§-!S§.NORMAL,§## §.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §>#-§(param1:§-B§) : void
      {
         var _loc2_:§6"R§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         if(!this.§;"h§)
         {
            this.§;"h§ = new Timer(1000);
            this.§;"h§.addEventListener(TimerEvent.TIMER,this.§0#$§);
            this.§;"h§.start();
            exitFullScreen();
            _loc2_ = param1.data as §6"R§;
            _loc3_ = _loc2_.§9"T§.rank - 1;
            §'@§.§ !;§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §?"m§(mLevelManager).§&#W§(_loc4_);
            if(int(§5"L§.§3"1§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§5"L§.§3"1§.§%!m§(_loc4_));
            }
            §=#c§.§<!t§("updateSessionToken",§="A§.§<!9§);
            §=#c§.§<!t§("flashBrag",_loc2_.§9"T§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§!#?§.§]!2§(§!#?§.BRAG));
         }
      }
      
      private function §0#$§(param1:TimerEvent) : void
      {
         if(this.§;"h§)
         {
            this.§;"h§.stop();
            this.§;"h§.removeEventListener(TimerEvent.TIMER,this.§0#$§);
            this.§;"h§ = null;
         }
      }
      
      protected function §=$9§(param1:§-B§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §'@§.§=!N§(_loc2_);
         }
         if(§'"G§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §%!?§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §,!D§(param1:§-B§) : void
      {
         var musicManager:§]#?§ = null;
         var mySO:SharedObject = null;
         var e:§-B§ = param1;
         §4!T§(!§]!K§());
         if(§]!K§())
         {
            if(§1"Z§() == StatePlay.STATE_NAME)
            {
               if(!§+!p§.isPaused)
               {
                  §+!p§.§`?§.background.playAmbientSound();
               }
            }
            else if(this.§^#F§())
            {
               musicManager = §^"a§.§9!h§.§^"C§();
               musicManager.§ $C§(§5#=§.§&"^§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§ "f§,§7!l§);
            mySO.data.useSounds = §7"q§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §6"&§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§'"G§.userProgress as §>#G§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§6!e§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§5"L§.§3"1§ && §5"L§.§3"1§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §5"L§.§3"1§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §5"L§.§3"1§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§'"G§.userProgress as §>#G§).§>#M§(param1,_loc4_.rankAfterUpdate);
         }
         if(§?#,§.§3"1§.active)
         {
            if(_loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank)
            {
               (§'"G§.userProgress as §>#G§).§6"d§(param1,_loc4_.leagueRankAfterUpdate);
               return true;
            }
            return false;
         }
         return false;
      }
      
      public function §?r§(param1:String) : void
      {
         var _loc2_:int = §'"G§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §'"G§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §'"G§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§6!e§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§'"G§.userProgress as §>#G§).§##D§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §6!e§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§?"c§.§>N§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §?"c§() : §9! §
      {
         return this.§#$3§;
      }
      
      public function get §""G§() : §9#U§
      {
         return this.§'d§;
      }
      
      public function §7"D§() : void
      {
         if(this.§'d§)
         {
            this.§'d§.§var§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + §@#F§ + " " + §!"O§;
      }
      
      public function §2!^§() : String
      {
         return §'@§.§9#@§;
      }
      
      public function §6#U§() : String
      {
         return §7J§.§2! §;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §'@§.§4"x§(§7J§.§2! §,_loc1_.toString(),_loc1_);
         §'@§.trackPageView(this,§7J§.§2! §);
         this.§,!N§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§#!]§)
         {
            this.§#!]§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§#!]§ += String.fromCharCode(param1.keyCode);
         }
         this.§#!]§ = this.§#!]§.toLowerCase();
         if(this.§#!]§.length > 15)
         {
            this.§#!]§ = this.§#!]§.substr(1);
         }
      }
      
      public function get §"?§() : §]!O§
      {
         return this.§!$'§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §-!X§() : §7#I§
      {
         return §7#I§(§+#D§);
      }
      
      protected function get §`e§() : §@K§
      {
         return §@K§(§]I§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return §5#=§.§&"^§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§]#?§ = null;
         if(§""t§ || §5"L§.§3"1§.§2o§())
         {
            if(this.§^#F§())
            {
               _loc1_ = §^"a§.§9!h§.§^"C§();
               _loc1_.§4#v§(§5#=§.§&"^§);
            }
            this.§=!g§ = false;
         }
         else
         {
            this.§=!g§ = true;
         }
      }
      
      private function §=#E§() : Boolean
      {
         var _loc1_:§8M§ = §4$4§.§`!U§("Channel_Theme");
         return _loc1_.§!!;§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§+o§ = null;
         var _loc1_:§8M§ = §4$4§.§`!U§("Channel_Theme");
         if(_loc1_.§!!;§ > 0)
         {
            _loc2_ = _loc1_.§2#L§(0);
            this.§^"C§().§#2§(_loc2_.§6#=§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get §2!E§() : §#!b§
      {
         return this.§`$6§;
      }
      
      public function get §9$0§() : §,#b§
      {
         return §,#b§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§5o§(param1);
         }
         return _loc2_;
      }
      
      public function §5o§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < §3A§.length)
         {
            if(§3A§[_loc2_][0] == param1)
            {
               this.§;"K§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §8"x§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = §3A§[this.§;"K§][0];
         _loc1_.screenName = §3A§[this.§;"K§][1];
         return _loc1_;
      }
      
      private function §1h§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§=!<§.length)
            {
               if(this.§=!<§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§=!<§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§=!<§.length == 0)
         {
            §!",§.§3"1§.§,"&§();
         }
      }
      
      private function §?!A§(param1:ErrorEvent) : void
      {
         §4!h§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function §31§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§-!S§.NORMAL,§## §.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§!"d§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§+$ §.§7"j§,this.§]!§);
         if(this.§,!N§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§?!2§ = _loc3_;
         }
      }
      
      private function §]!§(param1:§+$ §) : void
      {
         §'@§.§<"@§();
         AngryBirdsBase.singleton.exitFullScreen();
         §=#c§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §=#c§.§<!t§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         §]!P§.§1!7§().§;5§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§?!2§)
         {
            this.§?!2§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         §=#c§.§`$ §("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §9! §.§=!?§ = param1 == "true";
         if(§9! §.§=!?§)
         {
            this.§7#$§(§9! §.§5#O§);
            §2"%§.§0!2§();
         }
      }
      
      public function §>9§() : void
      {
         this.§4"W§ = new Timer(this.§9$0§.§0"6§.expiresIn * 1000,1);
         this.§4"W§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§#"N§);
         this.§4"W§.start();
      }
      
      private function §#"N§(param1:TimerEvent) : void
      {
         this.§4"W§.stop();
         this.§4"W§ = null;
         this.§9$0§.§0"6§.§0$@§();
      }
      
      public function §#!1§() : §%![§
      {
         if(this.§!$C§ == null)
         {
            this.§!$C§ = new §;"]§(mLevelManager);
         }
         return this.§!$C§;
      }
      
      override public function onEnterFrame(param1:Event) : void
      {
         super.onEnterFrame(param1);
         § l§.§3"1§.§@$#§();
         §=!a§.§3"1§.§<!O§();
         if(this.§=!g§)
         {
            this.playThemeMusic();
         }
      }
      
      private function §^#F§() : Boolean
      {
         switch(§1"Z§())
         {
            case §@#4§.STATE_NAME:
            case §;O§.STATE_NAME:
            case §+!Y§.STATE_NAME:
            case §[$2§.STATE_NAME:
            case §`$D§.STATE_NAME:
            case §[!=§.STATE_NAME:
            case §4e§.STATE_NAME:
            case §7"Z§.STATE_NAME:
            case § !M§.STATE_NAME:
            case StateTournamentResults.STATE_NAME:
               return true;
            default:
               return false;
         }
      }
   }
}
