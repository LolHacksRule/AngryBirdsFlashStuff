package
{
   import § !D§.§'"u§;
   import § !D§.§4B§;
   import § "C§.§ !<§;
   import § "g§.§,#?§;
   import § "g§.§5"D§;
   import §!!?§.TabbedShopPopup;
   import §!!T§.§1"9§;
   import §!!t§.§ !!§;
   import §!!t§.§ "X§;
   import §!!t§.§'8§;
   import §!!t§.§1!M§;
   import §!!t§.§2!S§;
   import §!!t§.§8!k§;
   import §!!t§.§9$A§;
   import §!!t§.§<!x§;
   import §!!t§.StateLastWeeksTournamentResults;
   import §!!t§.StateTournamentResults;
   import §!"§.§!§;
   import §!"§.§-!<§;
   import §!G§.DailyRewardPopup;
   import §"!>§.§'!x§;
   import §"$=§.§'![§;
   import §"$=§.§,-§;
   import §#!E§.§2#Q§;
   import §#M§.§<"c§;
   import §%4§.§7!,§;
   import §%4§.§7#w§;
   import §%4§.CoinShopPopup;
   import §'!O§.§8!I§;
   import §'!O§.§>!Y§;
   import §'#g§.§&"Y§;
   import §+"u§.§6!9§;
   import §+"u§.§^"C§;
   import §+#B§.§ "f§;
   import §+#B§.§#k§;
   import §+#B§.§&"U§;
   import §+#B§.§'!m§;
   import §+#B§.§+$A§;
   import §+#B§.§0"+§;
   import §+#B§.§4$7§;
   import §+#B§.§5"w§;
   import §+#B§.§^!M§;
   import §-!"§.§7z§;
   import §-"h§.§5!b§;
   import §-#R§.§4=§;
   import §2!u§.§2$#§;
   import §3!5§.§0#r§;
   import §3=§.§ !d§;
   import §3=§.§!!V§;
   import §3=§.§!c§;
   import §3=§.§%"#§;
   import §3=§.§&P§;
   import §3=§.§0!e§;
   import §3=§.§1#Z§;
   import §3=§.§1U§;
   import §3=§.§3n§;
   import §3=§.§5r§;
   import §3=§.§6"H§;
   import §3=§.§6#M§;
   import §3=§.§6#g§;
   import §3=§.§8$8§;
   import §3=§.§8E§;
   import §3=§.§;"7§;
   import §3=§.StateCutScene;
   import §3=§.StatePlay;
   import §4#O§.§4!q§;
   import §4#O§.§<!H§;
   import §4#O§.§="j§;
   import §6!'§.§@#c§;
   import §7#j§.§@"F§;
   import §7h§.GiftInboxPopup;
   import §8#?§.§!!y§;
   import §8A§.§ b§;
   import §8t§.§=#U§;
   import §9"§.§>!a§;
   import §9#K§.§#D§;
   import §9#K§.§=#f§;
   import §9#o§.§%"N§;
   import §9#o§.§5@§;
   import §9#o§.§=!,§;
   import §;$5§.§-8§;
   import §;$5§.§9§;
   import §;$5§.§@#G§;
   import §;$>§.§,!>§;
   import §;N§.§"F§;
   import §;w§.§5"_§;
   import §=!2§.§%"T§;
   import §=!V§.TournamentResultsPopup;
   import §="l§.§?B§;
   import §=#§.§%"O§;
   import §=#§.§&#t§;
   import §=#§.§1!"§;
   import §>"9§.§'#M§;
   import §>"9§.§'#X§;
   import §>"9§.§1"T§;
   import §>"9§.§2"0§;
   import §>"9§.§4§;
   import §>"9§.§5!n§;
   import §>"9§.§[#%§;
   import §>"Q§.§"!;§;
   import §>"Q§.§'!n§;
   import §>"Q§.§2"6§;
   import §>"Q§.§]Q§;
   import §>"h§.§?>§;
   import §?!N§.§%#§;
   import §?!N§.§5W§;
   import §?!N§.§?!n§;
   import §?!N§.AvatarCreatorPopup;
   import §?!N§.ErrorPopup;
   import §?!N§.InviteFriendsPopup;
   import §?!N§.QuestionPopup;
   import §?!N§.QuickPurchaseSlingshotPopup;
   import §?!N§.§try §;
   import §?#h§.§3#=§;
   import §?#h§.§4"7§;
   import §?§.§#!-§;
   import §?§.§<"J§;
   import §?§.§<$?§;
   import §?§.§?!e§;
   import §?x§.§-!t§;
   import §?x§.§6"#§;
   import §[!B§.§#!#§;
   import §[!B§.§&#`§;
   import §[!B§.§3!1§;
   import §]"'§.§#$D§;
   import §]"'§.§&$!§;
   import §]"'§.§-!#§;
   import §]"'§.§1#"§;
   import §]"'§.§5$$§;
   import §]"'§.§>I§;
   import §]"'§.§?"$§;
   import §]"'§.§@"%§;
   import §]"'§.§[#!§;
   import §]$<§.§1+§;
   import §]$<§.§9"6§;
   import §]$<§.§9g§;
   import §]$<§.§^#l§;
   import §]x§.§ $>§;
   import com.rovio.assets.§2"O§;
   import com.rovio.assets.LoadingScreen;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.external.ExternalInterface;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class §'"a§ extends AngryBirdsBase implements §0"+§, IAngryBirdsFacebook
   {
      
      public static const §%#F§:String = "r11554";
      
      public static const §'$4§:String = "v3.2";
      
      private static var §`""§:String = "AngryBirdsFriends";
      
      private static const §^$2§:String = "angrybirdsfriendsdev_d8f18df";
      
      public static const §#$4§:String = "http://bit.ly/playfriends";
      
      public static const § !f§:String = "https://cloud.rovio.com/privacyweb/index.html";
      
      public static const §-#z§:String = "external_assets/";
      
      public static const §="w§:String = §-#z§ + "tournaments/";
      
      public static const §9$;§:String = §-#z§ + "sale_campaigns/";
      
      public static const §1#U§:String = "packages/";
      
      public static const §6"n§:String = "tournamentJSONLevels-";
      
      public static const §&"8§:String = "tournamentJSONLevels/";
      
      private static const §[#r§:String = "AngryBirdsFacebookSettings";
      
      public static const §"h§:String = "/";
      
      public static const §5#-§:String = "brand.lua";
      
      protected static var §4"I§:Class = §^!Q§;
      
      protected static var §7"_§:Class = §<!q§;
      
      protected static var §false§:Class = §@#&§;
      
      protected static var §8#-§:Class = §=$3§;
      
      protected static var §!x§:Class = §9#J§;
      
      protected static var §+!$§:Class = §9! §;
      
      public static var §`!R§:§,#?§;
      
      public static var §!!8§:IAngryBirdsFacebook;
      
      private static var §2#"§:Boolean = false;
      
      public static var §="N§:String = null;
      
      public static var §;$2§:Boolean;
      
      private static const §^T§:int = 0;
      
      private static const §4!I§:int = 1;
      
      public static const §="9§:Array = [[§6"H§.STATE_NAME,"MAIN_MENU"],[§1#Z§.STATE_NAME,"STORY_MODE_EPISOLE_SELECTION"],[§'8§.STATE_NAME,"LEVEL_SELECTION"],[§9$A§.STATE_NAME,"OVERLAPPING_TOURNAMENT_MENU"],[§!!V§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§8$8§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§&P§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§2!S§.STATE_NAME,"INGAME"],[StatePlay.STATE_NAME,"INGAME"],[§<"c§.§#g§,"INGAME"],[§<"c§.§4E§,"PAUSE_PAGE"]];
      
      private static var §;+§:Boolean = false;
      
      private static var §[H§:Boolean = false;
      
      public static var §!$§:Object;
      
      private static var §+t§:XML;
       
      
      protected var §,!@§:§<"c§;
      
      private var §;!U§:InviteFriendsPopup;
      
      public var §&s§:§6"#§;
      
      private var §3!w§:§-!t§;
      
      private var §@!O§:String = "";
      
      private var §45§:§&"U§;
      
      private var §4"0§:§'#M§;
      
      private var §#P§:Sprite;
      
      private var §,#+§:Boolean = false;
      
      protected var §58§:§'!m§;
      
      private var §4!p§:String;
      
      private var §,#A§:String;
      
      private var §7!p§:String;
      
      private var §`![§:String;
      
      private var §7#S§:§4!q§;
      
      private var §-#9§:uint = 0;
      
      private var §^<§:Array;
      
      private var §'$%§:Timer;
      
      private var §+#D§:QuestionPopup;
      
      private var §4"1§:int = 0;
      
      private var §?$@§:Boolean;
      
      private var § "4§:Vector.<§'!n§>;
      
      private var §5#>§:Timer;
      
      private var §!#P§:§?"$§;
      
      public function §'"a§(param1:§!!y§)
      {
         § set§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§^F§();
         §%"T§.DEBUG_MODE_ENABLED = false;
         §?B§.§,"M§ = true;
         this.§?#k§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§%#F§,param1.stage.loaderInfo.parameters.userId || this.§4!p§);
         this.§@!R§();
         param1.stage.addChild(this.§#P§ = new Sprite());
         super(param1,§ set§,SERVER_ROOT);
         this.§58§.§'!a§(mLevelManager);
         this.§58§.§,!e§();
         §@"F§.addCallback("trialPayClosed",this.§<#q§);
         §@"F§.addCallback("handleExpiredMobilePricePoints",this.§3"^§);
         §@"F§.addCallback("handleUserCancelledOrder",§@T§);
         §@"F§.addCallback("orderReceived",§-4§);
         this.§^<§ = new Array();
         this.§^<§[§^T§] = false;
         this.§^<§[§4!I§] = false;
         §;$2§ = true;
      }
      
      public static function get §;#M§() : String
      {
         return §`""§;
      }
      
      public static function §6"`§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as §2#Q§).userID)
         {
            return §[#r§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as §2#Q§).userID;
         }
         return null;
      }
      
      public static function get §&$%§() : §,-§
      {
         return (singleton as §'"a§).§<"5§;
      }
      
      private static function §@T§() : void
      {
         CoinShopPopup.§"E§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§9#0§();
         }
         var _loc2_:QuickPurchaseSlingshotPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchaseSlingshotPopup.ID) as QuickPurchaseSlingshotPopup;
         if(_loc2_)
         {
            _loc2_.§9#0§();
         }
      }
      
      private static function §-4§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§[$&§();
         }
      }
      
      public static function §2$2§() : void
      {
         §2#"§ = true;
         §!!8§.§5";§();
      }
      
      public static function §3#M§() : Boolean
      {
         if(§2#"§)
         {
            return true;
         }
         return false;
      }
      
      private function get §<"5§() : §,-§
      {
         return mLevelManager as §,-§;
      }
      
      protected function §?#k§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§58§ = new §'!m§(param1,param2,param3,param4);
      }
      
      private function §^F§() : void
      {
      }
      
      protected function §@!R§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §+!$§(),_loc2_);
      }
      
      private function §<#q§(param1:int, param2:int, param3:String = "") : void
      {
         §5"w§.§;u§("TrialPay",param2);
         §5"w§.trackPageView(this,§5"w§.§9`§);
         §5"w§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         §#$D§.§?q§.§>!'§();
         var _loc4_:§7z§;
         (_loc4_ = new §7z§()).currency = "IVC";
         _loc4_.§6"d§ = §>I§.§ !C§;
         _loc4_.screen = §5"w§.§9`§;
         _loc4_.amount = param2;
         _loc4_.§+#;§ = §+$A§.§!"a§;
         _loc4_.itemType = §>I§.§ !C§;
         §+$A§.§@"i§().§%!+§(false,_loc4_.itemType,_loc4_.amount,_loc4_.§+#;§,_loc4_.screen,_loc4_.level,_loc4_.itemType,_loc4_.§6"d§,_loc4_.§#!z§,_loc4_.currency,_loc4_.§-!G§);
      }
      
      private function §3"^§() : void
      {
         §@"%§(dataModel).§%#8§.§8e§();
      }
      
      protected function §5#e§() : void
      {
         var _loc3_:Stage3D = null;
         §4$7§.enabled = true;
         §5"w§.§8!R§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §5"w§.§9!Q§("no-stage3d");
         }
         §!!8§ = this;
         §5"w§.§-!I§(§4$7§.§!#+§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§0]§();
         §[#%§.addEventListener(§5!n§.§>"x§,this.§0#%§);
         §[#%§.addEventListener(§4#8§.§ "N§,this.§2!7§);
         §[#%§.addEventListener(§4#8§.§;T§,this.§@!,§);
      }
      
      protected function §0]§() : void
      {
         this.§45§ = new §&"U§("");
         this.§45§.start();
      }
      
      private function get accessToken() : String
      {
         return § #w§("accessToken") || this.§,#A§;
      }
      
      private function §0#%§(param1:§5!n§) : void
      {
         §5"w§.§5$#§(param1.§##§,param1.errorID);
      }
      
      private function §2!7§(param1:§4#8§) : void
      {
         §5"w§.§9#j§(param1.§##§);
      }
      
      private function §@!,§(param1:§4#8§) : void
      {
         §5"w§.§9"c§(param1.§##§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §?"s§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §-!#§.§?q§.§!"1§(_loc2_);
         }
      }
      
      private function §?"h§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§,#+§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§7!'§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§%#§.NORMAL,§9#5§.DEFAULT,false);
               _loc2_.addEventListener(§ b§.§ !-§,this.§[$"§,false,0,true);
               _loc2_.§?#i§();
            }
         }
      }
      
      protected function §[$"§(param1:§ b§) : void
      {
         var _loc2_:§@#G§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§%#§.NORMAL,§9#5§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §#D§.§%"l§(§4"I§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §#D§.§%"l§(§7"_§);
         this.§'$C§(_loc2_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §#D§.§%"l§(§false§);
         this.§'$C§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §#D§.§%"l§(§!x§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers","Powerup_Velocity_Multipliers","Material_Damage_Factor_Limits"];
         this.§'$C§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§4#G§();
      }
      
      protected function §4#G§() : void
      {
         this.§-$<§.§0$"§(§#k§.§?"m§(this.§4"3§.§4!H§(§5#-§,"chaptertournament")),§#k§.§?"m§(this.§4"3§.§4!H§("frommobile.lua","chaptertournament")),§#k§.§?"m§(this.§4"3§.§4!H§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§4"3§.§8#=§)
         {
            this.§-$<§.§8"%§(this.§4"3§.§>"D§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §#D§.§%"l§(§8#-§);
         this.§'$C§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §+B§() : void
      {
         if(stage.loaderInfo.url.indexOf("angrybirds-facebook-dev") > -1 || stage.loaderInfo.url.indexOf("angrybirds-friends-new-feature") > -1)
         {
            §`""§ = §^$2§;
         }
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §5"w§.§%I§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §5"w§.§%I§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §5"w§.§%I§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§ $<§,"Did not receive a facebook user ID.\nError code: " + § "f§.§?r§));
         }
         §^!M§.accessToken = this.accessToken;
         this.§&s§ = new §6"#§(stage.loaderInfo.parameters.accessToken || this.§,#A§);
         var _loc5_:String = §-!<§.§^R§;
         this.§7!p§ = "https://" + _loc5_ + ".rovio.com";
         if(stage.loaderInfo.parameters.analyticsUrl)
         {
            this.§7!p§ = stage.loaderInfo.parameters.analyticsUrl;
            if(this.§7!p§.indexOf(§-!<§.§3$-§) != -1)
            {
               _loc5_ = §-!<§.§3$-§;
            }
            else if(this.§7!p§.indexOf(§-!<§.§ #e§) != -1)
            {
               _loc5_ = §-!<§.§ #e§;
            }
            else
            {
               _loc5_ = §-!<§.§^R§;
            }
         }
         this.§`![§ = stage.loaderInfo.parameters.userId;
         this.§6#X§.§="4§ = new §!#7§(_loc1_,_loc2_,_loc5_);
         this.§6#X§.§="4§.§66§();
         §1#"§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§6#X§.§="4§);
      }
      
      public function §^#3§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §@!q§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§5#e§();
         super.initialize();
         §="N§ = stage.loaderInfo.parameters.levelId;
         §7!r§.addEventListener(Event.INIT,this.§>#L§);
         §7!r§.addEventListener(Event.COMPLETE,this.§!"]§);
         §#$D§.§?q§.§'!a§(mLevelManager);
         this.§+B§();
         this.§5]§();
         §0!o§(false);
         §@"F§.addCallback("purchaseComplete",this.§51§);
         §@"F§.addCallback("purchaseFailed",this.§>'§);
         §@"F§.addCallback("giftsSentToUsers",this.§?"s§);
         §@"F§.addCallback("onUrl",this.§?"h§);
         ExternalInterface.call("trapMouse","if (window.addEventListener) window.addEventListener(\'DOMMouseScroll\', handleWheelEvent, false); window.onmousewheel = document.onmousewheel = handleWheelEvent; function handleWheelEvent(e){e.preventDefault();}");
         this.§;"3§();
         this.§-"G§();
      }
      
      private function §83§() : void
      {
         this.§7#S§ = new §<!H§();
         (this.§7#S§ as §<!H§).addEventListener(Event.COMPLETE,this.§;!s§);
         this.§7#S§.§5>§();
      }
      
      private function §;!s§(param1:Event) : void
      {
         var _loc3_:§="j§ = null;
         var _loc4_:§@#G§ = null;
         var _loc5_:§@#G§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§7#S§.§ @§)
         {
            if(_loc3_.§^v§)
            {
               _loc5_ = new §1+§(§%#§.NORMAL,§9#5§.§%"H§);
               _loc4_ = new §^#l§(§%#§.NORMAL,§9#5§.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §5W§(§%#§.NORMAL,§9#5§.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§7#S§.§!"t§(_loc2_);
         }
      }
      
      private function §;"3§() : void
      {
         var _loc1_:String = this.§`![§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§+$A§ = §+$A§.§@"i§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§7!p§ && this.§7!p§.indexOf("https://") == -1)
         {
            this.§7!p§ = "https://" + this.§7!p§;
         }
         _loc3_.analyticsUrl = this.§7!p§;
      }
      
      private function §-"G§() : void
      {
         §>!a§.§7#y§();
      }
      
      private function §51§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            §#$D§.§?q§.§>!'§(param2 > 0);
         }
      }
      
      private function §>'§() : void
      {
         CoinShopPopup.§"E§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§9#0§();
         }
      }
      
      protected function §5]§() : void
      {
         this.§4"0§ = new §'#M§(new §2"0§());
      }
      
      public function § !i§() : §2"0§
      {
         return this.§4"0§.§@"?§;
      }
      
      protected function §'9§() : void
      {
         this.§,!@§ = new §<"c§(§`!R§,SERVER_ROOT,(§]!v§.userProgress as §2#Q§).userID,this.§<"5§);
         this.§#P§.addChild(this.§,!@§);
         this.§,!@§.height = stage.stageHeight;
         this.§,!@§.x = stage.stageWidth - 180;
         this.§,!@§.addEventListener(§'!x§.§!!_§,this.§0#s§);
         this.§,!@§.addEventListener(§'!x§.§&!R§,this.§0#`§);
         this.§,!@§.addEventListener(§'!x§.§;n§,this.§0D§);
         this.§,!@§.addEventListener(§'!x§.§9#l§,this.§=!x§);
         this.§,!@§.addEventListener(§'!x§.§<#O§,this.§?#>§);
         this.§,!@§.addEventListener(§'!x§.§%!b§,this.§`"_§);
         this.§,!@§.addEventListener(§'!x§.§2#o§,this.§3!C§);
         this.§,!@§.addEventListener(§'!x§.§"^§,this.§^#o§);
         this.§,!@§.addEventListener(§'!x§.BRAG,this.§#"?§);
         this.§,!@§.addEventListener(§'!x§.PLAY_LEVEL,this.§%b§);
         this.§,!@§.addEventListener(§'!x§.§-"l§,this.§]"e§);
         this.§;!U§ = new InviteFriendsPopup(§%#§.NORMAL,§9#5§.DEFAULT);
         this.§;!U§.addEventListener(§'!x§.§!!_§,this.§0#s§);
         this.§;!U§.addEventListener(§'!x§.§2!E§,this.§9C§);
         this.§'$%§ = null;
      }
      
      protected function §]"e§(param1:Event) : void
      {
         var _loc2_:§@#G§ = new §9"6§(§%#§.NORMAL,§9#5§.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §>#L§(param1:Event) : void
      {
         §1!"§.§8!O§(false);
      }
      
      protected function §!"]§(param1:Event) : void
      {
         §1!"§.§8!O§(true);
      }
      
      public function §##h§(param1:int, param2:Array = null) : void
      {
         this.§,!@§.§6$@§(param1,param2);
      }
      
      public function §##b§(param1:String) : void
      {
         this.§,!@§.§'!!§(param1);
      }
      
      public function §8"Y§(param1:String) : void
      {
         this.§,!@§.§+"a§(param1);
         this.§,!@§.§'!!§(param1);
      }
      
      override protected function initializeLevelMain() : §'"u§
      {
         return new §4B§(stage,§`!2§,§&"%§,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §<"J§
      {
         return new §#!-§();
      }
      
      override protected function initializeLevelThemeManager() : §>!Y§
      {
         return new §8!I§();
      }
      
      override protected function initializeDataModel() : void
      {
         §]!v§ = new §@"%§();
      }
      
      override protected function initializeLevelManager() : §'![§
      {
         return new §,-§();
      }
      
      override protected function initializePackageManager() : §5$$§
      {
         return new §&$!§(mLevelManager,§?!e§(§`!2§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §]!v§.userProgress = new §2#Q§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §7u§(new §6#g§(mLevelManager,§?!e§(§`!2§),§6"-§,false));
         §7u§(new §;"7§(mLevelManager,§6"-§,false));
         §7u§(new §6"H§(mLevelManager,§6"-§,false));
         §7u§(new §1#Z§(mLevelManager,§6"-§,false));
         §7u§(new §%"#§(mLevelManager,§6"-§,false));
         §7u§(new §0!e§(mLevelManager,§6"-§,false));
         §7u§(new §5r§(mLevelManager,§6"-§,false));
         §7u§(new §8E§(mLevelManager,§6"-§,false));
         §7u§(new §!c§(mLevelManager,§6"-§,false));
         §7u§(new §3n§(mLevelManager,§6"-§,false));
         §7u§(new § !d§(mLevelManager,§6"-§,false));
         §7u§(new §&P§(mLevelManager,§6"-§,false));
         §7u§(new §!!V§(mLevelManager,§6"-§,false));
         §7u§(new §1!M§(mLevelManager,§6"-§,false));
         §7u§(new §<!x§(mLevelManager,§6"-§,false));
         §7u§(new § "X§(mLevelManager,§6"-§,false));
         §7u§(new §8!k§(mLevelManager,§?!e§(§`!2§),§6"-§,false));
         §7u§(new §2!S§(mLevelManager,§6"-§,false));
         §7u§(new §'8§(mLevelManager,§6"-§,false));
         §7u§(new §9$A§(mLevelManager,§6"-§));
         §7u§(new StateLastWeeksTournamentResults(mLevelManager,§6"-§,false));
         §7u§(new § !!§(mLevelManager,§6"-§,false));
         §7u§(new StateTournamentResults(mLevelManager,false,§6"-§));
      }
      
      override protected function createStateObject(param1:Class) : §3#=§
      {
         if(param1 == §8!k§)
         {
            return new param1(mLevelManager,§?!e§(§`!2§),§6"-§);
         }
         return new param1(mLevelManager,§6"-§);
      }
      
      public function §6!k§() : void
      {
         mLevelManager.selectEpisode(6);
         §%D§(§!!V§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §4x§ = new MovieClip();
         § $"§.stage.addChild(§4x§);
         §7$%§ = new §?!n§(§4x§,§6"-§,this);
         §7$%§.addEventListener(§5"_§.OPEN,§%J§);
         §7$%§.addEventListener(§5"_§.CLOSE,§5"§);
         §&N§ = new §&#`§(§7$%§,§]!v§,§-8§.§1!,§,new §3!1§(),new §#!#§());
         §7$%§.addLayer(§%#§.NORMAL,true,new Rectangle(0,0,0,0));
         §7$%§.addLayer(§%#§.INFO,true,new Rectangle(0,0,0,0));
         §7$%§.addLayer(§%#§.§3t§,true,new Rectangle(0,0,0,0));
         §7$%§.addLayer(§%#§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §4"7§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §5"w§.§%I§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         §=!,§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,"");
         return new §6#M§(§6"-§,true,§4"7§.STATE_NAME,getMinLoadingScreenTime(),"","");
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc4_:String = null;
         §%9§ = true;
         var _loc2_:String = §6"H§.STATE_NAME;
         if(§="N§)
         {
            if(§="N§.indexOf("2000-") > -1)
            {
               _loc2_ = §'8§.STATE_NAME;
            }
            else if(§ !<§.§'!J§(§ !<§.§2#i§) == § !<§.§<_§)
            {
               _loc2_ = §6"H§.STATE_NAME;
               §="N§ = null;
            }
            else
            {
               §^"C§.§?q§.§!$C§();
               if((_loc4_ = mLevelManager.getValidLevelId(§="N§)) != §="N§)
               {
                  §5"w§.§9#U§(§="N§);
               }
               §="N§ = null;
               if(§]!v§.userProgress.isLevelOpen(_loc4_))
               {
                  this.§##h§(§<"c§.§]#3§);
                  this.§7!%§(_loc4_);
                  _loc2_ = null;
               }
               else
               {
                  _loc2_ = §1#Z§.STATE_NAME;
               }
            }
         }
         var _loc3_:String = § #w§("fb_source");
         if(_loc3_ && _loc3_ != "null")
         {
            §+$A§.§@"i§().§4$B§(_loc3_,"");
         }
         if(_loc2_)
         {
            §%D§(_loc2_);
         }
      }
      
      public function §7!%§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §%D§(§1!M§.STATE_NAME);
         }
         else
         {
            §%D§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§,#+§ = true;
         this.§5";§();
      }
      
      protected function §@$'§() : void
      {
         super.setFirstGameState();
      }
      
      public function §5";§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§@#G§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§'!n§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§,#+§ || !§2#"§)
         {
            return;
         }
         this.§@$'§();
         §^"C§.§?q§.§'!a§(mLevelManager);
         §^"C§.§?q§.addEventListener(§0#r§.§'!+§,this.§3#k§);
         §@#c§.§?q§.addEventListener(§?>§.§["X§,this.§@"C§);
         §%"O§.§5!,§ = new §&#t§();
         §%"O§.§5!,§.§1$+§();
         this.§'9§();
         §"F§.§?q§.init(popupManager);
         if(!§@#c§.§?q§.active)
         {
            if(TournamentResultsPopup.§'!Q§)
            {
               _loc2_ = new TournamentResultsPopup(§%#§.NORMAL,§9#5§.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§^"C§.§?q§.tournamentRules && §^"C§.§?q§.tournamentRules.§2!Y§)
         {
            _loc3_ = §^"C§.§?q§.tournamentRules.§2!Y§;
            _loc2_ = new _loc3_(§%#§);
            popupManager.openPopup(_loc2_);
         }
         §^"C§.§?q§.addEventListener(§0#r§.§]"?§,this.§2"[§);
         §^"C§.§?q§.addEventListener(§0#r§.§;![§,this.§,@§);
         §^"C§.§?q§.addEventListener(§0#r§.§7v§,this.§<#P§);
         if(GiftInboxPopup.§&F§)
         {
            _loc2_ = new GiftInboxPopup(§%#§.NORMAL,§9#5§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§#$D§.§?q§.§;p§.§ "H§(§7#w§.§3!G§))
         {
            popupManager.openPopup(new §7!,§(§%#§.NORMAL,§9#5§.DEFAULT));
         }
         this.§3!w§ = new §-!t§();
         this.§3!w§.§?"V§();
         this.§ "4§ = new Vector.<§'!n§>();
         for each(_loc1_ in §#$D§.§?q§.§;p§.claimableBundles)
         {
            if(§#$D§.§?q§.§;p§.§ "H§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §4=§.§0"H§.definition.toUpperCase():
                     popupManager.openPopup(new §try §(§%#§.NORMAL,§9#5§.DEFAULT,§4=§.§0"H§));
               }
               for each(_loc4_ in §9g§.§,"#§)
               {
                  if(_loc4_[§9g§.§-!J§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §9g§(_loc4_[§9g§.§-!J§],§9g§.§1"N§));
                     (_loc5_ = new §'!n§()).addEventListener(Event.COMPLETE,this.§1!R§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§5!p§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§5!p§);
                     _loc5_.addEventListener(§"!;§.§ #x§,this.§5!p§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§ "4§.push(_loc5_);
                     (_loc6_ = §2"6§.§;z§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§9g§.§-!J§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §@"%§(dataModel).§%#8§.§8e§();
         §@"%§(dataModel).§,H§.slingshots;
         this.§83§();
         if(§@"%§(dataModel).§"<§.§0"§)
         {
            §@"%§(dataModel).§"<§.addEventListener(Event.COMPLETE,this.§&"t§);
         }
         else
         {
            this.§&"t§(null);
         }
      }
      
      private function §,@§(param1:§0#r§) : void
      {
         var blueprintItems:Array = null;
         var blueprintPackageLoader:§5@§ = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§0#r§ = param1;
         if(event.data.bluePrintPackLoader)
         {
            blueprintItems = this.§-$<§.§!"@§();
            blueprintPackageLoader = §5@§(event.data.bluePrintPackLoader);
            if(blueprintPackageLoader.§9"K§)
            {
               §%"T§.§"#S§(blueprintPackageLoader.§9"K§,blueprintItems);
            }
            return;
         }
         var packageLoader:§5@§ = §5@§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §^"C§.§?q§.brandedTournamentAssetId;
         var backgroundFileName:String = "background.xml";
         var backgroundLoadedFromXML:Boolean = false;
         if(packageLoader.§7_§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§4!H§(backgroundFileName,packName));
            §&"%§.loadBackgroundXML(backgroundData);
            backgroundLoadedFromXML = true;
         }
         if(packageLoader.§7_§(§5#-§,packName))
         {
            try
            {
               luaObject = §#k§.§?"m§(packageLoader.§4!H§(§5#-§,packName));
               this.§]@§(luaObject);
               items = this.§-$<§.§6"j§(luaObject);
               if(luaObject.linkButton)
               {
                  §>!a§.§;#q§(§^"C§.§?q§.brandedTournamentAssetId,luaObject.linkButton);
               }
               if(!backgroundLoadedFromXML && luaObject.dynamicBlocks)
               {
                  (§&"%§ as §8!I§).§7#q§(luaObject.dynamicBlocks.themes,§^"C§.§?q§.brandedTournamentAssetId);
               }
               §^"C§.§?q§.§!N§ = luaObject.special;
               fn = function(param1:Event):void
               {
                  cb();
               };
               if(packageLoader.§9"K§)
               {
                  §%"T§.§"#S§(packageLoader.§9"K§,items,fn);
               }
            }
            catch(e:Error)
            {
               AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§ $<§,"Tournament brand error: " + e.name + "\n" + e.errorID + "\n" + e.message));
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §]@§(param1:Object) : void
      {
         §^"C§.§?q§.§3#"§ = param1.shareButton;
      }
      
      protected function §2"[§(param1:§0#r§) : void
      {
         if(this.§-$<§ && !§;+§)
         {
            §;+§ = true;
            §[H§ = true;
            this.§-$<§.§>3§(§^"C§.§?q§.brandedTournamentAssetId);
         }
         var _loc2_:§6!9§ = §^"C§.§?q§.tournamentRules;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§9d§;
         if(§2"O§.§;#m§(_loc3_))
         {
            this.§4"0§.§-"5§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §^"P§() : void
      {
         if(this.§-$<§)
         {
            this.§-$<§.§>3§();
            §;+§ = false;
         }
      }
      
      protected function §^"`§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§%#§.NORMAL,§9#5§.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function §3#k§(param1:Event) : void
      {
         this.§^<§[§^T§] = true;
         this.§^<§[§4!I§] = true;
         this.§0#g§();
      }
      
      protected function §@"C§(param1:Event) : void
      {
         this.§^<§[§^T§] = true;
         this.§^<§[§4!I§] = true;
         this.§0#g§();
      }
      
      private function §0#g§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§@#G§ = null;
         for each(_loc1_ in this.§^<§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§5"_§.CLOSE,this.§##n§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§^<§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§+"f§();
         if(_loc3_)
         {
            §'"a§.§`!R§.§0$0§();
            if(!§@#c§.§?q§.active)
            {
               this.§^"`§();
            }
         }
      }
      
      private function §##n§(param1:§5"_§) : void
      {
         this.§0#g§();
      }
      
      protected function §!"L§(param1:§,!>§) : void
      {
         var _loc2_:§@#G§ = null;
         if(DailyRewardPopup.§5#h§)
         {
            _loc2_ = new DailyRewardPopup(§%#§.NORMAL,§9#5§.TOP,TournamentResultsPopup.§'!Q§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function §&"t§(param1:Event) : void
      {
         var _loc2_:Object = §@"%§(AngryBirdsBase.singleton.dataModel).§"<§.§7#Y§(§&"Y§.§+!^§);
         if(_loc2_)
         {
            §0!o§(_loc2_[0]);
         }
         else
         {
            §0!o§(true);
         }
         this.§,!@§.§&#H§();
         var _loc3_:Object = §@"%§(AngryBirdsBase.singleton.dataModel).§"<§.§7#Y§(§&"Y§.§ else§);
         if(_loc3_)
         {
            if(§@#c§.§?q§.active && _loc3_[0] == §<"c§.§&l§)
            {
               this.§,!@§.§#W§(§<"c§.§1# §);
            }
            else
            {
               this.§,!@§.§#W§(§<"c§.§!"d§);
            }
         }
         this.§%"L§(null);
         if(this.§+#D§)
         {
            if(!§@"%§(AngryBirdsBase.singleton.dataModel).§"<§.§,"!§(this.§+#D§.§=$0§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§+#D§);
               §@"%§(AngryBirdsBase.singleton.dataModel).§"<§.§6#b§(§&"Y§.§&#G§,[this.§+#D§.§=$0§()]);
            }
            else
            {
               this.§+#D§ = null;
            }
         }
      }
      
      private function §%"L§(param1:Event) : void
      {
         §@"%§(dataModel).§"<§.removeEventListener(Event.COMPLETE,this.§%"L§);
         §@"%§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§%"L§);
         if(§@"%§(dataModel).currencyModel.§ #$§)
         {
            §@"%§(dataModel).§,H§.§"#E§();
            §@"%§(dataModel).§&$4§.loadItems();
         }
         else
         {
            §@"%§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§%"L§);
         }
      }
      
      protected function §<#P§(param1:Event) : void
      {
         this.§-#9§ = setInterval(this.§5#+§,1000);
      }
      
      private function §5#+§() : void
      {
         if(§^"C§.§?q§.§&2§())
         {
            §9$A§.§`o§();
         }
         if(§ p§() != StateTournamentResults.STATE_NAME && !§^"C§.§?q§.§^!@§ && §^"C§.§?q§.§&"C§() <= 0)
         {
            if(!§^"C§.§?q§.§&2§())
            {
               §'8§.§6#R§(§^"C§.§?q§.§4#-§.id);
            }
            §^"C§.§?q§.§=!"§();
            §^"C§.§?q§.§^!@§ = true;
            §@#c§.§?q§.§6$#§();
            §'"a§.§`!R§.§0$0§();
            §5"D§.§4"L§ = new Array();
            §;+§ = false;
            (dataModel as §@"%§).§,H§.§'$-§();
            if(!§#$D§.§?q§.§0"§)
            {
               §#$D§.§?q§.§>!'§();
            }
            if(§^"C§.§?q§.§4#-§)
            {
               §^"C§.§?q§.§4#-§.brandedTournamentAssetId = null;
            }
            §;$2§ = true;
         }
         clearInterval(this.§-#9§);
      }
      
      public function §[!`§(param1:Object) : void
      {
         if(!§`!R§)
         {
            §`!R§ = new §,#?§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as §2#Q§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as §2#Q§).userName);
         }
         §`!R§.injectData(param1);
         var _loc2_:int = §5!b§.§'!o§();
         if(_loc2_ >= 0)
         {
            §5"w§.§#"4§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:int = param1;
         if(this.§,!@§)
         {
            param1 -= 180;
            this.§,!@§.x = param1;
            this.§,!@§.height = param2;
         }
         super.resizeViews(param1,param2,param3);
         this.§+!C§(_loc4_,param2);
      }
      
      public function §+!C§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §'$C§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §0#s§(param1:§'!x§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            §+$A§.§@"i§().§,"?§(_loc5_,_loc4_);
            §@"F§.§^$#§("updateSessionToken",§]Q§.§="3§);
            §@"F§.§^$#§("flashInviteFriendsHandler",_loc3_,_loc2_,§[#!§.§1!'§(§[#!§.INVITE));
         }
         else
         {
            §5"w§.§>k§();
            popupManager.openPopup(this.§;!U§);
         }
      }
      
      protected function §9C§(param1:§'!x§) : void
      {
         if(param1.data != null)
         {
            this.§1#b§.§6o§(param1.data);
         }
      }
      
      protected function §0#`§(param1:§'!x§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§%#§.NORMAL,§9#5§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§5"_§.§4+§,this.§6v§);
      }
      
      protected function §0D§(param1:§'!x§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§%#§.NORMAL,§9#5§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§5"_§.§4+§,this.§9$%§);
      }
      
      protected function §9$%§(param1:Event) : void
      {
         this.§,!@§.§&#]§(§@"%§(dataModel).§<!w§);
      }
      
      protected function §6v§(param1:Event) : void
      {
         this.§3#H§();
      }
      
      public function §3#H§() : void
      {
         this.§,!@§.§+N§();
      }
      
      protected function §=!x§(param1:Event) : void
      {
         §3'§();
      }
      
      protected function §?#>§(param1:§'!x§) : void
      {
         §>"d§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §`"_§(param1:§'!x§) : void
      {
         if(§>"d§ is StatePlay)
         {
            StatePlay(§>"d§).showTutorials();
         }
      }
      
      protected function §^#o§(param1:§'!x§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§%#§.NORMAL,§9#5§.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §#"?§(param1:§'!x§) : void
      {
         var _loc2_:§2$#§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         if(!this.§'$%§)
         {
            this.§'$%§ = new Timer(1000);
            this.§'$%§.addEventListener(TimerEvent.TIMER,this.§+#a§);
            this.§'$%§.start();
            exitFullScreen();
            _loc2_ = param1.data as §2$#§;
            _loc3_ = _loc2_.§9N§.rank - 1;
            §5"w§.§%O§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §,-§(mLevelManager).§#6§(_loc4_);
            if(int(§^"C§.§?q§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§^"C§.§?q§.§6#T§(_loc4_));
            }
            §@"F§.§^$#§("updateSessionToken",§]Q§.§="3§);
            §@"F§.§^$#§("flashBrag",_loc2_.§9N§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§[#!§.§1!'§(§[#!§.BRAG));
         }
      }
      
      private function §+#a§(param1:TimerEvent) : void
      {
         if(this.§'$%§)
         {
            this.§'$%§.stop();
            this.§'$%§.removeEventListener(TimerEvent.TIMER,this.§+#a§);
            this.§'$%§ = null;
         }
      }
      
      protected function §%b§(param1:§'!x§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §5"w§.§9#U§(_loc2_);
         }
         if(§]!v§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §%D§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §3!C§(param1:§'!x§) : void
      {
         var musicManager:§2"0§ = null;
         var mySO:SharedObject = null;
         var e:§'!x§ = param1;
         §0!o§(!§!"4§());
         if(§!"4§())
         {
            if(§ p§() == StatePlay.STATE_NAME)
            {
               if(!§%"T§.isPaused)
               {
                  §%"T§.§;`§.background.playAmbientSound();
               }
            }
            else if(this.§[$$§())
            {
               musicManager = §'"a§.§!!8§.§ !i§();
               musicManager.§##5§(§'#M§.§"#w§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§[#r§,§"h§);
            mySO.data.useSounds = §+#!§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §]!P§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§]!v§.userProgress as §2#Q§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§;"T§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§^"C§.§?q§ && §^"C§.§?q§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §^"C§.§?q§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §^"C§.§?q§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§]!v§.userProgress as §2#Q§).§4,§(param1,_loc4_.rankAfterUpdate);
         }
         if(§@#c§.§?q§.active)
         {
            if(_loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank)
            {
               (§]!v§.userProgress as §2#Q§).§'",§(param1,_loc4_.leagueRankAfterUpdate);
               return true;
            }
            return false;
         }
         return false;
      }
      
      public function § "m§(param1:String) : void
      {
         var _loc2_:int = §]!v§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §]!v§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §]!v§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§;"T§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§]!v§.userProgress as §2#Q§).§8!S§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §;"T§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§1#b§.§38§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §1#b§() : §<"c§
      {
         return this.§,!@§;
      }
      
      public function get § !g§() : §&"U§
      {
         return this.§45§;
      }
      
      public function §[$8§() : void
      {
         if(this.§45§)
         {
            this.§45§.§7!X§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + § set§ + " " + §%#F§;
      }
      
      public function §<"r§() : String
      {
         return §5"w§.§&!B§;
      }
      
      public function §5!R§() : String
      {
         return §4$7§.§%#i§;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §5"w§.§-!I§(§4$7§.§%#i§,_loc1_.toString(),_loc1_);
         §5"w§.trackPageView(this,§4$7§.§%#i§);
         this.§,#+§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§@!O§)
         {
            this.§@!O§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§@!O§ += String.fromCharCode(param1.keyCode);
         }
         this.§@!O§ = this.§@!O§.toLowerCase();
         if(this.§@!O§.length > 15)
         {
            this.§@!O§ = this.§@!O§.substr(1);
         }
      }
      
      public function get §+!N§() : §-!t§
      {
         return this.§3!w§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §-$<§() : §#!-§
      {
         return §#!-§(§`!2§);
      }
      
      protected function get §4"3§() : §&$!§
      {
         return §&$!§(§6#J§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return §'#M§.§"#w§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§2"0§ = null;
         if(§[H§)
         {
            if(this.§[$$§())
            {
               _loc1_ = §'"a§.§!!8§.§ !i§();
               _loc1_.§23§(§'#M§.§"#w§);
            }
            this.§?$@§ = false;
         }
         else
         {
            this.§?$@§ = true;
         }
      }
      
      private function §2!x§() : Boolean
      {
         var _loc1_:§'#X§ = §[#%§.§<"!§("Channel_Theme");
         return _loc1_.§3%§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§1"T§ = null;
         var _loc1_:§'#X§ = §[#%§.§<"!§("Channel_Theme");
         if(_loc1_.§3%§ > 0)
         {
            _loc2_ = _loc1_.§'#[§(0);
            this.§ !i§().§9!I§(_loc2_.§?!b§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get §%"S§() : §6"#§
      {
         return this.§&s§;
      }
      
      public function get §6#X§() : §@"%§
      {
         return §@"%§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§@"§(param1);
         }
         return _loc2_;
      }
      
      public function §@"§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < §="9§.length)
         {
            if(§="9§[_loc2_][0] == param1)
            {
               this.§4"1§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §^"J§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = §="9§[this.§4"1§][0];
         _loc1_.screenName = §="9§[this.§4"1§][1];
         return _loc1_;
      }
      
      private function §1!R§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§ "4§.length)
            {
               if(this.§ "4§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§ "4§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§ "4§.length == 0)
         {
            §#$D§.§?q§.§>!'§();
         }
      }
      
      private function §5!p§(param1:ErrorEvent) : void
      {
         §=#f§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function §@e§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§%#§.NORMAL,§9#5§.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§+"m§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§=#U§.§2#N§,this.§"J§);
         if(this.§,#+§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§+#D§ = _loc3_;
         }
      }
      
      private function §"J§(param1:§=#U§) : void
      {
         §5"w§.§-"A§();
         AngryBirdsBase.singleton.exitFullScreen();
         §@"F§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §@"F§.§^$#§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         §+$A§.§@"i§().§##<§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§+#D§)
         {
            this.§+#D§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         §@"F§.§=F§("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §<"c§.§1%§ = param1 == "true";
         if(§<"c§.§1%§)
         {
            this.§##h§(§<"c§.§!"d§);
            §1#"§.§8"p§();
         }
      }
      
      public function §1&§() : void
      {
         this.§5#>§ = new Timer(this.§6#X§.§="4§.expiresIn * 1000,1);
         this.§5#>§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§?"c§);
         this.§5#>§.start();
      }
      
      private function §?"c§(param1:TimerEvent) : void
      {
         this.§5#>§.stop();
         this.§5#>§ = null;
         this.§6#X§.§="4§.§66§();
      }
      
      public function §,![§() : §%"N§
      {
         if(this.§!#P§ == null)
         {
            this.§!#P§ = new §?"$§(mLevelManager);
         }
         return this.§!#P§;
      }
      
      override public function onEnterFrame(param1:Event) : void
      {
         super.onEnterFrame(param1);
         §<$?§.§?q§.§["_§();
         §1"9§.§?q§.§=#L§();
         if(this.§?$@§)
         {
            this.playThemeMusic();
         }
      }
      
      private function §[$$§() : Boolean
      {
         switch(§ p§())
         {
            case §1#Z§.STATE_NAME:
            case §8$8§.STATE_NAME:
            case §1U§.STATE_NAME:
            case §6"H§.STATE_NAME:
            case §!!V§.STATE_NAME:
            case §&P§.STATE_NAME:
            case §'8§.STATE_NAME:
            case §9$A§.STATE_NAME:
            case § $>§.STATE_NAME:
            case StateTournamentResults.STATE_NAME:
               return true;
            default:
               return false;
         }
      }
   }
}
