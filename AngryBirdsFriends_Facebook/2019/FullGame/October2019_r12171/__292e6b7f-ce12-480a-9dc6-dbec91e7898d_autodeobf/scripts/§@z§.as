package
{
   import § ">§.§#"O§;
   import § $0§.§,#@§;
   import § $0§.§5"y§;
   import § $0§.§5R§;
   import §!!L§.§ !8§;
   import §!!L§.§'"H§;
   import §!!L§.§6$1§;
   import §!!L§.§7!B§;
   import §!!L§.§8"^§;
   import §!!L§.§=$3§;
   import §!!L§.§@<§;
   import §!!L§.StateLastWeeksTournamentResults;
   import §!!L§.StateTournamentResults;
   import §!!L§.§]!p§;
   import §!L§.§`#u§;
   import §"#X§.§8#g§;
   import §"N§.§^!r§;
   import §#"4§.§ V§;
   import §#"4§.§"!o§;
   import §#"4§.§%#F§;
   import §#"4§.§0#I§;
   import §#"4§.§2"M§;
   import §#"4§.§3";§;
   import §#"4§.§7"e§;
   import §#"4§.§<"G§;
   import §#"4§.§@$7§;
   import §##y§.§<Y§;
   import §#$?§.§7!b§;
   import §#g§.§!P§;
   import §#g§.§8§;
   import §&!a§.DailyRewardPopup;
   import §&=§.§<#V§;
   import §&?§.§!M§;
   import §&?§.§4#M§;
   import §&?§.§]#N§;
   import §&Y§.§+e§;
   import §&Y§.§,+§;
   import §&Y§.§6#E§;
   import §&Y§.§@"E§;
   import §'"b§.§ #F§;
   import §'n§.§+"g§;
   import §+W§.§ get§;
   import §,!_§.§8=§;
   import §,!_§.§=!g§;
   import §,"5§.§[5§;
   import §,#,§.§#t§;
   import §,#,§.§%"#§;
   import §,#,§.§4!g§;
   import §,#,§.§7Y§;
   import §,#,§.§8U§;
   import §,#,§.§=#o§;
   import §,#,§.§>#g§;
   import §,#,§.§@§;
   import §,#,§.§]§;
   import §1#`§.§&#m§;
   import §2!Y§.§4!h§;
   import §2!Y§.§="z§;
   import §2G§.§&"P§;
   import §2G§.§2@§;
   import §2G§.§?!s§;
   import §3"V§.§ b§;
   import §3"V§.§%d§;
   import §3"V§.§3,§;
   import §3"V§.§9$8§;
   import §3"V§.§;"-§;
   import §3"V§.§^!7§;
   import §3"V§.§`"g§;
   import §4"Y§.§&$E§;
   import §4"Y§.§-!`§;
   import §4S§.§+!p§;
   import §4S§.§-$C§;
   import §4S§.§1!Y§;
   import §4S§.§?#l§;
   import §5!g§.§2[§;
   import §5!g§.§;#G§;
   import §5!g§.§>"^§;
   import §6"p§.§1$"§;
   import §6"p§.§^"t§;
   import §7"X§.§2"R§;
   import §7#$§.§8$%§;
   import §7#$§.§]#q§;
   import §8#K§.§'#_§;
   import §8#K§.§2§;
   import §8#K§.§?#j§;
   import §9!o§.§;$,§;
   import §9$1§.§'R§;
   import §9T§.§4!f§;
   import §;!L§.§#$'§;
   import §;!L§.§?"Y§;
   import §;#>§.§7!^§;
   import §;#N§.TournamentResultsPopup;
   import §=#`§.GiftInboxPopup;
   import §>!!§.§#D§;
   import §>!!§.§,!l§;
   import §>!!§.§<#^§;
   import §>!I§.§-!>§;
   import §>!f§.§>#-§;
   import §>#q§.§^!"§;
   import §?#z§.§]$?§;
   import §?Q§.§!!A§;
   import §?Q§.§+#x§;
   import §?Q§.§8W§;
   import §?Q§.§@#D§;
   import §?Q§.AvatarCreatorPopup;
   import §?Q§.ErrorPopup;
   import §?Q§.InviteFriendsPopup;
   import §?Q§.QuestionPopup;
   import §?Q§.QuickPurchaseSlingshotPopup;
   import §[c§.§ #a§;
   import §[c§.§]"a§;
   import §]"U§.§>#T§;
   import §]"U§.CoinShopPopup;
   import §]"U§.§[!7§;
   import §]#'§.§4"s§;
   import §]§.§ "F§;
   import §]§.§ "i§;
   import §]§.§!!m§;
   import §]§.§!=§;
   import §]§.§#!$§;
   import §]§.§#$4§;
   import §]§.§%[§;
   import §]§.§%q§;
   import §]§.§&!e§;
   import §]§.§,x§;
   import §]§.§3"E§;
   import §]§.§4#§;
   import §]§.§?!E§;
   import §]§.StateCutScene;
   import §]§.StatePlay;
   import §]§.§[#t§;
   import §]§.§^u§;
   import §]§.§`!^§;
   import §^!t§.§,! §;
   import §^"G§.§2+§;
   import §`,§.§'#t§;
   import §`,§.§7!$§;
   import §`D§.TabbedShopPopup;
   import §`O§.§[f§;
   import com.rovio.assets.LoadingScreen;
   import com.rovio.assets.§[a§;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.external.ExternalInterface;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class §@z§ extends AngryBirdsBase implements §2"M§, IAngryBirdsFacebook
   {
      
      public static const §=#0§:String = "r12171";
      
      public static const §]!k§:String = "v4.0";
      
      private static var §#!,§:String = "AngryBirdsFriends";
      
      private static const §,$B§:String = "angrybirdsfriendsdev_d8f18df";
      
      public static const §'"%§:String = "http://bit.ly/playfriends";
      
      public static const §-z§:String = "https://cloud.rovio.com/privacyweb/index.html";
      
      public static const §+#t§:String = "external_assets/";
      
      public static const §"D§:String = §+#t§ + "tournaments/";
      
      public static const §#9§:String = §+#t§ + "sale_campaigns/";
      
      public static const §[!Z§:String = "packages/";
      
      public static const §^D§:String = "tournamentJSONLevels-";
      
      public static const §`"9§:String = "tournamentJSONLevels/";
      
      private static const §8!D§:String = "AngryBirdsFacebookSettings";
      
      public static const §7!P§:String = "/";
      
      public static const §,"Y§:String = "brand.lua";
      
      protected static var §;h§:Class = § D§;
      
      protected static var §+#E§:Class = §>b§;
      
      protected static var §2'§:Class = §<#v§;
      
      protected static var §!!$§:Class = §"Z§;
      
      protected static var §9!H§:Class = §'!!§;
      
      protected static var §5"S§:Class = §&#e§;
      
      public static var §<"I§:§="z§;
      
      public static var § !D§:IAngryBirdsFacebook;
      
      private static var §4B§:Boolean = false;
      
      public static var §`"v§:String = null;
      
      public static var § P§:Boolean;
      
      private static const §=#,§:int = 0;
      
      private static const §["K§:int = 1;
      
      public static const §?!C§:Array = [[§3"E§.STATE_NAME,"MAIN_MENU"],[§`!^§.STATE_NAME,"STORY_MODE_EPISOLE_SELECTION"],[§ !8§.STATE_NAME,"LEVEL_SELECTION"],[§8"^§.STATE_NAME,"OVERLAPPING_TOURNAMENT_MENU"],[§,x§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§#!$§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§4#§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§'"H§.STATE_NAME,"INGAME"],[StatePlay.STATE_NAME,"INGAME"],[§2+§.§0"l§,"INGAME"],[§2+§.§!5§,"PAUSE_PAGE"]];
      
      private static var § "8§:Boolean = false;
      
      private static var §<n§:Boolean = false;
      
      public static var §0"`§:Object;
      
      private static var §+"`§:XML;
       
      
      protected var §?#-§:§2+§;
      
      private var §8!3§:InviteFriendsPopup;
      
      public var §+z§:§#$'§;
      
      private var §"#B§:§?"Y§;
      
      private var §>$&§:String = "";
      
      private var §7$4§:§ V§;
      
      private var §'J§:§;"-§;
      
      private var §5y§:Sprite;
      
      private var §,f§:Boolean = false;
      
      protected var §switch§:§0#I§;
      
      private var §@#@§:String;
      
      private var §]"x§:String;
      
      private var §,!O§:String;
      
      private var §6#§:String;
      
      private var §2=§:§,!l§;
      
      private var §1#b§:uint = 0;
      
      private var §?!&§:Array;
      
      private var §""E§:Timer;
      
      private var §%#3§:QuestionPopup;
      
      private var §2#"§:int = 0;
      
      private var §>P§:Boolean;
      
      private var §=!@§:Vector.<§-$C§>;
      
      private var §%$8§:Timer;
      
      private var §2$-§:§8U§;
      
      public function §@z§(param1:§<Y§)
      {
         §7#K§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§`! §();
         §]$?§.DEBUG_MODE_ENABLED = false;
         §;$,§.§+$!§ = true;
         this.§6!g§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§=#0§,param1.stage.loaderInfo.parameters.userId || this.§@#@§);
         this.§6=§();
         param1.stage.addChild(this.§5y§ = new Sprite());
         super(param1,§7#K§,SERVER_ROOT);
         this.§switch§.§ !0§(mLevelManager);
         this.§switch§.§7"D§();
         §7!b§.addCallback("trialPayClosed",this.§=%§);
         §7!b§.addCallback("handleExpiredMobilePricePoints",this.§+"q§);
         §7!b§.addCallback("handleUserCancelledOrder",§^"_§);
         §7!b§.addCallback("orderReceived",§,!h§);
         this.§?!&§ = new Array();
         this.§?!&§[§=#,§] = false;
         this.§?!&§[§["K§] = false;
         § P§ = true;
      }
      
      public static function get §0"W§() : String
      {
         return §#!,§;
      }
      
      public static function §0"=§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as §`#u§).userID)
         {
            return §8!D§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as §`#u§).userID;
         }
         return null;
      }
      
      public static function get §^#6§() : §8$%§
      {
         return (singleton as §@z§).§8!G§;
      }
      
      private static function §^"_§() : void
      {
         CoinShopPopup.§`!D§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§-!n§();
         }
         var _loc2_:QuickPurchaseSlingshotPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchaseSlingshotPopup.ID) as QuickPurchaseSlingshotPopup;
         if(_loc2_)
         {
            _loc2_.§-!n§();
         }
      }
      
      private static function §,!h§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§+!n§();
         }
      }
      
      public static function §@$C§() : void
      {
         §4B§ = true;
         § !D§.§6#v§();
      }
      
      public static function §--§() : Boolean
      {
         if(§4B§)
         {
            return true;
         }
         return false;
      }
      
      private function get §8!G§() : §8$%§
      {
         return mLevelManager as §8$%§;
      }
      
      protected function §6!g§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§switch§ = new §0#I§(param1,param2,param3,param4);
      }
      
      private function §`! §() : void
      {
      }
      
      protected function §6=§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §5"S§(),_loc2_);
      }
      
      private function §=%§(param1:int, param2:int, param3:String = "") : void
      {
         §<"G§.§3#i§("TrialPay",param2);
         §<"G§.trackPageView(this,§<"G§.§4"<§);
         §<"G§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         §]#0§.§+!,§.§@!z§();
         var _loc4_:§<#V§;
         (_loc4_ = new §<#V§()).currency = "IVC";
         _loc4_.§#!D§ = §>#g§.§=-§;
         _loc4_.screen = §<"G§.§4"<§;
         _loc4_.amount = param2;
         _loc4_.§]#=§ = §3";§.§3#"§;
         _loc4_.itemType = §>#g§.§=-§;
         §3";§.§#"'§().§7"Q§(false,_loc4_.itemType,_loc4_.amount,_loc4_.§]#=§,_loc4_.screen,_loc4_.level,_loc4_.itemType,_loc4_.§#!D§,_loc4_.§&$3§,_loc4_.currency,_loc4_.§>$%§);
      }
      
      private function §+"q§() : void
      {
         §=#o§(dataModel).§]t§.§?d§();
      }
      
      protected function §<$8§() : void
      {
         var _loc3_:Stage3D = null;
         §"!o§.enabled = true;
         §<"G§.§,E§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §<"G§.§!#'§("no-stage3d");
         }
         § !D§ = this;
         §<"G§.§[#]§(§"!o§.§"t§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§5#H§();
         § b§.addEventListener(§`"g§.§+#B§,this.§0#z§);
         § b§.addEventListener(§%d§.§<#e§,this.§-!c§);
         § b§.addEventListener(§%d§.§+!§,this.§-"s§);
      }
      
      protected function §5#H§() : void
      {
         this.§7$4§ = new § V§("");
         this.§7$4§.start();
      }
      
      private function get accessToken() : String
      {
         return §#>§("accessToken") || this.§]"x§;
      }
      
      private function §0#z§(param1:§`"g§) : void
      {
         §<"G§.§["R§(param1.§9$,§,param1.errorID);
      }
      
      private function §-!c§(param1:§%d§) : void
      {
         §<"G§.§8!L§(param1.§9$,§);
      }
      
      private function §-"s§(param1:§%d§) : void
      {
         §<"G§.§5!0§(param1.§9$,§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §4"y§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §4!g§.§+!,§.§?" §(_loc2_);
         }
      }
      
      private function §]"-§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§,f§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§=k§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§@#D§.NORMAL,§5R§.DEFAULT,false);
               _loc2_.addEventListener(§[f§.§+$%§,this.§%!2§,false,0,true);
               _loc2_.§"T§();
            }
         }
      }
      
      protected function §%!2§(param1:§[f§) : void
      {
         var _loc2_:§,#@§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§@#D§.NORMAL,§5R§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §1$"§.§%Z§(§;h§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §1$"§.§%Z§(§+#E§);
         this.§-@§(_loc2_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §1$"§.§%Z§(§2'§);
         this.§-@§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §1$"§.§%Z§(§9!H§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers","Powerup_Velocity_Multipliers","Material_Damage_Factor_Limits"];
         this.§-@§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§3$"§();
      }
      
      protected function §3$"§() : void
      {
         this.§!"!§.§ !>§(§%#F§.§@"b§(this.§=#T§.§5"=§(§,"Y§,"chaptertournament")),§%#F§.§@"b§(this.§=#T§.§5"=§("frommobile.lua","chaptertournament")),§%#F§.§@"b§(this.§=#T§.§5"=§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§=#T§.§;!F§)
         {
            this.§!"!§.§0[§(this.§=#T§.§0t§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §1$"§.§%Z§(§!!$§);
         this.§-@§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §>#v§() : void
      {
         if(stage.loaderInfo.url.indexOf("angrybirds-facebook-dev") > -1 || stage.loaderInfo.url.indexOf("angrybirds-friends-new-feature") > -1)
         {
            §#!,§ = §,$B§;
         }
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §<"G§.§!l§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §<"G§.§!l§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §<"G§.§!l§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§[#w§,"Did not receive a facebook user ID.\nError code: " + §@$7§.§^![§));
         }
         §7"e§.accessToken = this.accessToken;
         this.§+z§ = new §#$'§(stage.loaderInfo.parameters.accessToken || this.§]"x§);
         var _loc5_:String = §=!g§.§1@§;
         this.§,!O§ = "https://" + _loc5_ + ".rovio.com";
         if(stage.loaderInfo.parameters.analyticsUrl)
         {
            this.§,!O§ = stage.loaderInfo.parameters.analyticsUrl;
            if(this.§,!O§.indexOf(§=!g§.§="s§) != -1)
            {
               _loc5_ = §=!g§.§="s§;
            }
            else if(this.§,!O§.indexOf(§=!g§.§#!W§) != -1)
            {
               _loc5_ = §=!g§.§#!W§;
            }
            else
            {
               _loc5_ = §=!g§.§1@§;
            }
         }
         this.§6#§ = stage.loaderInfo.parameters.userId;
         this.§ !n§.§@#-§ = new §8=§(_loc1_,_loc2_,_loc5_);
         this.§ !n§.§@#-§.§'!5§();
         §%"#§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§ !n§.§@#-§);
      }
      
      public function §'#f§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §!X§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§<$8§();
         super.initialize();
         §`"v§ = stage.loaderInfo.parameters.levelId;
         § "W§.addEventListener(Event.INIT,this.§`#D§);
         § "W§.addEventListener(Event.COMPLETE,this.§4!c§);
         §]#0§.§+!,§.§ !0§(mLevelManager);
         this.§>#v§();
         this.§^#g§();
         §"#R§(false);
         §7!b§.addCallback("purchaseComplete",this.§<u§);
         §7!b§.addCallback("purchaseFailed",this.§4##§);
         §7!b§.addCallback("giftsSentToUsers",this.§4"y§);
         §7!b§.addCallback("onUrl",this.§]"-§);
         ExternalInterface.call("trapMouse","if (window.addEventListener) window.addEventListener(\'DOMMouseScroll\', handleWheelEvent, false); window.onmousewheel = document.onmousewheel = handleWheelEvent; function handleWheelEvent(e){e.preventDefault();}");
         this.§`#?§();
         this.§=!G§();
      }
      
      private function §+#4§() : void
      {
         this.§2=§ = new §#D§();
         (this.§2=§ as §#D§).addEventListener(Event.COMPLETE,this.§&9§);
         this.§2=§.§@"7§();
      }
      
      private function §&9§(param1:Event) : void
      {
         var _loc3_:§<#^§ = null;
         var _loc4_:§,#@§ = null;
         var _loc5_:§,#@§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§2=§.§0$,§)
         {
            if(_loc3_.§?"2§)
            {
               _loc5_ = new §,+§(§@#D§.NORMAL,§5R§.§7$$§);
               _loc4_ = new §6#E§(§@#D§.NORMAL,§5R§.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §+#x§(§@#D§.NORMAL,§5R§.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§2=§.§]>§(_loc2_);
         }
      }
      
      private function §`#?§() : void
      {
         var _loc1_:String = this.§6#§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§3";§ = §3";§.§#"'§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§,!O§ && this.§,!O§.indexOf("https://") == -1)
         {
            this.§,!O§ = "https://" + this.§,!O§;
         }
         _loc3_.analyticsUrl = this.§,!O§;
      }
      
      private function §=!G§() : void
      {
         §-!>§.§#!0§();
      }
      
      private function §<u§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            §]#0§.§+!,§.§@!z§(param2 > 0);
         }
      }
      
      private function §4##§() : void
      {
         CoinShopPopup.§`!D§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§-!n§();
         }
      }
      
      protected function §^#g§() : void
      {
         this.§'J§ = new §;"-§(new §^!7§());
      }
      
      public function §'e§() : §^!7§
      {
         return this.§'J§.§8$9§;
      }
      
      protected function §@#I§() : void
      {
         this.§?#-§ = new §2+§(§<"I§,SERVER_ROOT,(§#!h§.userProgress as §`#u§).userID,this.§8!G§);
         this.§5y§.addChild(this.§?#-§);
         this.§?#-§.height = stage.stageHeight;
         this.§?#-§.x = stage.stageWidth - 180;
         this.§?#-§.addEventListener(§2"R§.§##<§,this.§"!V§);
         this.§?#-§.addEventListener(§2"R§.§&!1§,this.§3!e§);
         this.§?#-§.addEventListener(§2"R§.§=!]§,this.§4"!§);
         this.§?#-§.addEventListener(§2"R§.§+§,this.§6"C§);
         this.§?#-§.addEventListener(§2"R§.§6"R§,this.§<#x§);
         this.§?#-§.addEventListener(§2"R§.§>$ §,this.§8!Y§);
         this.§?#-§.addEventListener(§2"R§.§ !<§,this.§7!T§);
         this.§?#-§.addEventListener(§2"R§.§0#Q§,this.§0#?§);
         this.§?#-§.addEventListener(§2"R§.BRAG,this.§ "l§);
         this.§?#-§.addEventListener(§2"R§.PLAY_LEVEL,this.§%$0§);
         this.§?#-§.addEventListener(§2"R§.§?#R§,this.§2Y§);
         this.§8!3§ = new InviteFriendsPopup(§@#D§.NORMAL,§5R§.DEFAULT);
         this.§8!3§.addEventListener(§2"R§.§##<§,this.§"!V§);
         this.§8!3§.addEventListener(§2"R§.§&!S§,this.§+#D§);
         this.§""E§ = null;
      }
      
      protected function §2Y§(param1:Event) : void
      {
         var _loc2_:§,#@§ = new §+e§(§@#D§.NORMAL,§5R§.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §`#D§(param1:Event) : void
      {
         §?!s§.§+!f§(false);
      }
      
      protected function §4!c§(param1:Event) : void
      {
         §?!s§.§+!f§(true);
      }
      
      public function §`#6§(param1:int, param2:Array = null) : void
      {
         this.§?#-§.§0"F§(param1,param2);
      }
      
      public function §-"o§(param1:String) : void
      {
         this.§?#-§.§catch§(param1);
      }
      
      public function §%"r§(param1:String) : void
      {
         this.§?#-§.§,"2§(param1);
         this.§?#-§.§catch§(param1);
      }
      
      override protected function initializeLevelMain() : §8#3§
      {
         return new §!P§(stage,§7"Z§,§%!,§,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §2#3§
      {
         return new §?#j§();
      }
      
      override protected function initializeLevelThemeManager() : §-!`§
      {
         return new §&$E§();
      }
      
      override protected function initializeDataModel() : void
      {
         §#!h§ = new §=#o§();
      }
      
      override protected function initializeLevelManager() : §]#q§
      {
         return new §8$%§();
      }
      
      override protected function initializePackageManager() : §7Y§
      {
         return new §#t§(mLevelManager,§'#_§(§7"Z§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §#!h§.userProgress = new §`#u§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §!#G§(new §%[§(mLevelManager,§'#_§(§7"Z§),§,%§,false));
         §!#G§(new §!!m§(mLevelManager,§,%§,false));
         §!#G§(new §3"E§(mLevelManager,§,%§,false));
         §!#G§(new §`!^§(mLevelManager,§,%§,false));
         §!#G§(new §!=§(mLevelManager,§,%§,false));
         §!#G§(new § "F§(mLevelManager,§,%§,false));
         §!#G§(new §%q§(mLevelManager,§,%§,false));
         §!#G§(new §^u§(mLevelManager,§,%§,false));
         §!#G§(new §&!e§(mLevelManager,§,%§,false));
         §!#G§(new §?!E§(mLevelManager,§,%§,false));
         §!#G§(new § "i§(mLevelManager,§,%§,false));
         §!#G§(new §4#§(mLevelManager,§,%§,false));
         §!#G§(new §,x§(mLevelManager,§,%§,false));
         §!#G§(new §@<§(mLevelManager,§,%§,false));
         §!#G§(new §]!p§(mLevelManager,§,%§,false));
         §!#G§(new §6$1§(mLevelManager,§,%§,false));
         §!#G§(new §=$3§(mLevelManager,§'#_§(§7"Z§),§,%§,false));
         §!#G§(new §'"H§(mLevelManager,§,%§,false));
         §!#G§(new § !8§(mLevelManager,§,%§,false));
         §!#G§(new §8"^§(mLevelManager,§,%§));
         §!#G§(new StateLastWeeksTournamentResults(mLevelManager,§,%§,false));
         §!#G§(new §7!B§(mLevelManager,§,%§,false));
         §!#G§(new StateTournamentResults(mLevelManager,false,§,%§));
      }
      
      override protected function createStateObject(param1:Class) : § #a§
      {
         if(param1 == §=$3§)
         {
            return new param1(mLevelManager,§'#_§(§7"Z§),§,%§);
         }
         return new param1(mLevelManager,§,%§);
      }
      
      public function §!s§() : void
      {
         mLevelManager.selectEpisode(6);
         §3#§(§,x§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §]!A§ = new MovieClip();
         §]#s§.stage.addChild(§]!A§);
         §6"F§ = new §8W§(§]!A§,§,%§,this);
         §6"F§.addEventListener(§7!^§.OPEN,§8!§);
         §6"F§.addEventListener(§7!^§.CLOSE,§-!t§);
         §[#K§ = new §;#G§(§6"F§,§#!h§,§5"y§.§3m§,new §>"^§(),new §2[§());
         §6"F§.addLayer(§@#D§.NORMAL,true,new Rectangle(0,0,0,0));
         §6"F§.addLayer(§@#D§.INFO,true,new Rectangle(0,0,0,0));
         §6"F§.addLayer(§@#D§.§,"4§,true,new Rectangle(0,0,0,0));
         §6"F§.addLayer(§@#D§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §]"a§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §<"G§.§!l§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         §4#M§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,"");
         return new §#$4§(§,%§,true,§]"a§.STATE_NAME,getMinLoadingScreenTime(),"","");
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc4_:String = null;
         §]I§ = true;
         var _loc2_:String = §3"E§.STATE_NAME;
         if(§`"v§)
         {
            if(§`"v§.indexOf("2000-") > -1)
            {
               _loc2_ = § !8§.STATE_NAME;
            }
            else if(§>#-§.§5$<§(§>#-§.§4$0§) == §>#-§.§9"§)
            {
               _loc2_ = §3"E§.STATE_NAME;
               §`"v§ = null;
            }
            else
            {
               §7!$§.§+!,§.§08§();
               if((_loc4_ = mLevelManager.getValidLevelId(§`"v§)) != §`"v§)
               {
                  §<"G§.§&k§(§`"v§);
               }
               §`"v§ = null;
               if(§#!h§.userProgress.isLevelOpen(_loc4_))
               {
                  this.§`#6§(§2+§.§1#O§);
                  this.§"#g§(_loc4_);
                  _loc2_ = null;
               }
               else
               {
                  _loc2_ = §`!^§.STATE_NAME;
               }
            }
         }
         var _loc3_:String = §#>§("fb_source");
         if(_loc3_ && _loc3_ != "null")
         {
            §3";§.§#"'§().§+#n§(_loc3_,"");
         }
         if(_loc2_)
         {
            §3#§(_loc2_);
         }
      }
      
      public function §"#g§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §3#§(§@<§.STATE_NAME);
         }
         else
         {
            §3#§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§,f§ = true;
         this.§6#v§();
      }
      
      protected function § "j§() : void
      {
         super.setFirstGameState();
      }
      
      public function §6#v§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§,#@§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§-$C§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§,f§ || !§4B§)
         {
            return;
         }
         this.§ "j§();
         §7!$§.§+!,§.§ !0§(mLevelManager);
         §7!$§.§+!,§.addEventListener(§&#m§.§@$+§,this.§""b§);
         §4"s§.§+!,§.addEventListener(§+"g§.§1!5§,this.§1p§);
         §2@§.§3"A§ = new §&"P§();
         §2@§.§3"A§.§>$A§();
         this.§@#I§();
         §#"O§.§+!,§.init(popupManager);
         if(!§4"s§.§+!,§.active)
         {
            if(TournamentResultsPopup.§,"i§)
            {
               _loc2_ = new TournamentResultsPopup(§@#D§.NORMAL,§5R§.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§7!$§.§+!,§.tournamentRules && §7!$§.§+!,§.tournamentRules.§6$§)
         {
            _loc3_ = §7!$§.§+!,§.tournamentRules.§6$§;
            _loc2_ = new _loc3_(§@#D§);
            popupManager.openPopup(_loc2_);
         }
         §7!$§.§+!,§.addEventListener(§&#m§.§7#o§,this.§=$>§);
         §7!$§.§+!,§.addEventListener(§&#m§.§]"]§,this.§ @§);
         §7!$§.§+!,§.addEventListener(§&#m§.§%5§,this.§+#H§);
         if(GiftInboxPopup.§+"F§)
         {
            _loc2_ = new GiftInboxPopup(§@#D§.NORMAL,§5R§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§]#0§.§+!,§.§'!u§.§-#>§(§>#T§.§8"[§))
         {
            popupManager.openPopup(new §[!7§(§@#D§.NORMAL,§5R§.DEFAULT));
         }
         this.§"#B§ = new §?"Y§();
         this.§"#B§.§;"X§();
         this.§=!@§ = new Vector.<§-$C§>();
         for each(_loc1_ in §]#0§.§+!,§.§'!u§.claimableBundles)
         {
            if(§]#0§.§+!,§.§'!u§.§-#>§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §4!f§.§>!Z§.definition.toUpperCase():
                     popupManager.openPopup(new §!!A§(§@#D§.NORMAL,§5R§.DEFAULT,§4!f§.§>!Z§));
               }
               for each(_loc4_ in §@"E§.§]e§)
               {
                  if(_loc4_[§@"E§.§&"`§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §@"E§(_loc4_[§@"E§.§&"`§],§@"E§.§!!?§));
                     (_loc5_ = new §-$C§()).addEventListener(Event.COMPLETE,this.§<9§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§`!5§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§`!5§);
                     _loc5_.addEventListener(§+!p§.§2$9§,this.§`!5§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§=!@§.push(_loc5_);
                     (_loc6_ = §?#l§.§2#=§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§@"E§.§&"`§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §=#o§(dataModel).§]t§.§?d§();
         §=#o§(dataModel).§[h§.slingshots;
         this.§+#4§();
         if(§=#o§(dataModel).§8$+§.§9$$§)
         {
            §=#o§(dataModel).§8$+§.addEventListener(Event.COMPLETE,this.§ C§);
         }
         else
         {
            this.§ C§(null);
         }
      }
      
      private function § @§(param1:§&#m§) : void
      {
         var blueprintItems:Array = null;
         var blueprintPackageLoader:§!M§ = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§&#m§ = param1;
         if(event.data.bluePrintPackLoader)
         {
            blueprintItems = this.§!"!§.§-!P§();
            blueprintPackageLoader = §!M§(event.data.bluePrintPackLoader);
            if(blueprintPackageLoader.§-#<§)
            {
               §]$?§.§;#b§(blueprintPackageLoader.§-#<§,blueprintItems);
            }
            return;
         }
         var packageLoader:§!M§ = §!M§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §7!$§.§+!,§.brandedTournamentAssetId;
         var backgroundFileName:String = "background.xml";
         var backgroundLoadedFromXML:Boolean = false;
         if(packageLoader.§3"f§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§5"=§(backgroundFileName,packName));
            §%!,§.loadBackgroundXML(backgroundData);
            backgroundLoadedFromXML = true;
         }
         if(packageLoader.§3"f§(§,"Y§,packName))
         {
            try
            {
               luaObject = §%#F§.§@"b§(packageLoader.§5"=§(§,"Y§,packName));
               this.§@!g§(luaObject);
               items = this.§!"!§.§+[§(luaObject);
               if(luaObject.linkButton)
               {
                  §-!>§.§3$&§(§7!$§.§+!,§.brandedTournamentAssetId,luaObject.linkButton);
               }
               if(!backgroundLoadedFromXML && luaObject.dynamicBlocks)
               {
                  (§%!,§ as §&$E§).§+!e§(luaObject.dynamicBlocks.themes,§7!$§.§+!,§.brandedTournamentAssetId);
               }
               §7!$§.§+!,§.§<&§ = luaObject.special;
               this.§!"!§.§-"3§(luaObject.audio);
               fn = function(param1:Event):void
               {
                  cb();
               };
               if(packageLoader.§-#<§)
               {
                  §]$?§.§;#b§(packageLoader.§-#<§,items,fn);
               }
            }
            catch(e:Error)
            {
               AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§[#w§,"Tournament brand error: " + e.name + "\n" + e.errorID + "\n" + e.message));
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §@!g§(param1:Object) : void
      {
         §7!$§.§+!,§.§>#;§ = param1.shareButton;
      }
      
      protected function §=$>§(param1:§&#m§) : void
      {
         if(this.§!"!§ && !§ "8§)
         {
            § "8§ = true;
            §<n§ = true;
            this.§!"!§.§0#w§(§7!$§.§+!,§.brandedTournamentAssetId);
         }
         var _loc2_:§'#t§ = §7!$§.§+!,§.tournamentRules;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§"">§;
         if(§[a§.§]$'§(_loc3_))
         {
            this.§'J§.§4"@§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §&#P§() : void
      {
         if(this.§!"!§)
         {
            this.§!"!§.§0#w§();
            § "8§ = false;
         }
      }
      
      protected function §<m§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§@#D§.NORMAL,§5R§.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function §""b§(param1:Event) : void
      {
         this.§?!&§[§=#,§] = true;
         this.§?!&§[§["K§] = true;
         this.§?"F§();
      }
      
      protected function §1p§(param1:Event) : void
      {
         this.§?!&§[§=#,§] = true;
         this.§?!&§[§["K§] = true;
         this.§?"F§();
      }
      
      private function §?"F§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§,#@§ = null;
         for each(_loc1_ in this.§?!&§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§7!^§.CLOSE,this.§&#%§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§?!&§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§0"7§();
         if(_loc3_)
         {
            §@z§.§<"I§.§]"?§();
            if(!§4"s§.§+!,§.active)
            {
               this.§<m§();
            }
         }
      }
      
      private function §&#%§(param1:§7!^§) : void
      {
         this.§?"F§();
      }
      
      protected function §@"o§(param1:§[5§) : void
      {
         var _loc2_:§,#@§ = null;
         if(DailyRewardPopup.§1!I§)
         {
            _loc2_ = new DailyRewardPopup(§@#D§.NORMAL,§5R§.TOP,TournamentResultsPopup.§,"i§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function § C§(param1:Event) : void
      {
         var _loc2_:Object = §=#o§(AngryBirdsBase.singleton.dataModel).§8$+§.§<"%§(§^!"§.§2"7§);
         if(_loc2_)
         {
            §"#R§(_loc2_[0]);
         }
         else
         {
            §"#R§(true);
         }
         this.§?#-§.§?#q§();
         var _loc3_:Object = §=#o§(AngryBirdsBase.singleton.dataModel).§8$+§.§<"%§(§^!"§.§8#O§);
         if(_loc3_)
         {
            if(§4"s§.§+!,§.active && _loc3_[0] == §2+§.§3#-§)
            {
               this.§?#-§.§`##§(§2+§.§@#&§);
            }
            else
            {
               this.§?#-§.§`##§(§2+§.§#!3§);
            }
         }
         this.§@E§(null);
         if(this.§%#3§)
         {
            if(!§=#o§(AngryBirdsBase.singleton.dataModel).§8$+§.§["v§(this.§%#3§.§1";§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§%#3§);
               §=#o§(AngryBirdsBase.singleton.dataModel).§8$+§.§-#7§(§^!"§.§0#+§,[this.§%#3§.§1";§()]);
            }
            else
            {
               this.§%#3§ = null;
            }
         }
      }
      
      private function §@E§(param1:Event) : void
      {
         §=#o§(dataModel).§8$+§.removeEventListener(Event.COMPLETE,this.§@E§);
         §=#o§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§@E§);
         if(§=#o§(dataModel).currencyModel.§%!&§)
         {
            §=#o§(dataModel).§[h§.§#"N§();
            §=#o§(dataModel).§+!<§.loadItems();
         }
         else
         {
            §=#o§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§@E§);
         }
      }
      
      protected function §+#H§(param1:Event) : void
      {
         this.§1#b§ = setInterval(this.§1"l§,1000);
      }
      
      private function §1"l§() : void
      {
         if(§7!$§.§+!,§.§!$#§())
         {
            §8"^§.§!#C§();
         }
         if(§%#7§() != StateTournamentResults.STATE_NAME && §%#7§() != § !8§.STATE_NAME && §%#7§() != §'"H§.STATE_NAME && !§7!$§.§+!,§.§;"$§ && §7!$§.§+!,§.§&"%§() <= 0)
         {
            if(!§7!$§.§+!,§.§!$#§())
            {
               § !8§.§9F§(§7!$§.§+!,§.§@!v§.id);
            }
            §7!$§.§+!,§.§%"W§();
            §7!$§.§+!,§.§;"$§ = true;
            §4"s§.§+!,§.§;#"§();
            §@z§.§<"I§.§]"?§();
            §4!h§.§6M§ = new Array();
            § "8§ = false;
            (dataModel as §=#o§).§[h§.§@!-§();
            if(!§]#0§.§+!,§.§9$$§)
            {
               §]#0§.§+!,§.§@!z§();
            }
            if(§7!$§.§+!,§.§@!v§)
            {
               §7!$§.§+!,§.§@!v§.brandedTournamentAssetId = null;
            }
            § P§ = true;
         }
         clearInterval(this.§1#b§);
      }
      
      public function §,"v§(param1:Object) : void
      {
         if(!§<"I§)
         {
            §<"I§ = new §="z§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as §`#u§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as §`#u§).userName);
         }
         §<"I§.injectData(param1);
         var _loc2_:int = §8#g§.§]$!§();
         if(_loc2_ >= 0)
         {
            §<"G§.§=m§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:int = param1;
         if(this.§?#-§)
         {
            param1 -= 180;
            this.§?#-§.x = param1;
            this.§?#-§.height = param2;
         }
         super.resizeViews(param1,param2,param3);
         this.§ "!§(_loc4_,param2);
      }
      
      public function § "!§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §-@§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §"!V§(param1:§2"R§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            §3";§.§#"'§().§ m§(_loc5_,_loc4_);
            §7!b§.§7@§("updateSessionToken",§1!Y§.§?!j§);
            §7!b§.§7@§("flashInviteFriendsHandler",_loc3_,_loc2_,§@#5§.§=D§(§@#5§.INVITE));
         }
         else
         {
            §<"G§.§4$1§();
            popupManager.openPopup(this.§8!3§);
         }
      }
      
      protected function §+#D§(param1:§2"R§) : void
      {
         if(param1.data != null)
         {
            this.§8!;§.§=#Y§(param1.data);
         }
      }
      
      protected function §3!e§(param1:§2"R§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§@#D§.NORMAL,§5R§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§7!^§.§;""§,this.§4!O§);
      }
      
      protected function §4"!§(param1:§2"R§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§@#D§.NORMAL,§5R§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§7!^§.§;""§,this.§7,§);
      }
      
      protected function §7,§(param1:Event) : void
      {
         this.§?#-§.§6! §(§=#o§(dataModel).§64§);
      }
      
      protected function §4!O§(param1:Event) : void
      {
         this.§!"B§();
      }
      
      public function §!"B§() : void
      {
         this.§?#-§.§8!4§();
      }
      
      protected function §6"C§(param1:Event) : void
      {
         §`<§();
      }
      
      protected function §<#x§(param1:§2"R§) : void
      {
         §^#k§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §8!Y§(param1:§2"R§) : void
      {
         if(§^#k§ is StatePlay)
         {
            StatePlay(§^#k§).showTutorials();
         }
      }
      
      protected function §0#?§(param1:§2"R§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§@#D§.NORMAL,§5R§.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function § "l§(param1:§2"R§) : void
      {
         var _loc2_:§ get§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:int = 0;
         if(!this.§""E§)
         {
            this.§""E§ = new Timer(1000);
            this.§""E§.addEventListener(TimerEvent.TIMER,this.§=!L§);
            this.§""E§.start();
            exitFullScreen();
            _loc2_ = param1.data as § get§;
            _loc3_ = _loc2_.§6#"§.rank - 1;
            §<"G§.§,#-§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §8$%§(mLevelManager).§0"<§(_loc4_);
            if((_loc7_ = §7!$§.§+!,§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§7!$§.§+!,§.§>"v§(_loc4_));
            }
            §7!b§.§7@§("updateSessionToken",§1!Y§.§?!j§);
            §7!b§.§7@§("flashBrag",_loc2_.§6#"§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§@#5§.§=D§(§@#5§.BRAG));
         }
      }
      
      private function §=!L§(param1:TimerEvent) : void
      {
         if(this.§""E§)
         {
            this.§""E§.stop();
            this.§""E§.removeEventListener(TimerEvent.TIMER,this.§=!L§);
            this.§""E§ = null;
         }
      }
      
      protected function §%$0§(param1:§2"R§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §<"G§.§&k§(_loc2_);
         }
         if(§#!h§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §3#§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §7!T§(param1:§2"R§) : void
      {
         var musicManager:§^!7§ = null;
         var mySO:SharedObject = null;
         var e:§2"R§ = param1;
         §"#R§(!§;!Q§());
         if(§;!Q§())
         {
            if(§%#7§() == StatePlay.STATE_NAME)
            {
               if(!§]$?§.isPaused)
               {
                  §]$?§.§2#§.background.playAmbientSound();
               }
            }
            else if(this.§7!K§())
            {
               musicManager = §@z§.§ !D§.§'e§();
               musicManager.§-Y§(§;"-§.§,#[§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§8!D§,§7!P§);
            mySO.data.useSounds = §%"v§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §1#n§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§#!h§.userProgress as §`#u§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§8"n§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§7!$§.§+!,§ && §7!$§.§+!,§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §7!$§.§+!,§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §7!$§.§+!,§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§#!h§.userProgress as §`#u§).§0#!§(param1,_loc4_.rankAfterUpdate);
         }
         if(§4"s§.§+!,§.active)
         {
            if(_loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank)
            {
               (§#!h§.userProgress as §`#u§).§+!A§(param1,_loc4_.leagueRankAfterUpdate);
               return true;
            }
            return false;
         }
         return false;
      }
      
      public function §1s§(param1:String) : void
      {
         var _loc2_:int = §#!h§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §#!h§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §#!h§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§8"n§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§#!h§.userProgress as §`#u§).§=l§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §8"n§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§8!;§.§%S§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §8!;§() : §2+§
      {
         return this.§?#-§;
      }
      
      public function get §`L§() : § V§
      {
         return this.§7$4§;
      }
      
      public function §@#U§() : void
      {
         if(this.§7$4§)
         {
            this.§7$4§.§<!s§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + §7#K§ + " " + §=#0§;
      }
      
      public function §0!q§() : String
      {
         return §<"G§.§-#P§;
      }
      
      public function §4!G§() : String
      {
         return §"!o§.§>H§;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §<"G§.§[#]§(§"!o§.§>H§,_loc1_.toString(),_loc1_);
         §<"G§.trackPageView(this,§"!o§.§>H§);
         this.§,f§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§>$&§)
         {
            this.§>$&§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§>$&§ += String.fromCharCode(param1.keyCode);
         }
         this.§>$&§ = this.§>$&§.toLowerCase();
         if(this.§>$&§.length > 15)
         {
            this.§>$&§ = this.§>$&§.substr(1);
         }
      }
      
      public function get §0x§() : §?"Y§
      {
         return this.§"#B§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §!"!§() : §?#j§
      {
         return §?#j§(§7"Z§);
      }
      
      protected function get §=#T§() : §#t§
      {
         return §#t§(§<B§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return §;"-§.§,#[§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§^!7§ = null;
         if(§<n§ || §7!$§.§+!,§.§!$#§())
         {
            if(this.§7!K§())
            {
               _loc1_ = §@z§.§ !D§.§'e§();
               _loc1_.§%Q§(§;"-§.§,#[§);
            }
            this.§>P§ = false;
         }
         else
         {
            this.§>P§ = true;
         }
      }
      
      private function §"$>§() : Boolean
      {
         var _loc1_:§3,§ = § b§.§]!L§("Channel_Theme");
         return _loc1_.§'#@§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§9$8§ = null;
         var _loc1_:§3,§ = § b§.§]!L§("Channel_Theme");
         if(_loc1_.§'#@§ > 0)
         {
            _loc2_ = _loc1_.§-Z§(0);
            this.§'e§().§@#k§(_loc2_.§="@§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get §!$5§() : §#$'§
      {
         return this.§+z§;
      }
      
      public function get § !n§() : §=#o§
      {
         return §=#o§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§]"V§(param1);
         }
         return _loc2_;
      }
      
      public function §]"V§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < §?!C§.length)
         {
            if(§?!C§[_loc2_][0] == param1)
            {
               this.§2#"§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §<"W§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = §?!C§[this.§2#"§][0];
         _loc1_.screenName = §?!C§[this.§2#"§][1];
         return _loc1_;
      }
      
      private function §<9§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§=!@§.length)
            {
               if(this.§=!@§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§=!@§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§=!@§.length == 0)
         {
            §]#0§.§+!,§.§@!z§();
         }
      }
      
      private function §`!5§(param1:ErrorEvent) : void
      {
         §^"t§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function §!"O§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§@#D§.NORMAL,§5R§.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§,"#§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§,! §.§2$&§,this.§,>§);
         if(this.§,f§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§%#3§ = _loc3_;
         }
      }
      
      private function §,>§(param1:§,! §) : void
      {
         §<"G§.§6#=§();
         AngryBirdsBase.singleton.exitFullScreen();
         §7!b§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §7!b§.§7@§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         §3";§.§#"'§().§%!$§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§%#3§)
         {
            this.§%#3§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         §7!b§.§&#&§("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §2+§.§%8§ = param1 == "true";
         if(§2+§.§%8§)
         {
            this.§`#6§(§2+§.§#!3§);
            §%"#§.§2!j§();
         }
      }
      
      public function §9$&§() : void
      {
         this.§%$8§ = new Timer(this.§ !n§.§@#-§.expiresIn * 1000,1);
         this.§%$8§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§;@§);
         this.§%$8§.start();
      }
      
      private function §;@§(param1:TimerEvent) : void
      {
         this.§%$8§.stop();
         this.§%$8§ = null;
         this.§ !n§.§@#-§.§'!5§();
      }
      
      public function §5u§() : §]#N§
      {
         if(this.§2$-§ == null)
         {
            this.§2$-§ = new §8U§(mLevelManager);
         }
         return this.§2$-§;
      }
      
      override public function onEnterFrame(param1:Event) : void
      {
         super.onEnterFrame(param1);
         §^!r§.§+!,§.§!S§();
         § #F§.§+!,§.§<#w§();
         if(this.§>P§)
         {
            this.playThemeMusic();
         }
      }
      
      private function §7!K§() : Boolean
      {
         switch(§%#7§())
         {
            case §`!^§.STATE_NAME:
            case §#!$§.STATE_NAME:
            case §[#t§.STATE_NAME:
            case §3"E§.STATE_NAME:
            case §,x§.STATE_NAME:
            case §4#§.STATE_NAME:
            case § !8§.STATE_NAME:
            case §8"^§.STATE_NAME:
            case §'R§.STATE_NAME:
            case StateTournamentResults.STATE_NAME:
               return true;
            default:
               return false;
         }
      }
   }
}
