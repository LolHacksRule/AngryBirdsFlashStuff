package
{
   import § §.§,#l§;
   import § §.§[$3§;
   import §!#C§.§ $?§;
   import §!#C§.§&%§;
   import §!#C§.§1%§;
   import §!#C§.§4!Q§;
   import §!#C§.§4j§;
   import §!#C§.§5H§;
   import §!#C§.§6w§;
   import §!#C§.§^!z§;
   import §!#C§.§null§;
   import §!O§.§?!7§;
   import §!h§.§8#t§;
   import §"",§.§4#Q§;
   import §"c§.§3!d§;
   import §"c§.§?h§;
   import §"c§.CoinShopPopup;
   import §##N§.§'#c§;
   import §##N§.§,#a§;
   import §##Z§.§<$2§;
   import §%$!§.DailyRewardPopup;
   import §&!_§.§!!K§;
   import §&!_§.§"@§;
   import §&!_§.§+#`§;
   import §&!_§.§,!n§;
   import §&!_§.§,"N§;
   import §&!_§.§01§;
   import §&!_§.§0I§;
   import §&!_§.§8#b§;
   import §&!_§.§^">§;
   import §&m§.§'5§;
   import §'"6§.§,R§;
   import §'"6§.§=,§;
   import §'"6§.§`#D§;
   import §'M§.§"Z§;
   import §,"v§.§;"n§;
   import §,"v§.§;#A§;
   import §-;§.§'#v§;
   import §-<§.§4[§;
   import §-<§.§<"m§;
   import §-u§.§"I§;
   import §-u§.§+'§;
   import §-u§.§0"E§;
   import §0!K§.TournamentResultsPopup;
   import §0!s§.§5!-§;
   import §0!s§.§]"Y§;
   import §0!s§.§^#j§;
   import §0"B§.§##G§;
   import §0"B§.§6$5§;
   import §0"C§.§+"z§;
   import §0P§.§%!J§;
   import §0P§.§%"A§;
   import §1!3§.§ !w§;
   import §1!3§.§ each§;
   import §1!3§.§!§;
   import §1"l§.§`""§;
   import §1#v§.§6"a§;
   import §1#v§.§;!Y§;
   import §1L§.§!!o§;
   import §1L§.§0#=§;
   import §1L§.§;#&§;
   import §1L§.§>5§;
   import §2";§.§#$"§;
   import §2";§.§#+§;
   import §2";§.§%O§;
   import §2";§.§'#,§;
   import §2";§.§'#J§;
   import §2";§.§+!I§;
   import §2";§.§0@§;
   import §2";§.§1$2§;
   import §2";§.§3,§;
   import §2";§.§8!N§;
   import §2";§.§9§;
   import §2";§.§95§;
   import §2";§.§="b§;
   import §2";§.§?T§;
   import §2";§.§@l§;
   import §2";§.StateCutScene;
   import §2";§.StatePlay;
   import §2";§.§`"A§;
   import §2J§.§]#@§;
   import §3+§.§#"b§;
   import §3+§.§#D§;
   import §3+§.§+">§;
   import §3+§.§0!S§;
   import §3+§.§7#+§;
   import §3+§.§7#t§;
   import §3+§.§;!H§;
   import §3+§.StateLastWeeksTournamentResults;
   import §3+§.StateTournamentResults;
   import §3+§.§`o§;
   import §5" §.TabbedShopPopup;
   import §6#f§.§<!M§;
   import §7R§.§ #`§;
   import §8!h§.§6$1§;
   import §8#K§.§ case§;
   import §8#K§.§-!o§;
   import §8#K§.§0!,§;
   import §8#K§.§1^§;
   import §8#K§.§3Z§;
   import §8#K§.§4"s§;
   import §8#K§.§@!m§;
   import §9$2§.§7"L§;
   import §;"W§.GiftInboxPopup;
   import §;#l§.§!!'§;
   import §;#l§.§+!g§;
   import §;#l§.§+#i§;
   import §;#l§.§4!J§;
   import §;$<§.§5"§;
   import §<!r§.§'##§;
   import §<!r§.§]_§;
   import §<#T§.§3#s§;
   import §=§.§!"X§;
   import §=E§.§<T§;
   import §>"W§.§%#+§;
   import §>"W§.§7Y§;
   import §>2§.§!6§;
   import §>2§.§"§;
   import §>z§.§#"l§;
   import §>z§.§'$@§;
   import §>z§.§4"V§;
   import §>z§.§7$,§;
   import §>z§.AvatarCreatorPopup;
   import §>z§.ErrorPopup;
   import §>z§.InviteFriendsPopup;
   import §>z§.QuestionPopup;
   import §>z§.QuickPurchaseSlingshotPopup;
   import §?!]§.§6#k§;
   import §?!a§.§,"#§;
   import §?!a§.§6#b§;
   import §?!a§.§=4§;
   import §?$<§.§2#W§;
   import §?$<§.§>"^§;
   import §?$<§.§]#A§;
   import §@$=§.§[#d§;
   import §]C§.§ !+§;
   import §`"3§.§^!Z§;
   import §`#@§.§7n§;
   import com.rovio.assets.§6$A§;
   import com.rovio.assets.LoadingScreen;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.external.ExternalInterface;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class § #v§ extends AngryBirdsBase implements §,!n§, IAngryBirdsFacebook
   {
      
      public static const §["&§:String = "r11836";
      
      public static const §!"Q§:String = "v3.2";
      
      private static var §#!a§:String = "AngryBirdsFriends";
      
      private static const §,#m§:String = "angrybirdsfriendsdev_d8f18df";
      
      public static const §4#J§:String = "http://bit.ly/playfriends";
      
      public static const §&$'§:String = "https://cloud.rovio.com/privacyweb/index.html";
      
      public static const §[L§:String = "external_assets/";
      
      public static const §;"M§:String = §[L§ + "tournaments/";
      
      public static const §"#h§:String = §[L§ + "sale_campaigns/";
      
      public static const §`!`§:String = "packages/";
      
      public static const §8@§:String = "tournamentJSONLevels-";
      
      public static const §?"n§:String = "tournamentJSONLevels/";
      
      private static const §3$=§:String = "AngryBirdsFacebookSettings";
      
      public static const §'# §:String = "/";
      
      public static const §=!y§:String = "brand.lua";
      
      protected static var §2#;§:Class = §?!u§;
      
      protected static var § $C§:Class = §6$$§;
      
      protected static var §5!!§:Class = §<#i§;
      
      protected static var §@"h§:Class = §&$<§;
      
      protected static var §5#G§:Class = §"S§;
      
      protected static var §5!W§:Class = §""w§;
      
      public static var §,"§:§6$5§;
      
      public static var §1!!§:IAngryBirdsFacebook;
      
      private static var §<"#§:Boolean = false;
      
      public static var §`!$§:String = null;
      
      public static var §%"W§:Boolean;
      
      private static const §8!H§:int = 0;
      
      private static const §@"2§:int = 1;
      
      public static const §+!L§:Array = [[§95§.STATE_NAME,"MAIN_MENU"],[§3,§.STATE_NAME,"STORY_MODE_EPISOLE_SELECTION"],[§;!H§.STATE_NAME,"LEVEL_SELECTION"],[§0!S§.STATE_NAME,"OVERLAPPING_TOURNAMENT_MENU"],[§+!I§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§9#7§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§8!N§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§7#+§.STATE_NAME,"INGAME"],[StatePlay.STATE_NAME,"INGAME"],[§`""§.§@?§,"INGAME"],[§`""§.§8#p§,"PAUSE_PAGE"]];
      
      private static var §[_§:Boolean = false;
      
      private static var §]u§:Boolean = false;
      
      public static var §9#!§:Object;
      
      private static var §?#_§:XML;
       
      
      protected var §"!`§:§`""§;
      
      private var §"u§:InviteFriendsPopup;
      
      public var §"$=§:§%"A§;
      
      private var §+!@§:§%!J§;
      
      private var §7j§:String = "";
      
      private var §@#8§:§8#b§;
      
      private var §,$-§:§4"s§;
      
      private var §`"u§:Sprite;
      
      private var §,!^§:Boolean = false;
      
      protected var §&$,§:§,"N§;
      
      private var §0"O§:String;
      
      private var §'H§:String;
      
      private var §0!v§:String;
      
      private var §6I§:String;
      
      private var §,#;§:§ each§;
      
      private var §^!W§:uint = 0;
      
      private var §3$"§:Array;
      
      private var §>C§:Timer;
      
      private var § C§:QuestionPopup;
      
      private var §,$7§:int = 0;
      
      private var §>k§:Boolean;
      
      private var §%#9§:Vector.<§!!o§>;
      
      private var §^$§:Timer;
      
      private var §`"§:§6w§;
      
      public function § #v§(param1:§'5§)
      {
         §`#1§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§>!"§();
         §7n§.DEBUG_MODE_ENABLED = false;
         §5"§.§ "g§ = true;
         this.§&<§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§["&§,param1.stage.loaderInfo.parameters.userId || this.§0"O§);
         this.§=#H§();
         param1.stage.addChild(this.§`"u§ = new Sprite());
         super(param1,§`#1§,SERVER_ROOT);
         this.§&$,§.§4F§(mLevelManager);
         this.§&$,§.§&!X§();
         § !+§.addCallback("trialPayClosed",this.§,k§);
         § !+§.addCallback("handleExpiredMobilePricePoints",this.§!#s§);
         § !+§.addCallback("handleUserCancelledOrder",§;P§);
         § !+§.addCallback("orderReceived",§<"A§);
         this.§3$"§ = new Array();
         this.§3$"§[§8!H§] = false;
         this.§3$"§[§@"2§] = false;
         §%"W§ = true;
      }
      
      public static function get §>#r§() : String
      {
         return §#!a§;
      }
      
      public static function §return§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as § #`§).userID)
         {
            return §3$=§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as § #`§).userID;
         }
         return null;
      }
      
      public static function get §#<§() : §;#A§
      {
         return (singleton as § #v§).§?!T§;
      }
      
      private static function §;P§() : void
      {
         CoinShopPopup.§31§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§#u§();
         }
         var _loc2_:QuickPurchaseSlingshotPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchaseSlingshotPopup.ID) as QuickPurchaseSlingshotPopup;
         if(_loc2_)
         {
            _loc2_.§#u§();
         }
      }
      
      private static function §<"A§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§]K§();
         }
      }
      
      public static function §3"d§() : void
      {
         §<"#§ = true;
         §1!!§.§ !"§();
      }
      
      public static function §6#!§() : Boolean
      {
         if(§<"#§)
         {
            return true;
         }
         return false;
      }
      
      private function get §?!T§() : §;#A§
      {
         return mLevelManager as §;#A§;
      }
      
      protected function §&<§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§&$,§ = new §,"N§(param1,param2,param3,param4);
      }
      
      private function §>!"§() : void
      {
      }
      
      protected function §=#H§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §5!W§(),_loc2_);
      }
      
      private function §,k§(param1:int, param2:int, param3:String = "") : void
      {
         §0I§.§3#i§("TrialPay",param2);
         §0I§.trackPageView(this,§0I§.§'#u§);
         §0I§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         § $?§.§`"H§.§-!P§();
         var _loc4_:§^!Z§;
         (_loc4_ = new §^!Z§()).currency = "IVC";
         _loc4_.§'$,§ = §null§.§%l§;
         _loc4_.screen = §0I§.§'#u§;
         _loc4_.amount = param2;
         _loc4_.§`"x§ = §!!K§.§5"_§;
         _loc4_.itemType = §null§.§%l§;
         §!!K§.§%#S§().§%!D§(false,_loc4_.itemType,_loc4_.amount,_loc4_.§`"x§,_loc4_.screen,_loc4_.level,_loc4_.itemType,_loc4_.§'$,§,_loc4_.§%#&§,_loc4_.currency,_loc4_.§#Z§);
      }
      
      private function §!#s§() : void
      {
         §4!Q§(dataModel).§^P§.§]!_§();
      }
      
      protected function §^'§() : void
      {
         var _loc3_:Stage3D = null;
         §"@§.enabled = true;
         §0I§.§2"J§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §0I§.§@!q§("no-stage3d");
         }
         §1!!§ = this;
         §0I§.§4!c§(§"@§.§!$B§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§@"`§();
         §3Z§.addEventListener(§0!,§.§5!%§,this.§1#3§);
         §3Z§.addEventListener(§1^§.§^"7§,this.§#1§);
         §3Z§.addEventListener(§1^§.§[!n§,this.§3#b§);
      }
      
      protected function §@"`§() : void
      {
         this.§@#8§ = new §8#b§("");
         this.§@#8§.start();
      }
      
      private function get accessToken() : String
      {
         return §5!O§("accessToken") || this.§'H§;
      }
      
      private function §1#3§(param1:§0!,§) : void
      {
         §0I§.§[b§(param1.§^"4§,param1.errorID);
      }
      
      private function §#1§(param1:§1^§) : void
      {
         §0I§.§&#@§(param1.§^"4§);
      }
      
      private function §3#b§(param1:§1^§) : void
      {
         §0I§.§>"0§(param1.§^"4§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §3C§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §1%§.§`"H§.§ #x§(_loc2_);
         }
      }
      
      private function §5"K§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§,!^§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§>#P§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,false);
               _loc2_.addEventListener(§?!7§.§9#3§,this.§?"+§,false,0,true);
               _loc2_.§=#3§();
            }
         }
      }
      
      protected function §?"+§(param1:§?!7§) : void
      {
         var _loc2_:§5!-§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §6"a§.§&!d§(§2#;§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §6"a§.§&!d§(§ $C§);
         this.§3;§(_loc2_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §6"a§.§&!d§(§5!!§);
         this.§3;§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §6"a§.§&!d§(§5#G§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers","Powerup_Velocity_Multipliers","Material_Damage_Factor_Limits"];
         this.§3;§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§6#j§();
      }
      
      protected function §6#j§() : void
      {
         this.§1"+§.§ 4§(§01§.§4$>§(this.§4>§.§,l§(§=!y§,"chaptertournament")),§01§.§4$>§(this.§4>§.§,l§("frommobile.lua","chaptertournament")),§01§.§4$>§(this.§4>§.§,l§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§4>§.§5#O§)
         {
            this.§1"+§.§8"c§(this.§4>§.§%"_§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §6"a§.§&!d§(§@"h§);
         this.§3;§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §,!9§() : void
      {
         if(stage.loaderInfo.url.indexOf("angrybirds-facebook-dev") > -1 || stage.loaderInfo.url.indexOf("angrybirds-friends-new-feature") > -1)
         {
            §#!a§ = §,#m§;
         }
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §0I§.§5b§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §0I§.§5b§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §0I§.§5b§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§@!x§,"Did not receive a facebook user ID.\nError code: " + §+#`§.§case §));
         }
         §^">§.accessToken = this.accessToken;
         this.§"$=§ = new §%"A§(stage.loaderInfo.parameters.accessToken || this.§'H§);
         var _loc5_:String = §'#c§.§[&§;
         this.§0!v§ = "https://" + _loc5_ + ".rovio.com";
         if(stage.loaderInfo.parameters.analyticsUrl)
         {
            this.§0!v§ = stage.loaderInfo.parameters.analyticsUrl;
            if(this.§0!v§.indexOf(§'#c§.§'#=§) != -1)
            {
               _loc5_ = §'#c§.§'#=§;
            }
            else if(this.§0!v§.indexOf(§'#c§.§=s§) != -1)
            {
               _loc5_ = §'#c§.§=s§;
            }
            else
            {
               _loc5_ = §'#c§.§[&§;
            }
         }
         this.§6I§ = stage.loaderInfo.parameters.userId;
         this.§]p§.§["D§ = new §,#a§(_loc1_,_loc2_,_loc5_);
         this.§]p§.§["D§.§'!G§();
         §&%§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§]p§.§["D§);
      }
      
      public function §2$&§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §^!X§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§^'§();
         super.initialize();
         §`!$§ = stage.loaderInfo.parameters.levelId;
         §^"n§.addEventListener(Event.INIT,this.§="§);
         §^"n§.addEventListener(Event.COMPLETE,this.§4P§);
         § $?§.§`"H§.§4F§(mLevelManager);
         this.§,!9§();
         this.§3x§();
         §^"?§(false);
         § !+§.addCallback("purchaseComplete",this.§'a§);
         § !+§.addCallback("purchaseFailed",this.§4"E§);
         § !+§.addCallback("giftsSentToUsers",this.§3C§);
         § !+§.addCallback("onUrl",this.§5"K§);
         ExternalInterface.call("trapMouse","if (window.addEventListener) window.addEventListener(\'DOMMouseScroll\', handleWheelEvent, false); window.onmousewheel = document.onmousewheel = handleWheelEvent; function handleWheelEvent(e){e.preventDefault();}");
         this.§%+§();
         this.§5#w§();
      }
      
      private function §7""§() : void
      {
         this.§,#;§ = new § !w§();
         (this.§,#;§ as § !w§).addEventListener(Event.COMPLETE,this.§#5§);
         this.§,#;§.§8#Z§();
      }
      
      private function §#5§(param1:Event) : void
      {
         var _loc3_:§!#1§ = null;
         var _loc4_:§5!-§ = null;
         var _loc5_:§5!-§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§,#;§.§!u§)
         {
            if(_loc3_.§=$7§)
            {
               _loc5_ = new §4!J§(§#"l§.NORMAL,§]"Y§.§&T§);
               _loc4_ = new §+!g§(§#"l§.NORMAL,§]"Y§.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §7$,§(§#"l§.NORMAL,§]"Y§.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§,#;§.§7I§(_loc2_);
         }
      }
      
      private function §%+§() : void
      {
         var _loc1_:String = this.§6I§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§!!K§ = §!!K§.§%#S§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§0!v§ && this.§0!v§.indexOf("https://") == -1)
         {
            this.§0!v§ = "https://" + this.§0!v§;
         }
         _loc3_.analyticsUrl = this.§0!v§;
      }
      
      private function §5#w§() : void
      {
         §6$1§.§7"§();
      }
      
      private function §'a§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            § $?§.§`"H§.§-!P§(param2 > 0);
         }
      }
      
      private function §4"E§() : void
      {
         CoinShopPopup.§31§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§#u§();
         }
      }
      
      protected function §3x§() : void
      {
         this.§,$-§ = new §4"s§(new § case§());
      }
      
      public function §`Z§() : § case§
      {
         return this.§,$-§.§-$A§;
      }
      
      protected function §-!l§() : void
      {
         this.§"!`§ = new §`""§(§,"§,SERVER_ROOT,(§#!$§.userProgress as § #`§).userID,this.§?!T§);
         this.§`"u§.addChild(this.§"!`§);
         this.§"!`§.height = stage.stageHeight;
         this.§"!`§.x = stage.stageWidth - 180;
         this.§"!`§.addEventListener(§6#k§.§"N§,this.§8$;§);
         this.§"!`§.addEventListener(§6#k§.§<"c§,this.§?-§);
         this.§"!`§.addEventListener(§6#k§.§4i§,this.§0!c§);
         this.§"!`§.addEventListener(§6#k§.§;[§,this.§5#=§);
         this.§"!`§.addEventListener(§6#k§.§%!;§,this.§9"'§);
         this.§"!`§.addEventListener(§6#k§.§#"H§,this.§'#F§);
         this.§"!`§.addEventListener(§6#k§.§3>§,this.§`!"§);
         this.§"!`§.addEventListener(§6#k§.§[$"§,this.§<Y§);
         this.§"!`§.addEventListener(§6#k§.BRAG,this.§&$$§);
         this.§"!`§.addEventListener(§6#k§.PLAY_LEVEL,this.§<"Y§);
         this.§"!`§.addEventListener(§6#k§.§[!O§,this.§]$%§);
         this.§"u§ = new InviteFriendsPopup(§#"l§.NORMAL,§]"Y§.DEFAULT);
         this.§"u§.addEventListener(§6#k§.§"N§,this.§8$;§);
         this.§"u§.addEventListener(§6#k§.§]"!§,this.§0!o§);
         this.§>C§ = null;
      }
      
      protected function §]$%§(param1:Event) : void
      {
         var _loc2_:§5!-§ = new §+#i§(§#"l§.NORMAL,§]"Y§.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §="§(param1:Event) : void
      {
         §6#b§.§2"B§(false);
      }
      
      protected function §4P§(param1:Event) : void
      {
         §6#b§.§2"B§(true);
      }
      
      public function §<z§(param1:int, param2:Array = null) : void
      {
         this.§"!`§.§^D§(param1,param2);
      }
      
      public function § "u§(param1:String) : void
      {
         this.§"!`§.§const§(param1);
      }
      
      public function §%"j§(param1:String) : void
      {
         this.§"!`§.§,!2§(param1);
         this.§"!`§.§const§(param1);
      }
      
      override protected function initializeLevelMain() : §!6§
      {
         return new §"#1§(stage,§!#J§,§]!9§,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §2#W§
      {
         return new §>"^§();
      }
      
      override protected function initializeLevelThemeManager() : §4[§
      {
         return new §<"m§();
      }
      
      override protected function initializeDataModel() : void
      {
         §#!$§ = new §4!Q§();
      }
      
      override protected function initializeLevelManager() : §;"n§
      {
         return new §;#A§();
      }
      
      override protected function initializePackageManager() : §^!z§
      {
         return new §4j§(mLevelManager,§]#A§(§!#J§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §#!$§.userProgress = new § #`§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §]!s§(new §%O§(mLevelManager,§]#A§(§!#J§),§-U§,false));
         §]!s§(new §#+§(mLevelManager,§-U§,false));
         §]!s§(new §95§(mLevelManager,§-U§,false));
         §]!s§(new §3,§(mLevelManager,§-U§,false));
         §]!s§(new §`"A§(mLevelManager,§-U§,false));
         §]!s§(new §#$"§(mLevelManager,§-U§,false));
         §]!s§(new §0@§(mLevelManager,§-U§,false));
         §]!s§(new §'#,§(mLevelManager,§-U§,false));
         §]!s§(new §="b§(mLevelManager,§-U§,false));
         §]!s§(new §1$2§(mLevelManager,§-U§,false));
         §]!s§(new §?T§(mLevelManager,§-U§,false));
         §]!s§(new §8!N§(mLevelManager,§-U§,false));
         §]!s§(new §+!I§(mLevelManager,§-U§,false));
         §]!s§(new §7#t§(mLevelManager,§-U§,false));
         §]!s§(new §`o§(mLevelManager,§-U§,false));
         §]!s§(new §#D§(mLevelManager,§-U§,false));
         §]!s§(new §+">§(mLevelManager,§]#A§(§!#J§),§-U§,false));
         §]!s§(new §7#+§(mLevelManager,§-U§,false));
         §]!s§(new §;!H§(mLevelManager,§-U§,false));
         §]!s§(new §0!S§(mLevelManager,§-U§));
         §]!s§(new StateLastWeeksTournamentResults(mLevelManager,§-U§,false));
         §]!s§(new §#"b§(mLevelManager,§-U§,false));
         §]!s§(new StateTournamentResults(mLevelManager,false,§-U§));
      }
      
      override protected function createStateObject(param1:Class) : §7Y§
      {
         if(param1 == §+">§)
         {
            return new param1(mLevelManager,§]#A§(§!#J§),§-U§);
         }
         return new param1(mLevelManager,§-U§);
      }
      
      public function § "1§() : void
      {
         mLevelManager.selectEpisode(6);
         §1!L§(§+!I§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §,3§ = new MovieClip();
         §0#W§.stage.addChild(§,3§);
         §8<§ = new §'$@§(§,3§,§-U§,this);
         §8<§.addEventListener(§"Z§.OPEN,§;T§);
         §8<§.addEventListener(§"Z§.CLOSE,§7#u§);
         §["R§ = new §,R§(§8<§,§#!$§,§^#j§.§&!$§,new §=,§(),new §`#D§());
         §8<§.addLayer(§#"l§.NORMAL,true,new Rectangle(0,0,0,0));
         §8<§.addLayer(§#"l§.INFO,true,new Rectangle(0,0,0,0));
         §8<§.addLayer(§#"l§.§?!b§,true,new Rectangle(0,0,0,0));
         §8<§.addLayer(§#"l§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §%#+§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §0I§.§5b§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         §"I§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,"");
         return new §@l§(§-U§,true,§%#+§.STATE_NAME,getMinLoadingScreenTime(),"","");
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc4_:String = null;
         § "A§ = true;
         var _loc2_:String = §95§.STATE_NAME;
         if(§`!$§)
         {
            if(§`!$§.indexOf("2000-") > -1)
            {
               _loc2_ = §;!H§.STATE_NAME;
            }
            else if(§,#l§.§`!x§(§,#l§.§,=§) == §,#l§.§<t§)
            {
               _loc2_ = §95§.STATE_NAME;
               §`!$§ = null;
            }
            else
            {
               §'##§.§`"H§.§ $%§();
               if((_loc4_ = mLevelManager.getValidLevelId(§`!$§)) != §`!$§)
               {
                  §0I§.§%"N§(§`!$§);
               }
               §`!$§ = null;
               if(§#!$§.userProgress.isLevelOpen(_loc4_))
               {
                  this.§<z§(§`""§.§"!D§);
                  this.§+!r§(_loc4_);
                  _loc2_ = null;
               }
               else
               {
                  _loc2_ = §3,§.STATE_NAME;
               }
            }
         }
         var _loc3_:String = §5!O§("fb_source");
         if(_loc3_ && _loc3_ != "null")
         {
            §!!K§.§%#S§().§ "w§(_loc3_,"");
         }
         if(_loc2_)
         {
            §1!L§(_loc2_);
         }
      }
      
      public function §+!r§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §1!L§(§7#t§.STATE_NAME);
         }
         else
         {
            §1!L§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§,!^§ = true;
         this.§ !"§();
      }
      
      protected function §^!A§() : void
      {
         super.setFirstGameState();
      }
      
      public function § !"§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§5!-§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§!!o§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§,!^§ || !§<"#§)
         {
            return;
         }
         this.§^!A§();
         §'##§.§`"H§.§4F§(mLevelManager);
         §'##§.§`"H§.addEventListener(§]#@§.§3"0§,this.§ #?§);
         §<$2§.§`"H§.addEventListener(§4#Q§.§+"R§,this.§?#B§);
         §=4§.§2#=§ = new §,"#§();
         §=4§.§2#=§.§=N§();
         this.§-!l§();
         §[#d§.§`"H§.init(popupManager);
         if(!§<$2§.§`"H§.active)
         {
            if(TournamentResultsPopup.§;"C§)
            {
               _loc2_ = new TournamentResultsPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§'##§.§`"H§.tournamentRules && §'##§.§`"H§.tournamentRules.§+$?§)
         {
            _loc3_ = §'##§.§`"H§.tournamentRules.§+$?§;
            _loc2_ = new _loc3_(§#"l§);
            popupManager.openPopup(_loc2_);
         }
         §'##§.§`"H§.addEventListener(§]#@§.§^!q§,this.§6E§);
         §'##§.§`"H§.addEventListener(§]#@§.§["X§,this.§8Y§);
         §'##§.§`"H§.addEventListener(§]#@§.§,Q§,this.§5#x§);
         if(GiftInboxPopup.§'$7§)
         {
            _loc2_ = new GiftInboxPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§ $?§.§`"H§.§>3§.§>!>§(§3!d§.§'""§))
         {
            popupManager.openPopup(new §?h§(§#"l§.NORMAL,§]"Y§.DEFAULT));
         }
         this.§+!@§ = new §%!J§();
         this.§+!@§.§'6§();
         this.§%#9§ = new Vector.<§!!o§>();
         for each(_loc1_ in § $?§.§`"H§.§>3§.claimableBundles)
         {
            if(§ $?§.§`"H§.§>3§.§>!>§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §'#v§.§"!C§.definition.toUpperCase():
                     popupManager.openPopup(new §4"V§(§#"l§.NORMAL,§]"Y§.DEFAULT,§'#v§.§"!C§));
               }
               for each(_loc4_ in §!!'§.§1"c§)
               {
                  if(_loc4_[§!!'§.§]$1§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §!!'§(_loc4_[§!!'§.§]$1§],§!!'§.§@"V§));
                     (_loc5_ = new §!!o§()).addEventListener(Event.COMPLETE,this.§`q§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§0$C§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§0$C§);
                     _loc5_.addEventListener(§>5§.§@!@§,this.§0$C§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§%#9§.push(_loc5_);
                     (_loc6_ = §;#&§.§ #G§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§!!'§.§]$1§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §4!Q§(dataModel).§^P§.§]!_§();
         §4!Q§(dataModel).§="N§.slingshots;
         this.§7""§();
         if(§4!Q§(dataModel).§92§.§6#J§)
         {
            §4!Q§(dataModel).§92§.addEventListener(Event.COMPLETE,this.§2"D§);
         }
         else
         {
            this.§2"D§(null);
         }
      }
      
      private function §8Y§(param1:§]#@§) : void
      {
         var blueprintItems:Array = null;
         var blueprintPackageLoader:§0"E§ = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§]#@§ = param1;
         if(event.data.bluePrintPackLoader)
         {
            blueprintItems = this.§1"+§.§%#m§();
            blueprintPackageLoader = §0"E§(event.data.bluePrintPackLoader);
            if(blueprintPackageLoader.§35§)
            {
               §7n§.§["`§(blueprintPackageLoader.§35§,blueprintItems);
            }
            return;
         }
         var packageLoader:§0"E§ = §0"E§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §'##§.§`"H§.brandedTournamentAssetId;
         var backgroundFileName:String = "background.xml";
         var backgroundLoadedFromXML:Boolean = false;
         if(packageLoader.§="@§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§,l§(backgroundFileName,packName));
            §]!9§.loadBackgroundXML(backgroundData);
            backgroundLoadedFromXML = true;
         }
         if(packageLoader.§="@§(§=!y§,packName))
         {
            try
            {
               luaObject = §01§.§4$>§(packageLoader.§,l§(§=!y§,packName));
               this.§"$A§(luaObject);
               items = this.§1"+§.§;!#§(luaObject);
               if(luaObject.linkButton)
               {
                  §6$1§.§%#J§(§'##§.§`"H§.brandedTournamentAssetId,luaObject.linkButton);
               }
               if(!backgroundLoadedFromXML && luaObject.dynamicBlocks)
               {
                  (§]!9§ as §<"m§).§7!<§(luaObject.dynamicBlocks.themes,§'##§.§`"H§.brandedTournamentAssetId);
               }
               §'##§.§`"H§.§2$ § = luaObject.special;
               this.§1"+§.§;#%§(luaObject.audio);
               fn = function(param1:Event):void
               {
                  cb();
               };
               if(packageLoader.§35§)
               {
                  §7n§.§["`§(packageLoader.§35§,items,fn);
               }
            }
            catch(e:Error)
            {
               AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§@!x§,"Tournament brand error: " + e.name + "\n" + e.errorID + "\n" + e.message));
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §"$A§(param1:Object) : void
      {
         §'##§.§`"H§.§8"Q§ = param1.shareButton;
      }
      
      protected function §6E§(param1:§]#@§) : void
      {
         if(this.§1"+§ && !§[_§)
         {
            §[_§ = true;
            §]u§ = true;
            this.§1"+§.§+N§(§'##§.§`"H§.brandedTournamentAssetId);
         }
         var _loc2_:§]_§ = §'##§.§`"H§.tournamentRules;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§3V§;
         if(§6$A§.§9"w§(_loc3_))
         {
            this.§,$-§.§1$@§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §!$9§() : void
      {
         if(this.§1"+§)
         {
            this.§1"+§.§+N§();
            §[_§ = false;
         }
      }
      
      protected function §^"+§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§#"l§.NORMAL,§]"Y§.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function § #?§(param1:Event) : void
      {
         this.§3$"§[§8!H§] = true;
         this.§3$"§[§@"2§] = true;
         this.§5#F§();
      }
      
      protected function §?#B§(param1:Event) : void
      {
         this.§3$"§[§8!H§] = true;
         this.§3$"§[§@"2§] = true;
         this.§5#F§();
      }
      
      private function §5#F§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§5!-§ = null;
         for each(_loc1_ in this.§3$"§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§"Z§.CLOSE,this.§#!,§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§3$"§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§5"d§();
         if(_loc3_)
         {
            § #v§.§,"§.§-"K§();
            if(!§<$2§.§`"H§.active)
            {
               this.§^"+§();
            }
         }
      }
      
      private function §#!,§(param1:§"Z§) : void
      {
         this.§5#F§();
      }
      
      protected function §2!'§(param1:§8#t§) : void
      {
         var _loc2_:§5!-§ = null;
         if(DailyRewardPopup.§'"y§)
         {
            _loc2_ = new DailyRewardPopup(§#"l§.NORMAL,§]"Y§.TOP,TournamentResultsPopup.§;"C§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function §2"D§(param1:Event) : void
      {
         var _loc2_:Object = §4!Q§(AngryBirdsBase.singleton.dataModel).§92§.§'k§(§[$3§.§]-§);
         if(_loc2_)
         {
            §^"?§(_loc2_[0]);
         }
         else
         {
            §^"?§(true);
         }
         this.§"!`§.§'t§();
         var _loc3_:Object = §4!Q§(AngryBirdsBase.singleton.dataModel).§92§.§'k§(§[$3§.§'"=§);
         if(_loc3_)
         {
            if(§<$2§.§`"H§.active && _loc3_[0] == §`""§.§]"e§)
            {
               this.§"!`§.§'u§(§`""§.§`!S§);
            }
            else
            {
               this.§"!`§.§'u§(§`""§.§2"5§);
            }
         }
         this.§<"T§(null);
         if(this.§ C§)
         {
            if(!§4!Q§(AngryBirdsBase.singleton.dataModel).§92§.§3$;§(this.§ C§.§]!t§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§ C§);
               §4!Q§(AngryBirdsBase.singleton.dataModel).§92§.§4"h§(§[$3§.§'"N§,[this.§ C§.§]!t§()]);
            }
            else
            {
               this.§ C§ = null;
            }
         }
      }
      
      private function §<"T§(param1:Event) : void
      {
         §4!Q§(dataModel).§92§.removeEventListener(Event.COMPLETE,this.§<"T§);
         §4!Q§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§<"T§);
         if(§4!Q§(dataModel).currencyModel.§3f§)
         {
            §4!Q§(dataModel).§="N§.§;"4§();
            §4!Q§(dataModel).§3#L§.loadItems();
         }
         else
         {
            §4!Q§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§<"T§);
         }
      }
      
      protected function §5#x§(param1:Event) : void
      {
         this.§^!W§ = setInterval(this.§'!J§,1000);
      }
      
      private function §'!J§() : void
      {
         if(§'##§.§`"H§.§;!q§())
         {
            §0!S§.§>!Q§();
         }
         if(§'!&§() != StateTournamentResults.STATE_NAME && §'!&§() != §;!H§.STATE_NAME && §'!&§() != §7#+§.STATE_NAME && !§'##§.§`"H§.§2!B§ && §'##§.§`"H§.§'"^§() <= 0)
         {
            if(!§'##§.§`"H§.§;!q§())
            {
               §;!H§.§#$%§(§'##§.§`"H§.§;#Q§.id);
            }
            §'##§.§`"H§.§@!W§();
            §'##§.§`"H§.§2!B§ = true;
            §<$2§.§`"H§.§"g§();
            § #v§.§,"§.§-"K§();
            §##G§.§##F§ = new Array();
            §[_§ = false;
            (dataModel as §4!Q§).§="N§.§1!$§();
            if(!§ $?§.§`"H§.§6#J§)
            {
               § $?§.§`"H§.§-!P§();
            }
            if(§'##§.§`"H§.§;#Q§)
            {
               §'##§.§`"H§.§;#Q§.brandedTournamentAssetId = null;
            }
            §%"W§ = true;
         }
         clearInterval(this.§^!W§);
      }
      
      public function §;g§(param1:Object) : void
      {
         if(!§,"§)
         {
            §,"§ = new §6$5§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as § #`§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as § #`§).userName);
         }
         §,"§.injectData(param1);
         var _loc2_:int = §<T§.§7#v§();
         if(_loc2_ >= 0)
         {
            §0I§.§&"x§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:int = param1;
         if(this.§"!`§)
         {
            param1 -= 180;
            this.§"!`§.x = param1;
            this.§"!`§.height = param2;
         }
         super.resizeViews(param1,param2,param3);
         this.§&#6§(_loc4_,param2);
      }
      
      public function §&#6§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §3;§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §8$;§(param1:§6#k§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            §!!K§.§%#S§().§4"S§(_loc5_,_loc4_);
            § !+§.§>$%§("updateSessionToken",§0#=§.§+#!§);
            § !+§.§>$%§("flashInviteFriendsHandler",_loc3_,_loc2_,§5H§.§^"M§(§5H§.INVITE));
         }
         else
         {
            §0I§.§3"E§();
            popupManager.openPopup(this.§"u§);
         }
      }
      
      protected function §0!o§(param1:§6#k§) : void
      {
         if(param1.data != null)
         {
            this.§=#+§.§5"^§(param1.data);
         }
      }
      
      protected function §?-§(param1:§6#k§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§#"l§.NORMAL,§]"Y§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§"Z§.§=#m§,this.§ for§);
      }
      
      protected function §0!c§(param1:§6#k§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§#"l§.NORMAL,§]"Y§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§"Z§.§=#m§,this.§37§);
      }
      
      protected function §37§(param1:Event) : void
      {
         this.§"!`§.§6$&§(§4!Q§(dataModel).§5!2§);
      }
      
      protected function § for§(param1:Event) : void
      {
         this.§!#-§();
      }
      
      public function §!#-§() : void
      {
         this.§"!`§.§,"l§();
      }
      
      protected function §5#=§(param1:Event) : void
      {
         §1a§();
      }
      
      protected function §9"'§(param1:§6#k§) : void
      {
         §?!8§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §'#F§(param1:§6#k§) : void
      {
         if(§?!8§ is StatePlay)
         {
            StatePlay(§?!8§).showTutorials();
         }
      }
      
      protected function §<Y§(param1:§6#k§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §&$$§(param1:§6#k§) : void
      {
         var _loc2_:§!"X§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:int = 0;
         if(!this.§>C§)
         {
            this.§>C§ = new Timer(1000);
            this.§>C§.addEventListener(TimerEvent.TIMER,this.§88§);
            this.§>C§.start();
            exitFullScreen();
            _loc2_ = param1.data as §!"X§;
            _loc3_ = _loc2_.§1#C§.rank - 1;
            §0I§.§^#2§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §;#A§(mLevelManager).§`!-§(_loc4_);
            if((_loc7_ = §'##§.§`"H§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§'##§.§`"H§.§6!D§(_loc4_));
            }
            § !+§.§>$%§("updateSessionToken",§0#=§.§+#!§);
            § !+§.§>$%§("flashBrag",_loc2_.§1#C§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§5H§.§^"M§(§5H§.BRAG));
         }
      }
      
      private function §88§(param1:TimerEvent) : void
      {
         if(this.§>C§)
         {
            this.§>C§.stop();
            this.§>C§.removeEventListener(TimerEvent.TIMER,this.§88§);
            this.§>C§ = null;
         }
      }
      
      protected function §<"Y§(param1:§6#k§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §0I§.§%"N§(_loc2_);
         }
         if(§#!$§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §1!L§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §`!"§(param1:§6#k§) : void
      {
         var musicManager:§ case§ = null;
         var mySO:SharedObject = null;
         var e:§6#k§ = param1;
         §^"?§(!§"!v§());
         if(§"!v§())
         {
            if(§'!&§() == StatePlay.STATE_NAME)
            {
               if(!§7n§.isPaused)
               {
                  §7n§.§6#K§.background.playAmbientSound();
               }
            }
            else if(this.§6q§())
            {
               musicManager = § #v§.§1!!§.§`Z§();
               musicManager.§,o§(§4"s§.§60§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§3$=§,§'# §);
            mySO.data.useSounds = §&I§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §4#%§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§#!$§.userProgress as § #`§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§^$>§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§'##§.§`"H§ && §'##§.§`"H§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §'##§.§`"H§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §'##§.§`"H§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§#!$§.userProgress as § #`§).§8#I§(param1,_loc4_.rankAfterUpdate);
         }
         if(§<$2§.§`"H§.active)
         {
            if(_loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank)
            {
               (§#!$§.userProgress as § #`§).§6!B§(param1,_loc4_.leagueRankAfterUpdate);
               return true;
            }
            return false;
         }
         return false;
      }
      
      public function §;"'§(param1:String) : void
      {
         var _loc2_:int = §#!$§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §#!$§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §#!$§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§^$>§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§#!$§.userProgress as § #`§).§5"=§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §^$>§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§=#+§.§1#I§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §=#+§() : §`""§
      {
         return this.§"!`§;
      }
      
      public function get §?"_§() : §8#b§
      {
         return this.§@#8§;
      }
      
      public function §7"a§() : void
      {
         if(this.§@#8§)
         {
            this.§@#8§.§^j§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + §`#1§ + " " + §["&§;
      }
      
      public function §;!=§() : String
      {
         return §0I§.§""6§;
      }
      
      public function §#"!§() : String
      {
         return §"@§.§9!s§;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §0I§.§4!c§(§"@§.§9!s§,_loc1_.toString(),_loc1_);
         §0I§.trackPageView(this,§"@§.§9!s§);
         this.§,!^§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§7j§)
         {
            this.§7j§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§7j§ += String.fromCharCode(param1.keyCode);
         }
         this.§7j§ = this.§7j§.toLowerCase();
         if(this.§7j§.length > 15)
         {
            this.§7j§ = this.§7j§.substr(1);
         }
      }
      
      public function get §&"6§() : §%!J§
      {
         return this.§+!@§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §1"+§() : §>"^§
      {
         return §>"^§(§!#J§);
      }
      
      protected function get §4>§() : §4j§
      {
         return §4j§(§%!6§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return §4"s§.§60§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§ case§ = null;
         if(§]u§ || §'##§.§`"H§.§;!q§())
         {
            if(this.§6q§())
            {
               _loc1_ = § #v§.§1!!§.§`Z§();
               _loc1_.§?s§(§4"s§.§60§);
            }
            this.§>k§ = false;
         }
         else
         {
            this.§>k§ = true;
         }
      }
      
      private function §=P§() : Boolean
      {
         var _loc1_:§@!m§ = §3Z§.§["C§("Channel_Theme");
         return _loc1_.§?S§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§-!o§ = null;
         var _loc1_:§@!m§ = §3Z§.§["C§("Channel_Theme");
         if(_loc1_.§?S§ > 0)
         {
            _loc2_ = _loc1_.§0"r§(0);
            this.§`Z§().§@6§(_loc2_.§ !n§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get § #X§() : §%"A§
      {
         return this.§"$=§;
      }
      
      public function get §]p§() : §4!Q§
      {
         return §4!Q§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§[#t§(param1);
         }
         return _loc2_;
      }
      
      public function §[#t§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < §+!L§.length)
         {
            if(§+!L§[_loc2_][0] == param1)
            {
               this.§,$7§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §2$;§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = §+!L§[this.§,$7§][0];
         _loc1_.screenName = §+!L§[this.§,$7§][1];
         return _loc1_;
      }
      
      private function §`q§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§%#9§.length)
            {
               if(this.§%#9§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§%#9§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§%#9§.length == 0)
         {
            § $?§.§`"H§.§-!P§();
         }
      }
      
      private function §0$C§(param1:ErrorEvent) : void
      {
         §;!Y§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function §3#X§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§#"l§.NORMAL,§]"Y§.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§!$2§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§3#s§.§6"B§,this.§^!e§);
         if(this.§,!^§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§ C§ = _loc3_;
         }
      }
      
      private function §^!e§(param1:§3#s§) : void
      {
         §0I§.§7<§();
         AngryBirdsBase.singleton.exitFullScreen();
         § !+§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         § !+§.§>$%§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         §!!K§.§%#S§().§#!c§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§ C§)
         {
            this.§ C§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         § !+§.§?!§("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §`""§.§'!'§ = param1 == "true";
         if(§`""§.§'!'§)
         {
            this.§<z§(§`""§.§2"5§);
            §&%§.§5!Z§();
         }
      }
      
      public function §12§() : void
      {
         this.§^$§ = new Timer(this.§]p§.§["D§.expiresIn * 1000,1);
         this.§^$§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§&#0§);
         this.§^$§.start();
      }
      
      private function §&#0§(param1:TimerEvent) : void
      {
         this.§^$§.stop();
         this.§^$§ = null;
         this.§]p§.§["D§.§'!G§();
      }
      
      public function §]"v§() : §+'§
      {
         if(this.§`"§ == null)
         {
            this.§`"§ = new §6w§(mLevelManager);
         }
         return this.§`"§;
      }
      
      override public function onEnterFrame(param1:Event) : void
      {
         super.onEnterFrame(param1);
         §<!M§.§`"H§.§8!@§();
         §7"L§.§`"H§.§#"N§();
         if(this.§>k§)
         {
            this.playThemeMusic();
         }
      }
      
      private function §6q§() : Boolean
      {
         switch(§'!&§())
         {
            case §3,§.STATE_NAME:
            case §9#7§.STATE_NAME:
            case §'#J§.STATE_NAME:
            case §95§.STATE_NAME:
            case §+!I§.STATE_NAME:
            case §8!N§.STATE_NAME:
            case §;!H§.STATE_NAME:
            case §0!S§.STATE_NAME:
            case §+"z§.STATE_NAME:
            case StateTournamentResults.STATE_NAME:
               return true;
            default:
               return false;
         }
      }
   }
}
