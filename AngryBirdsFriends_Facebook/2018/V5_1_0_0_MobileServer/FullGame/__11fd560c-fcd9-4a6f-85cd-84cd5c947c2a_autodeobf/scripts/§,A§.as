package
{
   import §!"3§.§8#,§;
   import §!$;§.§8#F§;
   import §"!!§.§!"&§;
   import §"!!§.§+"0§;
   import §"!@§.§ !K§;
   import §"!@§.§ !v§;
   import §"!@§.§ for§;
   import §"!@§.§%$2§;
   import §"!@§.§0"U§;
   import §"!@§.§1S§;
   import §"!@§.§3P§;
   import §"!@§.§4<§;
   import §"!@§.§6!+§;
   import §"!@§.§7$§;
   import §"!@§.§>"c§;
   import §"!@§.§>$<§;
   import §"!@§.§>N§;
   import §"!@§.StateCutScene;
   import §"!@§.StatePlay;
   import §"!@§.§`"^§;
   import §"!@§.§`i§;
   import §"!@§.§false§;
   import §"#L§.DailyRewardPopup;
   import §"$!§.§7#U§;
   import §%!x§.§^!K§;
   import §%#w§.§2#s§;
   import §%$B§.GiftInboxPopup;
   import §%J§.§6"q§;
   import §%J§.§]$9§;
   import §%J§.§]i§;
   import §&!w§.TournamentResultsPopup;
   import §&"`§.TabbedShopPopup;
   import §&$!§.§[!I§;
   import §&N§.§5#"§;
   import §+$?§.§4!+§;
   import §+$?§.§4$6§;
   import §+$?§.§="@§;
   import §-!S§.§##>§;
   import §-"3§.§?$"§;
   import §-"3§.§[">§;
   import §-#F§.§'§;
   import §-#F§.§@!5§;
   import §-#e§.§6#P§;
   import §0"A§.§2"w§;
   import §1!=§.§%#;§;
   import §1!=§.§>9§;
   import §1!=§.§^"U§;
   import §1"N§.§4#G§;
   import §2G§.§ #$§;
   import §2G§.§"G§;
   import §2G§.§#"8§;
   import §2G§.§&"+§;
   import §2G§.§-#+§;
   import §2G§.§2!2§;
   import §2G§.§4"P§;
   import §2G§.§9=§;
   import §2G§.§?§;
   import §3r§.§]!4§;
   import §4#V§.§+!c§;
   import §4#V§.§8#h§;
   import §4#V§.CoinShopPopup;
   import §5"7§.§+$"§;
   import §5";§.§3!2§;
   import §5";§.§6#X§;
   import §5";§.§7"s§;
   import §6$8§.§'!W§;
   import §6$8§.§]N§;
   import §7!%§.§4"I§;
   import §7"§.§^#H§;
   import §7"§.§`#@§;
   import §8!§.§3§;
   import §8!M§.§2!V§;
   import §8"L§.§8W§;
   import §8"L§.§[#O§;
   import §8"L§.§[t§;
   import §8#!§.§-"Z§;
   import §8#!§.§5`§;
   import §9"r§.§1#e§;
   import §9#B§.§"#&§;
   import §9#B§.§+y§;
   import §9#B§.§0"h§;
   import §9#B§.§0#I§;
   import §9#B§.§1#h§;
   import §9#B§.§3#t§;
   import §9#B§.§=!L§;
   import §9#B§.§=!V§;
   import §9#B§.StateLastWeeksTournamentResults;
   import §9#B§.StateTournamentResults;
   import §9#J§.§&b§;
   import §;#D§.§3#U§;
   import §;$3§.§8=§;
   import §;$3§.§?!0§;
   import §=!,§.§1!l§;
   import §="h§.§`"O§;
   import §>#G§.§!#R§;
   import §>#G§.§#!I§;
   import §>#G§.§%6§;
   import §?"#§.§!!B§;
   import §?P§.§"§;
   import §?P§.§+"U§;
   import §?P§.§-"'§;
   import §?P§.AvatarCreatorPopup;
   import §?P§.ErrorPopup;
   import §?P§.InviteFriendsPopup;
   import §?P§.QuestionPopup;
   import §?P§.QuickPurchaseSlingshotPopup;
   import §?P§.§]"$§;
   import §@!M§.§!"p§;
   import §@!M§.§+N§;
   import §@!M§.§0!p§;
   import §@!M§.§8`§;
   import §@!M§.§<"t§;
   import §@!M§.§?"<§;
   import §@!M§.§^#p§;
   import §@0§.§%!q§;
   import §@0§.§2$2§;
   import §@T§.§+""§;
   import §@V§.§!"j§;
   import §@V§.§1"V§;
   import §@V§.§;m§;
   import §@V§.§["0§;
   import §@l§.§8"9§;
   import §@r§.§6§;
   import §@r§.§8#j§;
   import §@r§.§=T§;
   import §@r§.§>"B§;
   import §]!6§.§6Y§;
   import §]!6§.§="p§;
   import §`!e§.§=Z§;
   import §`7§.§ try§;
   import §`7§.§1$&§;
   import §`7§.§2#Q§;
   import §`7§.§6#I§;
   import §`7§.§7E§;
   import §`7§.§>!e§;
   import §`7§.§[$-§;
   import §`7§.§`"x§;
   import §`7§.§`m§;
   import com.rovio.assets.§!"f§;
   import com.rovio.assets.LoadingScreen;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.external.ExternalInterface;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class §,A§ extends AngryBirdsBase implements §7E§, IAngryBirdsFacebook
   {
      
      public static const §,4§:String = "r10688";
      
      public static const §?G§:String = "v2.8";
      
      private static var §]"[§:String = "AngryBirdsFriends";
      
      private static const §%#X§:String = "angrybirdsfriendsdev_d8f18df";
      
      public static const §,"B§:String = "http://bit.ly/playfriends";
      
      public static const §6#w§:String = "https://cloud.rovio.com/privacyweb/index.html";
      
      public static const §%!H§:String = "external_assets/";
      
      public static const §&W§:String = §%!H§ + "tournaments/";
      
      public static const §4"+§:String = §%!H§ + "sale_campaigns/";
      
      public static const §"w§:String = "packages/";
      
      public static const §;X§:String = "tournamentJSONLevels-";
      
      public static const §9"n§:String = "tournamentJSONLevels/";
      
      private static const §5!F§:String = "AngryBirdsFacebookSettings";
      
      public static const §-d§:String = "/";
      
      public static const §+!#§:String = "brand.lua";
      
      protected static var §'!+§:Class = §-o§;
      
      protected static var §0$=§:Class = §1!#§;
      
      protected static var §""d§:Class = §4#K§;
      
      protected static var §#!l§:Class = §5W§;
      
      protected static var §;;§:Class = §@#3§;
      
      protected static var §,#S§:Class = §^$'§;
      
      public static var §""`§:§!"&§;
      
      public static var §2#O§:IAngryBirdsFacebook;
      
      private static var §9"C§:Boolean = false;
      
      public static var §[!j§:String = null;
      
      public static var §1"@§:Boolean;
      
      private static const §6"g§:int = 0;
      
      private static const §>!<§:int = 1;
      
      public static const § #B§:Array = [[§>"c§.STATE_NAME,"MAIN_MENU"],[§>$<§.STATE_NAME,"STORY_MODE_EPISOLE_SELECTION"],[§=!L§.STATE_NAME,"LEVEL_SELECTION"],[§"#&§.STATE_NAME,"OVERLAPPING_TOURNAMENT_MENU"],[§>N§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§1S§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§ !v§.STATE_NAME,"STORY_MODE_LEVEL_SELECTION"],[§0"h§.STATE_NAME,"INGAME"],[StatePlay.STATE_NAME,"INGAME"],[§]!4§.§do §,"INGAME"],[§]!4§.§=!?§,"PAUSE_PAGE"]];
      
      private static var §'^§:Boolean = false;
      
      private static var §<!#§:Boolean = false;
      
      public static var §5"T§:Object;
      
      private static var §3!'§:XML;
       
      
      protected var §^"!§:§]!4§;
      
      private var §=!$§:InviteFriendsPopup;
      
      public var §>!Q§:§[">§;
      
      private var §^#-§:§?$"§;
      
      private var §<$+§:String = "";
      
      private var §]#h§:§1$&§;
      
      private var §8#O§:§<"t§;
      
      private var §5!#§:Sprite;
      
      private var §<T§:Boolean = false;
      
      protected var §?!%§:§>!e§;
      
      private var §3#^§:String;
      
      private var §7!,§:String;
      
      private var §9!b§:String;
      
      private var §[#L§:String;
      
      private var §]v§:§7"s§;
      
      private var §"#p§:uint = 0;
      
      private var §;l§:Array;
      
      private var §="<§:Timer;
      
      private var §["s§:QuestionPopup;
      
      private var §;#!§:int = 0;
      
      private var §@"§:Boolean;
      
      private var §^&§:Vector.<§1"V§>;
      
      private var § "g§:Timer;
      
      private var §4!L§:§4"P§;
      
      public function §,A§(param1:§8"9§)
      {
         §8!l§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§=!`§();
         §3#U§.DEBUG_MODE_ENABLED = false;
         §!!B§.§>$2§ = true;
         this.§+M§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§,4§,param1.stage.loaderInfo.parameters.userId || this.§3#^§);
         this.§,&§();
         param1.stage.addChild(this.§5!#§ = new Sprite());
         super(param1,§8!l§,SERVER_ROOT);
         this.§?!%§.§2! §(mLevelManager);
         this.§?!%§.§^$-§();
         §^!K§.addCallback("trialPayClosed",this.§5"w§);
         §^!K§.addCallback("handleExpiredMobilePricePoints",this.§if§);
         §^!K§.addCallback("handleUserCancelledOrder",§7"b§);
         §^!K§.addCallback("orderReceived",§4"<§);
         this.§;l§ = new Array();
         this.§;l§[§6"g§] = false;
         this.§;l§[§>!<§] = false;
         §1"@§ = true;
      }
      
      public static function get § !;§() : String
      {
         return §]"[§;
      }
      
      public static function §3a§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as §##>§).userID)
         {
            return §5!F§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as §##>§).userID;
         }
         return null;
      }
      
      public static function get §6#6§() : §?!0§
      {
         return (singleton as §,A§).§<#C§;
      }
      
      private static function §7"b§() : void
      {
         CoinShopPopup.§@"h§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§^!7§();
         }
         var _loc2_:QuickPurchaseSlingshotPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchaseSlingshotPopup.ID) as QuickPurchaseSlingshotPopup;
         if(_loc2_)
         {
            _loc2_.§^!7§();
         }
      }
      
      private static function §4"<§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§[!V§();
         }
      }
      
      public static function §%$-§() : void
      {
         §9"C§ = true;
         §2#O§.§,#y§();
      }
      
      public static function §,!B§() : Boolean
      {
         if(§9"C§)
         {
            return true;
         }
         return false;
      }
      
      private function get §<#C§() : §?!0§
      {
         return mLevelManager as §?!0§;
      }
      
      protected function §+M§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§?!%§ = new §>!e§(param1,param2,param3,param4);
      }
      
      private function §=!`§() : void
      {
      }
      
      protected function §,&§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §,#S§(),_loc2_);
      }
      
      private function §5"w§(param1:int, param2:int, param3:String = "") : void
      {
         §`"x§.§<#O§("TrialPay",param2);
         §`"x§.trackPageView(this,§`"x§.§1!B§);
         §`"x§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         §-#+§.§6!§.§<"k§();
         var _loc4_:§+$"§;
         (_loc4_ = new §+$"§()).currency = "IVC";
         _loc4_.§ #5§ = §"G§.§6!@§;
         _loc4_.screen = §`"x§.§1!B§;
         _loc4_.amount = param2;
         _loc4_.§2>§ = § try§.§]!&§;
         _loc4_.itemType = §"G§.§6!@§;
         § try§.§!!t§().§ #D§(false,_loc4_.itemType,_loc4_.amount,_loc4_.§2>§,_loc4_.screen,_loc4_.level,_loc4_.itemType,_loc4_.§ #5§,_loc4_.§7#?§,_loc4_.currency,_loc4_.§0"q§);
      }
      
      private function §if§() : void
      {
         §#"8§(dataModel).§6!Z§.§%#D§();
      }
      
      protected function §;"'§() : void
      {
         var _loc3_:Stage3D = null;
         §`m§.enabled = true;
         §`"x§.§8"J§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §`"x§.§;@§("no-stage3d");
         }
         §2#O§ = this;
         §`"x§.§"<§(§`m§.§4!s§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§-!X§();
         §!"p§.addEventListener(§+N§.§2#k§,this.§+"X§);
         §!"p§.addEventListener(§?"<§.§,"9§,this.§;E§);
         §!"p§.addEventListener(§?"<§.§9#T§,this.§#%§);
      }
      
      protected function §-!X§() : void
      {
         this.§]#h§ = new §1$&§("");
         this.§]#h§.start();
      }
      
      private function get accessToken() : String
      {
         return § "?§("accessToken") || this.§7!,§;
      }
      
      private function §+"X§(param1:§+N§) : void
      {
         §`"x§.§<#s§(param1.§ ,§,param1.errorID);
      }
      
      private function §;E§(param1:§?"<§) : void
      {
         §`"x§.§ ";§(param1.§ ,§);
      }
      
      private function §#%§(param1:§?"<§) : void
      {
         §`"x§.§`!u§(param1.§ ,§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §5$%§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §&"+§.§6!§.§5#D§(_loc2_);
         }
      }
      
      private function §["T§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§<T§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§8c§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§]"$§.NORMAL,§^"U§.DEFAULT,false);
               _loc2_.addEventListener(§&b§.§#!E§,this.§%$!§,false,0,true);
               _loc2_.§^"7§();
            }
         }
      }
      
      protected function §%$!§(param1:§&b§) : void
      {
         var _loc2_:§%#;§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§]"$§.NORMAL,§^"U§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §="p§.§+@§(§'!+§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §="p§.§+@§(§0$=§);
         this.§&"f§(_loc2_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §="p§.§+@§(§""d§);
         this.§&"f§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §="p§.§+@§(§;;§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers","Powerup_Velocity_Multipliers","Material_Damage_Factor_Limits"];
         this.§&"f§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§2!F§();
      }
      
      protected function §2!F§() : void
      {
         this.§^#9§.§4#7§(§6#I§.§#!§(this.§2$B§.§>!6§(§+!#§,"chaptertournament")),§6#I§.§#!§(this.§2$B§.§>!6§("frommobile.lua","chaptertournament")),§6#I§.§#!§(this.§2$B§.§>!6§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§2$B§.§!$7§)
         {
            this.§^#9§.§&"U§(this.§2$B§.§'!#§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §="p§.§+@§(§#!l§);
         this.§&"f§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §^K§() : void
      {
         if(stage.loaderInfo.url.indexOf("angrybirds-facebook-dev") > -1 || stage.loaderInfo.url.indexOf("angrybirds-friends-new-feature") > -1)
         {
            §]"[§ = §%#X§;
         }
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §`"x§.§4!w§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §`"x§.§4!w§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §`"x§.§4!w§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§'#k§,"Did not receive a facebook user ID.\nError code: " + §[$-§.§,#7§));
         }
         §2#Q§.accessToken = this.accessToken;
         this.§>!Q§ = new §[">§(stage.loaderInfo.parameters.accessToken || this.§7!,§);
         var _loc5_:String = §@!5§.§1"Y§;
         this.§9!b§ = "https://" + _loc5_ + ".rovio.com";
         if(stage.loaderInfo.parameters.analyticsUrl)
         {
            this.§9!b§ = stage.loaderInfo.parameters.analyticsUrl;
            if(this.§9!b§.indexOf(§@!5§.§<"4§) != -1)
            {
               _loc5_ = §@!5§.§<"4§;
            }
            else if(this.§9!b§.indexOf(§@!5§.§5!E§) != -1)
            {
               _loc5_ = §@!5§.§5!E§;
            }
            else
            {
               _loc5_ = §@!5§.§1"Y§;
            }
         }
         this.§[#L§ = stage.loaderInfo.parameters.userId;
         this.§<u§.§@!o§ = new §'#1§(_loc1_,_loc2_,_loc5_);
         this.§<u§.§@!o§.§=E§();
         § #$§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§<u§.§@!o§);
      }
      
      public function §[I§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §&#e§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§;"'§();
         super.initialize();
         §[!j§ = stage.loaderInfo.parameters.levelId;
         §5!s§.addEventListener(Event.INIT,this.§@!Y§);
         §5!s§.addEventListener(Event.COMPLETE,this.§!#U§);
         §-#+§.§6!§.§2! §(mLevelManager);
         this.§^K§();
         this.§1"g§();
         §,7§(false);
         §^!K§.addCallback("purchaseComplete",this.§8#d§);
         §^!K§.addCallback("purchaseFailed",this.§[1§);
         §^!K§.addCallback("giftsSentToUsers",this.§5$%§);
         §^!K§.addCallback("onUrl",this.§["T§);
         ExternalInterface.call("trapMouse","if (window.addEventListener) window.addEventListener(\'DOMMouseScroll\', handleWheelEvent, false); window.onmousewheel = document.onmousewheel = handleWheelEvent; function handleWheelEvent(e){e.preventDefault();}");
         this.§1"3§();
         this.§^o§();
      }
      
      private function §]#$§() : void
      {
         this.§]v§ = new §3!2§();
         (this.§]v§ as §3!2§).addEventListener(Event.COMPLETE,this.§&J§);
         this.§]v§.§"D§();
      }
      
      private function §&J§(param1:Event) : void
      {
         var _loc3_:§6#X§ = null;
         var _loc4_:§%#;§ = null;
         var _loc5_:§%#;§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§]v§.§%"=§)
         {
            if(_loc3_.§%#9§)
            {
               _loc5_ = new §>"B§(§]"$§.NORMAL,§^"U§.§""H§);
               _loc4_ = new §8#j§(§]"$§.NORMAL,§^"U§.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §-"'§(§]"$§.NORMAL,§^"U§.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§]v§.§"" §(_loc2_);
         }
      }
      
      private function §1"3§() : void
      {
         var _loc1_:String = this.§[#L§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§ try§ = § try§.§!!t§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§9!b§ && this.§9!b§.indexOf("https://") == -1)
         {
            this.§9!b§ = "https://" + this.§9!b§;
         }
         _loc3_.analyticsUrl = this.§9!b§;
      }
      
      private function §^o§() : void
      {
         §6#P§.§4# §();
      }
      
      private function §8#d§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            §-#+§.§6!§.§<"k§(param2 > 0);
         }
      }
      
      private function §[1§() : void
      {
         CoinShopPopup.§@"h§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§^!7§();
         }
      }
      
      protected function §1"g§() : void
      {
         this.§8#O§ = new §<"t§(new §8`§());
      }
      
      public function §3!S§() : §8`§
      {
         return this.§8#O§.§7$,§;
      }
      
      protected function §,W§() : void
      {
         this.§^"!§ = new §]!4§(§""`§,SERVER_ROOT,(§#A§.userProgress as §##>§).userID,this.§<#C§);
         this.§5!#§.addChild(this.§^"!§);
         this.§^"!§.height = stage.stageHeight;
         this.§^"!§.x = stage.stageWidth - 180;
         this.§^"!§.addEventListener(§=Z§.§[V§,this.§[!e§);
         this.§^"!§.addEventListener(§=Z§.§@#m§,this.§@$>§);
         this.§^"!§.addEventListener(§=Z§.§>#T§,this.§`""§);
         this.§^"!§.addEventListener(§=Z§.§#!B§,this.§0e§);
         this.§^"!§.addEventListener(§=Z§.§0#-§,this.§+"m§);
         this.§^"!§.addEventListener(§=Z§.§?q§,this.§@" §);
         this.§^"!§.addEventListener(§=Z§.§4#=§,this.§&"1§);
         this.§^"!§.addEventListener(§=Z§.§#k§,this.§<"K§);
         this.§^"!§.addEventListener(§=Z§.BRAG,this.§8!a§);
         this.§^"!§.addEventListener(§=Z§.PLAY_LEVEL,this.§1$B§);
         this.§^"!§.addEventListener(§=Z§.§&$0§,this.§0$#§);
         this.§=!$§ = new InviteFriendsPopup(§]"$§.NORMAL,§^"U§.DEFAULT);
         this.§=!$§.addEventListener(§=Z§.§[V§,this.§[!e§);
         this.§=!$§.addEventListener(§=Z§.§%#g§,this.§6Q§);
         this.§="<§ = null;
      }
      
      protected function §0$#§(param1:Event) : void
      {
         var _loc2_:§%#;§ = new §=T§(§]"$§.NORMAL,§^"U§.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §@!Y§(param1:Event) : void
      {
         §4!+§.§7#L§(false);
      }
      
      protected function §!#U§(param1:Event) : void
      {
         §4!+§.§7#L§(true);
      }
      
      public function §]!0§(param1:int, param2:Array = null) : void
      {
         this.§^"!§.§3"v§(param1,param2);
      }
      
      public function §+#T§(param1:String) : void
      {
         this.§^"!§.§2!b§(param1);
      }
      
      public function §5!!§(param1:String) : void
      {
         this.§^"!§.§>"p§(param1);
         this.§^"!§.§2!b§(param1);
      }
      
      override protected function initializeLevelMain() : §%!q§
      {
         return new §2$2§(stage,§<"a§,§5m§,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §8W§
      {
         return new §[#O§();
      }
      
      override protected function initializeLevelThemeManager() : §'!W§
      {
         return new §]N§();
      }
      
      override protected function initializeDataModel() : void
      {
         §#A§ = new §#"8§();
      }
      
      override protected function initializeLevelManager() : §8=§
      {
         return new §?!0§();
      }
      
      override protected function initializePackageManager() : §2!2§
      {
         return new §?#2§(mLevelManager,§[t§(§<"a§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §#A§.userProgress = new §##>§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §,#Z§(new §4<§(mLevelManager,§[t§(§<"a§),§+U§,false));
         §,#Z§(new § for§(mLevelManager,§+U§,false));
         §,#Z§(new §>"c§(mLevelManager,§+U§,false));
         §,#Z§(new §>$<§(mLevelManager,§+U§,false));
         §,#Z§(new §false§(mLevelManager,§+U§,false));
         §,#Z§(new §6!+§(mLevelManager,§+U§,false));
         §,#Z§(new §0"U§(mLevelManager,§+U§,false));
         §,#Z§(new §3P§(mLevelManager,§+U§,false));
         §,#Z§(new §`i§(mLevelManager,§+U§,false));
         §,#Z§(new §`"^§(mLevelManager,§+U§,false));
         §,#Z§(new §7$§(mLevelManager,§+U§,false));
         §,#Z§(new § !v§(mLevelManager,§+U§,false));
         §,#Z§(new §>N§(mLevelManager,§+U§,false));
         §,#Z§(new §3#t§(mLevelManager,§+U§,false));
         §,#Z§(new §1#h§(mLevelManager,§+U§,false));
         §,#Z§(new §=!V§(mLevelManager,§+U§,false));
         §,#Z§(new §+y§(mLevelManager,§[t§(§<"a§),§+U§,false));
         §,#Z§(new §0"h§(mLevelManager,§+U§,false));
         §,#Z§(new §=!L§(mLevelManager,§+U§,false));
         §,#Z§(new §"#&§(mLevelManager,§+U§));
         §,#Z§(new StateLastWeeksTournamentResults(mLevelManager,§+U§,false));
         §,#Z§(new §0#I§(mLevelManager,§+U§,false));
         §,#Z§(new StateTournamentResults(mLevelManager,false,§+U§));
      }
      
      override protected function createStateObject(param1:Class) : §`#@§
      {
         if(param1 == §+y§)
         {
            return new param1(mLevelManager,§[t§(§<"a§),§+U§);
         }
         return new param1(mLevelManager,§+U§);
      }
      
      public function §8"A§() : void
      {
         mLevelManager.selectEpisode(6);
         §1"h§(§>N§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §!@§ = new MovieClip();
         §2D§.stage.addChild(§!@§);
         §0"#§ = new §+"U§(§!@§,§+U§,this);
         §0"#§.addEventListener(§8#F§.OPEN,§?>§);
         §0"#§.addEventListener(§8#F§.CLOSE,§!#-§);
         §]!§ = new §]i§(§0"#§,§#A§,§>9§.§1$A§,new §]$9§(),new §6"q§());
         §0"#§.addLayer(§]"$§.NORMAL,true,new Rectangle(0,0,0,0));
         §0"#§.addLayer(§]"$§.INFO,true,new Rectangle(0,0,0,0));
         §0"#§.addLayer(§]"$§.§[#=§,true,new Rectangle(0,0,0,0));
         §0"#§.addLayer(§]"$§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §^#H§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §`"x§.§4!w§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         §#!I§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,"");
         return new §%$2§(§+U§,true,§^#H§.STATE_NAME,getMinLoadingScreenTime(),"","");
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc4_:String = null;
         §6!&§ = true;
         var _loc2_:String = §>"c§.STATE_NAME;
         if(§[!j§)
         {
            if(§[!j§.indexOf("2000-") > -1)
            {
               _loc2_ = §=!L§.STATE_NAME;
            }
            else if(§5#"§.§+6§(§5#"§.§!#$§) == §5#"§.§2"r§)
            {
               _loc2_ = §>"c§.STATE_NAME;
               §[!j§ = null;
            }
            else
            {
               §5`§.§6!§.§9E§();
               if((_loc4_ = mLevelManager.getValidLevelId(§[!j§)) != §[!j§)
               {
                  §`"x§.§,z§(§[!j§);
               }
               §[!j§ = null;
               if(§#A§.userProgress.isLevelOpen(_loc4_))
               {
                  this.§]!0§(§]!4§.§0"7§);
                  this.§&#!§(_loc4_);
                  _loc2_ = null;
               }
               else
               {
                  _loc2_ = §>$<§.STATE_NAME;
               }
            }
         }
         var _loc3_:String = § "?§("fb_source");
         if(_loc3_ && _loc3_ != "null")
         {
            § try§.§!!t§().§@$A§(_loc3_,"");
         }
         if(_loc2_)
         {
            §1"h§(_loc2_);
         }
      }
      
      public function §&#!§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §1"h§(§3#t§.STATE_NAME);
         }
         else
         {
            §1"h§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§<T§ = true;
         this.§,#y§();
      }
      
      protected function §;"7§() : void
      {
         super.setFirstGameState();
      }
      
      public function §,#y§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§%#;§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§1"V§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§<T§ || !§9"C§)
         {
            return;
         }
         this.§;"7§();
         §5`§.§6!§.§2! §(mLevelManager);
         §5`§.§6!§.addEventListener(§1#e§.§<##§,this.§3!j§);
         §2#s§.§6!§.addEventListener(§7#U§.§#!b§,this.§0W§);
         §="@§.§[#Y§ = new §4$6§();
         §="@§.§[#Y§.§]f§();
         this.§,W§();
         §8#,§.§6!§.init(popupManager);
         if(!§2#s§.§6!§.active)
         {
            if(TournamentResultsPopup.§6!v§)
            {
               _loc2_ = new TournamentResultsPopup(§]"$§.NORMAL,§^"U§.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§5`§.§6!§.tournamentRules && §5`§.§6!§.tournamentRules.§="7§)
         {
            _loc3_ = §5`§.§6!§.tournamentRules.§="7§;
            _loc2_ = new _loc3_(§]"$§);
            popupManager.openPopup(_loc2_);
         }
         §5`§.§6!§.addEventListener(§1#e§.§7+§,this.§`"V§);
         §5`§.§6!§.addEventListener(§1#e§.§]!<§,this.§1$?§);
         §5`§.§6!§.addEventListener(§1#e§.§="2§,this.§-K§);
         if(GiftInboxPopup.§9" §)
         {
            _loc2_ = new GiftInboxPopup(§]"$§.NORMAL,§^"U§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§-#+§.§6!§.§0!,§.§9#w§(§+!c§.§]#!§))
         {
            popupManager.openPopup(new §8#h§(§]"$§.NORMAL,§^"U§.DEFAULT));
         }
         this.§^#-§ = new §?$"§();
         this.§^#-§.§4!J§();
         this.§^&§ = new Vector.<§1"V§>();
         for each(_loc1_ in §-#+§.§6!§.§0!,§.claimableBundles)
         {
            if(§-#+§.§6!§.§0!,§.§9#w§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §[!I§.§[#C§.definition.toUpperCase():
                     popupManager.openPopup(new §"#9§(§]"$§.NORMAL,§^"U§.DEFAULT,§[!I§.§[#C§));
               }
               for each(_loc4_ in §6#1§.§[#9§)
               {
                  if(_loc4_[§6#1§.§3!>§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §6#1§(_loc4_[§6#1§.§3!>§],§6#1§.§[[§));
                     (_loc5_ = new §1"V§()).addEventListener(Event.COMPLETE,this.§9!U§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§%a§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§%a§);
                     _loc5_.addEventListener(§;m§.§!$5§,this.§%a§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§^&§.push(_loc5_);
                     (_loc6_ = §["0§.§ G§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§6#1§.§3!>§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §#"8§(dataModel).§6!Z§.§%#D§();
         §#"8§(dataModel).§-!h§.slingshots;
         this.§]#$§();
         if(§#"8§(dataModel).§3S§.§8R§)
         {
            §#"8§(dataModel).§3S§.addEventListener(Event.COMPLETE,this.§%"p§);
         }
         else
         {
            this.§%"p§(null);
         }
      }
      
      private function §1$?§(param1:§1#e§) : void
      {
         var blueprintItems:Array = null;
         var blueprintPackageLoader:§%6§ = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§1#e§ = param1;
         if(event.data.bluePrintPackLoader)
         {
            blueprintItems = this.§^#9§.§ #>§();
            blueprintPackageLoader = §%6§(event.data.bluePrintPackLoader);
            if(blueprintPackageLoader.§?[§)
            {
               §3#U§.§^#j§(blueprintPackageLoader.§?[§,blueprintItems);
            }
            return;
         }
         var packageLoader:§%6§ = §%6§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §5`§.§6!§.brandedTournamentAssetId;
         var backgroundFileName:String = "background.xml";
         var backgroundLoadedFromXML:Boolean = false;
         if(packageLoader.§7"t§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§>!6§(backgroundFileName,packName));
            §5m§.loadBackgroundXML(backgroundData);
            backgroundLoadedFromXML = true;
         }
         if(packageLoader.§7"t§(§+!#§,packName))
         {
            try
            {
               luaObject = §6#I§.§#!§(packageLoader.§>!6§(§+!#§,packName));
               this.§[#Z§(luaObject);
               items = this.§^#9§.§[r§(luaObject);
               if(luaObject.linkButton)
               {
                  §6#P§.§#$ §(§5`§.§6!§.brandedTournamentAssetId,luaObject.linkButton);
               }
               if(!backgroundLoadedFromXML && luaObject.dynamicBlocks)
               {
                  (§5m§ as §]N§).§="s§(luaObject.dynamicBlocks.themes,§5`§.§6!§.brandedTournamentAssetId);
               }
               fn = function(param1:Event):void
               {
                  cb();
               };
               if(packageLoader.§?[§)
               {
                  §3#U§.§^#j§(packageLoader.§?[§,items,fn);
               }
            }
            catch(e:Error)
            {
               AngryBirdsBase.singleton.popupManager.openPopup(new ErrorPopup(ErrorPopup.§'#k§,"Tournament brand error: " + e.name + "\n" + e.errorID + "\n" + e.message));
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §[#Z§(param1:Object) : void
      {
         §5`§.§6!§.§1$2§ = param1.shareButton;
      }
      
      protected function §`"V§(param1:§1#e§) : void
      {
         if(this.§^#9§ && !§'^§)
         {
            §'^§ = true;
            §<!#§ = true;
            this.§^#9§.§^!3§(§5`§.§6!§.brandedTournamentAssetId);
         }
         var _loc2_:§-"Z§ = §5`§.§6!§.tournamentRules;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§7"4§;
         if(§!"f§.§?"G§(_loc3_))
         {
            this.§8#O§.§?#V§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §?!,§() : void
      {
         if(this.§^#9§)
         {
            this.§^#9§.§^!3§();
            §'^§ = false;
         }
      }
      
      protected function § #^§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§]"$§.NORMAL,§^"U§.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function §3!j§(param1:Event) : void
      {
         this.§;l§[§6"g§] = true;
         this.§;l§[§>!<§] = true;
         this.§;"n§();
      }
      
      protected function §0W§(param1:Event) : void
      {
         this.§;l§[§6"g§] = true;
         this.§;l§[§>!<§] = true;
         this.§;"n§();
      }
      
      private function §;"n§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§%#;§ = null;
         for each(_loc1_ in this.§;l§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§8#F§.CLOSE,this.§[%§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§;l§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§`$?§();
         if(_loc3_)
         {
            §,A§.§""`§.§?g§(§5`§.§6!§.levelIDs);
            if(!§2#s§.§6!§.active)
            {
               this.§ #^§();
            }
         }
      }
      
      private function §[%§(param1:§8#F§) : void
      {
         this.§;"n§();
      }
      
      protected function §`F§(param1:§+""§) : void
      {
         var _loc2_:§%#;§ = null;
         if(DailyRewardPopup.§6b§)
         {
            _loc2_ = new DailyRewardPopup(§]"$§.NORMAL,§^"U§.TOP,TournamentResultsPopup.§6!v§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function §%"p§(param1:Event) : void
      {
         var _loc2_:Object = §#"8§(AngryBirdsBase.singleton.dataModel).§3S§.§ ""§(§4#G§.§[!^§);
         if(_loc2_)
         {
            §,7§(_loc2_[0]);
         }
         else
         {
            §,7§(true);
         }
         this.§^"!§.§&#;§();
         var _loc3_:Object = §#"8§(AngryBirdsBase.singleton.dataModel).§3S§.§ ""§(§4#G§.§+!n§);
         if(_loc3_)
         {
            if(§2#s§.§6!§.active && _loc3_[0] == §]!4§.§&#q§)
            {
               this.§^"!§.§95§(§]!4§.§&#W§);
            }
            else
            {
               this.§^"!§.§95§(§]!4§.§0!c§);
            }
         }
         this.§!I§(null);
         if(this.§["s§)
         {
            if(!§#"8§(AngryBirdsBase.singleton.dataModel).§3S§.§<#x§(this.§["s§.§[!k§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§["s§);
               §#"8§(AngryBirdsBase.singleton.dataModel).§3S§.§&"E§(§4#G§.§<"9§,[this.§["s§.§[!k§()]);
            }
            else
            {
               this.§["s§ = null;
            }
         }
      }
      
      private function §!I§(param1:Event) : void
      {
         §#"8§(dataModel).§3S§.removeEventListener(Event.COMPLETE,this.§!I§);
         §#"8§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§!I§);
         if(§#"8§(dataModel).currencyModel.§]!%§)
         {
            §#"8§(dataModel).§-!h§.§6"s§();
            §#"8§(dataModel).§3"R§.loadItems();
         }
         else
         {
            §#"8§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§!I§);
         }
      }
      
      protected function §-K§(param1:Event) : void
      {
         this.§"#p§ = setInterval(this.§-#V§,1000);
      }
      
      private function §-#V§() : void
      {
         if(!§5`§.§6!§.§5#&§ && §5`§.§6!§.§]#M§() <= 0)
         {
            §5`§.§6!§.§,§();
            §5`§.§6!§.§5#&§ = true;
            §2#s§.§6!§.§>!J§();
            §+"0§.§@#`§ = new Array();
            §'^§ = false;
            (dataModel as §#"8§).§-!h§.§]"f§();
            if(!§-#+§.§6!§.§8R§)
            {
               §-#+§.§6!§.§<"k§();
            }
            if(§5`§.§6!§.§"!^§)
            {
               §5`§.§6!§.§"!^§.brandedTournamentAssetId = null;
            }
            §1"@§ = true;
         }
         clearInterval(this.§"#p§);
      }
      
      public function §0"s§(param1:Object) : void
      {
         if(!§""`§)
         {
            §""`§ = new §!"&§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as §##>§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as §##>§).userName);
         }
         §""`§.injectData(param1);
         var _loc2_:int = §4"I§.§2"!§();
         if(_loc2_ >= 0)
         {
            §`"x§.§="C§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:int = param1;
         if(this.§^"!§)
         {
            param1 -= 180;
            this.§^"!§.x = param1;
            this.§^"!§.height = param2;
         }
         super.resizeViews(param1,param2,param3);
         this.§"r§(_loc4_,param2);
      }
      
      public function §"r§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §&"f§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §[!e§(param1:§=Z§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            § try§.§!!t§().§%#s§(_loc5_,_loc4_);
            §^!K§.§+"D§("updateSessionToken",§!"j§.§-J§);
            §^!K§.§+"D§("flashInviteFriendsHandler",_loc3_,_loc2_,§9=§.§2#p§(§9=§.INVITE));
         }
         else
         {
            §`"x§.§0!G§();
            popupManager.openPopup(this.§=!$§);
         }
      }
      
      protected function §6Q§(param1:§=Z§) : void
      {
         if(param1.data != null)
         {
            this.§9"x§.§^"1§(param1.data);
         }
      }
      
      protected function §@$>§(param1:§=Z§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§]"$§.NORMAL,§^"U§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§8#F§.§^$4§,this.§]#t§);
      }
      
      protected function §`""§(param1:§=Z§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§]"$§.NORMAL,§^"U§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§8#F§.§^$4§,this.§1"e§);
      }
      
      protected function §1"e§(param1:Event) : void
      {
         this.§^"!§.§5#v§(§#"8§(dataModel).§#"%§);
      }
      
      protected function §]#t§(param1:Event) : void
      {
         this.§"#v§();
      }
      
      public function §"#v§() : void
      {
         this.§^"!§.§+#w§();
      }
      
      protected function §0e§(param1:Event) : void
      {
         §5#p§();
      }
      
      protected function §+"m§(param1:§=Z§) : void
      {
         § "n§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §@" §(param1:§=Z§) : void
      {
         if(§ "n§ is StatePlay)
         {
            StatePlay(§ "n§).showTutorials();
         }
      }
      
      protected function §<"K§(param1:§=Z§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§]"$§.NORMAL,§^"U§.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §8!a§(param1:§=Z§) : void
      {
         var _loc2_:§3#5§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:int = 0;
         if(!this.§="<§)
         {
            this.§="<§ = new Timer(1000);
            this.§="<§.addEventListener(TimerEvent.TIMER,this.§%#8§);
            this.§="<§.start();
            exitFullScreen();
            _loc2_ = param1.data as §3#5§;
            _loc3_ = _loc2_.§2"e§.rank - 1;
            §`"x§.§&$&§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §?!0§(mLevelManager).§7#J§(_loc4_);
            if((_loc7_ = §5`§.§6!§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§5`§.§6!§.§?<§(_loc4_));
            }
            §^!K§.§+"D§("updateSessionToken",§!"j§.§-J§);
            §^!K§.§+"D§("flashBrag",_loc2_.§2"e§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§9=§.§2#p§(§9=§.BRAG));
         }
      }
      
      private function §%#8§(param1:TimerEvent) : void
      {
         if(this.§="<§)
         {
            this.§="<§.stop();
            this.§="<§.removeEventListener(TimerEvent.TIMER,this.§%#8§);
            this.§="<§ = null;
         }
      }
      
      protected function §1$B§(param1:§=Z§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §`"x§.§,z§(_loc2_);
         }
         if(§#A§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §1"h§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §&"1§(param1:§=Z§) : void
      {
         var musicManager:§8`§ = null;
         var mySO:SharedObject = null;
         var e:§=Z§ = param1;
         §,7§(!§5!p§());
         if(§5!p§())
         {
            if(§ Y§() == StatePlay.STATE_NAME)
            {
               if(!§3#U§.isPaused)
               {
                  §3#U§.§#$4§.background.playAmbientSound();
               }
            }
            else if(this.§["3§())
            {
               musicManager = §,A§.§2#O§.§3!S§();
               musicManager.§<$8§(§<"t§.§,"_§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§5!F§,§-d§);
            mySO.data.useSounds = §^#>§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §-#Y§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§#A§.userProgress as §##>§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§%"]§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§5`§.§6!§ && §5`§.§6!§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §5`§.§6!§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §5`§.§6!§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§#A§.userProgress as §##>§).§="1§(param1,_loc4_.rankAfterUpdate);
         }
         if(§2#s§.§6!§.active)
         {
            if(_loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank)
            {
               (§#A§.userProgress as §##>§).§+#9§(param1,_loc4_.leagueRankAfterUpdate);
               return true;
            }
            return false;
         }
         return false;
      }
      
      public function §%o§(param1:String) : void
      {
         var _loc2_:int = §#A§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §#A§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §#A§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§%"]§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§#A§.userProgress as §##>§).§>#+§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §%"]§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§9"x§.§#!G§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §9"x§() : §]!4§
      {
         return this.§^"!§;
      }
      
      public function get §%#@§() : §1$&§
      {
         return this.§]#h§;
      }
      
      public function §[#g§() : void
      {
         if(this.§]#h§)
         {
            this.§]#h§.§-#8§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + §8!l§ + " " + §,4§;
      }
      
      public function §!3§() : String
      {
         return §`"x§.§ #w§;
      }
      
      public function §0'§() : String
      {
         return §`m§.§3!W§;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §`"x§.§"<§(§`m§.§3!W§,_loc1_.toString(),_loc1_);
         §`"x§.trackPageView(this,§`m§.§3!W§);
         this.§<T§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§<$+§)
         {
            this.§<$+§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§<$+§ += String.fromCharCode(param1.keyCode);
         }
         this.§<$+§ = this.§<$+§.toLowerCase();
         if(this.§<$+§.length > 15)
         {
            this.§<$+§ = this.§<$+§.substr(1);
         }
      }
      
      public function get §7#M§() : §?$"§
      {
         return this.§^#-§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §^#9§() : §[#O§
      {
         return §[#O§(§<"a§);
      }
      
      protected function get §2$B§() : §?#2§
      {
         return §?#2§(§57§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return §<"t§.§,"_§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§8`§ = null;
         if(§<!#§)
         {
            if(this.§["3§())
            {
               _loc1_ = §,A§.§2#O§.§3!S§();
               _loc1_.§"$;§(§<"t§.§,"_§);
            }
            this.§@"§ = false;
         }
         else
         {
            this.§@"§ = true;
         }
      }
      
      private function §7!l§() : Boolean
      {
         var _loc1_:§0!p§ = §!"p§.§;!b§("Channel_Theme");
         return _loc1_.§3$§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§^#p§ = null;
         var _loc1_:§0!p§ = §!"p§.§;!b§("Channel_Theme");
         if(_loc1_.§3$§ > 0)
         {
            _loc2_ = _loc1_.§,U§(0);
            this.§3!S§().§^#3§(_loc2_.§5$<§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get §[$4§() : §[">§
      {
         return this.§>!Q§;
      }
      
      public function get §<u§() : §#"8§
      {
         return §#"8§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§5!u§(param1);
         }
         return _loc2_;
      }
      
      public function §5!u§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < § #B§.length)
         {
            if(§ #B§[_loc2_][0] == param1)
            {
               this.§;#!§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §<!s§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = § #B§[this.§;#!§][0];
         _loc1_.screenName = § #B§[this.§;#!§][1];
         return _loc1_;
      }
      
      private function §9!U§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§^&§.length)
            {
               if(this.§^&§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§^&§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§^&§.length == 0)
         {
            §-#+§.§6!§.§<"k§();
         }
      }
      
      private function §%a§(param1:ErrorEvent) : void
      {
         §6Y§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function § !a§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§]"$§.NORMAL,§^"U§.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§!"0§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§2!V§.§5g§,this.§6_§);
         if(this.§<T§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§["s§ = _loc3_;
         }
      }
      
      private function §6_§(param1:§2!V§) : void
      {
         §`"x§.§%!K§();
         AngryBirdsBase.singleton.exitFullScreen();
         §^!K§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §^!K§.§+"D§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         § try§.§!!t§().§-!q§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§["s§)
         {
            this.§["s§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         §^!K§.§,"i§("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §]!4§.§>$1§ = param1 == "true";
         if(§]!4§.§>$1§)
         {
            this.§]!0§(§]!4§.§=C§);
            § #$§.§@&§();
         }
      }
      
      public function §6"3§() : void
      {
         this.§ "g§ = new Timer(this.§<u§.§@!o§.expiresIn * 1000,1);
         this.§ "g§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§"!-§);
         this.§ "g§.start();
      }
      
      private function §"!-§(param1:TimerEvent) : void
      {
         this.§ "g§.stop();
         this.§ "g§ = null;
         this.§<u§.§@!o§.§=E§();
      }
      
      public function §-"f§() : §!#R§
      {
         if(this.§4!L§ == null)
         {
            this.§4!L§ = new §4"P§(mLevelManager);
         }
         return this.§4!L§;
      }
      
      override public function onEnterFrame(param1:Event) : void
      {
         super.onEnterFrame(param1);
         §1!l§.§6!§.§-x§();
         §`"O§.§6!§.§[z§();
         if(this.§@"§)
         {
            this.playThemeMusic();
         }
      }
      
      private function §["3§() : Boolean
      {
         switch(§ Y§())
         {
            case §>$<§.STATE_NAME:
            case §1S§.STATE_NAME:
            case § !K§.STATE_NAME:
            case §>"c§.STATE_NAME:
            case §>N§.STATE_NAME:
            case § !v§.STATE_NAME:
            case §=!L§.STATE_NAME:
            case §"#&§.STATE_NAME:
            case §2"w§.STATE_NAME:
            case StateTournamentResults.STATE_NAME:
               return true;
            default:
               return false;
         }
      }
   }
}
