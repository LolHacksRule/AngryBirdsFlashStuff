package
{
   import § "x§.§""!§;
   import § "x§.§0"T§;
   import § "x§.§@#F§;
   import §!!G§.§0§;
   import §!x§.§4"d§;
   import §!x§.§?!Q§;
   import §"!U§.TabbedShopPopup;
   import §#v§.§#!?§;
   import §#v§.§6^§;
   import §%$!§.§!#$§;
   import §%$!§.§%!v§;
   import §%$!§.§%#I§;
   import §%$!§.§%h§;
   import §%$!§.§+3§;
   import §%$!§.§0"F§;
   import §%$!§.§1#`§;
   import §%$!§.§2#§;
   import §%$!§.§=]§;
   import §'"-§.§'$4§;
   import §'$%§.TournamentResultsPopup;
   import §+!u§.§]8§;
   import §+"%§.§6X§;
   import §+#m§.§4b§;
   import §,!=§.§ #-§;
   import §,!=§.§!!]§;
   import §,!=§.§!a§;
   import §,!=§.§"$6§;
   import §,!=§.§'=§;
   import §,!=§.§,"M§;
   import §,!=§.§,#?§;
   import §,!=§.§-!1§;
   import §,!=§.§5#J§;
   import §,!=§.§5d§;
   import §,!=§.§9!"§;
   import §,!=§.§;#N§;
   import §,!=§.§<!B§;
   import §,!=§.§=!-§;
   import §,!=§.§=#Z§;
   import §,!=§.StateCutScene;
   import §,!=§.StatePlay;
   import §,!=§.§[!'§;
   import §,n§.§+!f§;
   import §,n§.§3§;
   import §,n§.§^;§;
   import §-"i§.§%!'§;
   import §-"i§.§4"X§;
   import §-"i§.§5!o§;
   import §-"i§.§50§;
   import §-"i§.§6#A§;
   import §-"i§.§;"§;
   import §-"i§.StateLastWeeksTournamentResults;
   import §-"i§.StateTournamentResults;
   import §-"i§.§^"A§;
   import §-#z§.§&!3§;
   import §-#z§.§0#p§;
   import §-#z§.§[@§;
   import §0#d§.§<#u§;
   import §1"0§.§4$#§;
   import §2!X§.§<#_§;
   import §2$$§.§`"E§;
   import §2V§.§%#E§;
   import §2V§.§'$-§;
   import §2V§.§+" §;
   import §2V§.§,"e§;
   import §3!B§.§9##§;
   import §4q§.§!#Q§;
   import §5!d§.§8"k§;
   import §5"$§.§"#E§;
   import §5"$§.§]!m§;
   import §52§.§#!,§;
   import §52§.§#%§;
   import §7"A§.§!l§;
   import §7g§.§4!q§;
   import §7z§.§7"m§;
   import §8§.§ ;§;
   import §8§.§#$+§;
   import §8§.§,#`§;
   import §8§.§,S§;
   import §8§.§7#!§;
   import §8§.§@!"§;
   import §8§.§[!9§;
   import §9!s§.§!#d§;
   import §9"#§.§4$5§;
   import §9"#§.§;"m§;
   import §;!H§.§<!K§;
   import §;!Q§.§-q§;
   import §;!Q§.§7B§;
   import §;"z§.§'#b§;
   import §;4§.§2!]§;
   import §;4§.§9X§;
   import §<!'§.§-"$§;
   import §<!g§.§&$1§;
   import §<"_§.§?!B§;
   import §<H§.§#"L§;
   import §<H§.§1"T§;
   import §<H§.§?!z§;
   import §>!#§.§ #"§;
   import §>!#§.§ 1§;
   import §>!#§.§%e§;
   import §>!#§.§,"W§;
   import §>!#§.§-#A§;
   import §>!#§.§1""§;
   import §>!#§.§3!7§;
   import §>!#§.§;-§;
   import §>!#§.§@"$§;
   import §>q§.§1!_§;
   import §>q§.§3#&§;
   import §>q§.CoinShopPopup;
   import §?"R§.§,$9§;
   import §?"R§.§0!5§;
   import §?"R§.§4!w§;
   import §?"R§.AvatarCreatorPopup;
   import §?"R§.InviteFriendsPopup;
   import §?"R§.MightyEaglePromotionPopup;
   import §?"R§.NotEnoughCoinsPopup;
   import §?"R§.QuestionPopup;
   import §?"R§.QuickPurchasePopup;
   import §?"R§.§[W§;
   import §?-§.§9n§;
   import §?§.§>"$§;
   import §@"D§.§;%§;
   import §@"D§.§`"T§;
   import §@"Z§.DailyRewardPopup;
   import §@$'§.§&#%§;
   import §]$9§.§5$!§;
   import §]$9§.§9"+§;
   import §]$9§.§>#J§;
   import §]$9§.§>J§;
   import §^!,§.§ #M§;
   import §^!,§.§8!H§;
   import §^!,§.§<d§;
   import §`#?§.GiftInboxPopup;
   import §`#C§.§3Z§;
   import §`#C§.§7L§;
   import §`#C§.§9#s§;
   import com.rovio.assets.§@`§;
   import com.rovio.assets.LoadingScreen;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage3D;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.events.UncaughtErrorEvents;
   import flash.geom.Rectangle;
   import flash.net.SharedObject;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.net.URLRequestMethod;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.system.Security;
   import flash.ui.ContextMenu;
   import flash.utils.Timer;
   import flash.utils.clearInterval;
   import flash.utils.getTimer;
   import flash.utils.setInterval;
   
   public class §8G§ extends AngryBirdsBase implements § 1§, IAngryBirdsFacebook
   {
      
      public static const §`!-§:String = "r7751";
      
      public static const §4#§:String = "v2.2";
      
      public static const §6#c§:String = "http://bit.ly/playfriends";
      
      public static const §9!a§:String = "external_assets/";
      
      public static const §7"7§:String = §9!a§ + "tournaments/";
      
      public static const §0!A§:String = "packages/";
      
      public static const §=#c§:String = "tournamentJSONLevels/";
      
      private static const §?"g§:String = "AngryBirdsFacebookSettings";
      
      public static const §0#?§:String = "/";
      
      public static const §2#A§:String = "brand.lua";
      
      protected static var §4!;§:Class = § !^§;
      
      protected static var §@a§:Class = §[#l§;
      
      protected static var §5#l§:Class = §>!W§;
      
      protected static var § #$§:Class = §>#&§;
      
      protected static var §;!d§:Class = §,#l§;
      
      protected static var § 4§:Class = §?!D§;
      
      protected static var §=#A§:Class = §'#4§;
      
      public static var §6!r§:§9X§;
      
      public static var §%#S§:IAngryBirdsFacebook;
      
      private static var §+!V§:Boolean = false;
      
      public static var §,!H§:String = null;
      
      public static var §;"0§:Boolean;
      
      private static const §7#P§:int = 0;
      
      private static const §3#4§:int = 1;
      
      public static const §##6§:Array = [[§[!'§.STATE_NAME,"Main menu"],[§-!1§.STATE_NAME,"Episode selection"],[§%!'§.STATE_NAME,"Tournament level selection"],[§5#J§.STATE_NAME,"Level selection"],[§<!B§.STATE_NAME,"Level selection"],[§!a§.STATE_NAME,"Level selection"],[§4"X§.STATE_NAME,"Play state"],[StatePlay.STATE_NAME,"Play state"],[§<#u§.§=0§,"Play state"],[§<#u§.§[8§,"Pause"]];
      
      private static var §2!m§:Boolean = false;
      
      private static var §6!%§:Boolean = false;
      
      public static var §3'§:Object;
      
      private static var §%!r§:XML;
       
      
      protected var §3#B§:§<#u§;
      
      private var § "7§:InviteFriendsPopup;
      
      public var §5u§:§`"T§;
      
      private var §%K§:§;%§;
      
      private var §0"0§:String = "";
      
      private var §8#e§:§ #"§;
      
      private var §+#V§:§ ;§;
      
      private var §2#f§:Sprite;
      
      private var § +§:Boolean = false;
      
      protected var §3=§:§%e§;
      
      private var §2$!§:String;
      
      private var §2i§:String;
      
      private var §3$-§:String;
      
      private var §]D§:String;
      
      private var §^!R§:§""!§;
      
      private var §`W§:uint = 0;
      
      private var §5!>§:Array;
      
      private var §9`§:Timer;
      
      private var §#">§:QuestionPopup;
      
      private var §+#g§:int = 0;
      
      private var §##O§:Vector.<§5$!§>;
      
      private var §]!l§:Timer;
      
      private var §9!x§:§%#I§;
      
      public function §8G§(param1:§-"$§)
      {
         §>"J§ = param1.stage.loaderInfo.parameters.serverVersion || "[No version from server]";
         SERVER_ROOT = param1.stage.loaderInfo.parameters.serverRoot || (!!DEBUG_MODE_ENABLED ? "http://dev-dot-angrybirds-facebook-staging.appspot.com" : "http://angrybirds-facebook-dev.appspot.com");
         this.§7!g§();
         §>"$§.DEBUG_MODE_ENABLED = false;
         §4b§.§]#q§ = true;
         this.§;"E§(SERVER_ROOT,param1.loaderInfo.uncaughtErrorEvents,§`!-§,param1.stage.loaderInfo.parameters.userId || this.§2$!§);
         this.§%r§();
         param1.stage.addChild(this.§2#f§ = new Sprite());
         super(param1,§>"J§,SERVER_ROOT);
         this.§3=§.§#$§(mLevelManager);
         this.§3=§.§1"_§();
         §6X§.addCallback("trialPayClosed",this.§#"1§);
         §6X§.addCallback("handleExpiredMobilePricePoints",this.§>"6§);
         §6X§.addCallback("handleUserCancelledOrder",§ #m§);
         §6X§.addCallback("orderReceived",§]!h§);
         this.§5!>§ = new Array();
         this.§5!>§[§7#P§] = false;
         this.§5!>§[§3#4§] = false;
         §;"0§ = true;
      }
      
      public static function §6i§() : String
      {
         if((AngryBirdsBase.singleton.dataModel.userProgress as §!#Q§).userID)
         {
            return §?"g§ + "-" + (AngryBirdsBase.singleton.dataModel.userProgress as §!#Q§).userID;
         }
         return null;
      }
      
      public static function get §4"`§() : §6^§
      {
         return (singleton as §8G§).§1"4§;
      }
      
      private static function § #m§() : void
      {
         CoinShopPopup.§7"M§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§,2§();
         }
         var _loc2_:QuickPurchasePopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(QuickPurchasePopup.ID) as QuickPurchasePopup;
         if(_loc2_)
         {
            _loc2_.§,2§();
         }
      }
      
      private static function §]!h§() : void
      {
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§"^§();
         }
      }
      
      public static function §]O§() : void
      {
         §+!V§ = true;
         §%#S§.§-Q§();
      }
      
      public static function §4#"§() : Boolean
      {
         if(§+!V§)
         {
            return true;
         }
         return false;
      }
      
      private function get §1"4§() : §6^§
      {
         return mLevelManager as §6^§;
      }
      
      protected function §;"E§(param1:String, param2:UncaughtErrorEvents, param3:String, param4:String) : void
      {
         this.§3=§ = new §%e§(param1,param2,param3,param4);
      }
      
      private function §7!g§() : void
      {
      }
      
      protected function §%r§() : void
      {
         var _loc1_:Loader = new Loader();
         var _loc2_:LoaderContext = new LoaderContext(false,ApplicationDomain.currentDomain);
         _loc2_.allowCodeImport = true;
         _loc1_.loadBytes(new §=#A§(),_loc2_);
      }
      
      private function §#"1§(param1:int, param2:int, param3:String = "") : void
      {
         §,"W§.§^!p§("TrialPay",param2);
         §,"W§.trackPageView(this,§,"W§.§=!b§);
         §,"W§.trackTransaction("TrialPay","In-app Shop Coins","TrialPay",param3,param2 + " x",0,param1,0);
         §%h§.§3!]§.§=L§();
         var _loc4_:§9##§;
         (_loc4_ = new §9##§()).currency = "IVC";
         _loc4_.iapType = §=]§.§;Q§;
         _loc4_.§;"O§ = §,"W§.§=!b§;
         _loc4_.amount = param2;
         _loc4_.gainType = §-#A§.§6"$§;
         _loc4_.itemType = §=]§.§;Q§;
         §-#A§.§6$2§().§]!H§(false,_loc4_.itemType,_loc4_.amount,_loc4_.gainType,_loc4_.§;"O§,_loc4_.level,_loc4_.itemType,_loc4_.iapType,_loc4_.§#!v§,_loc4_.currency,_loc4_.§'$§);
      }
      
      private function §>"6§() : void
      {
         §+3§(dataModel).§<!^§.§`!m§();
      }
      
      protected function §;!Z§() : void
      {
         var _loc3_:Stage3D = null;
         §;-§.enabled = true;
         §,"W§.§2!,§ = false;
         var _loc1_:int = 0;
         try
         {
            _loc3_ = canvas.stage.stage3Ds[0];
            if(_loc3_)
            {
               _loc1_ = 1;
            }
         }
         catch(e:Error)
         {
         }
         if(_loc1_ == 0)
         {
            §,"W§.§0#'§("no-stage3d");
         }
         §%#S§ = this;
         §,"W§.§`#f§(§;-§.§7!h§);
         var _loc2_:ContextMenu = new ContextMenu();
         _loc2_.hideBuiltInItems();
         canvas.contextMenu = _loc2_;
         this.§ #d§();
         §#$+§.addEventListener(§,S§.§7!$§,this.§=#5§);
         §#$+§.addEventListener(§[!9§.§ ^§,this.§9!e§);
         §#$+§.addEventListener(§[!9§.§<"-§,this.§!+§);
      }
      
      protected function § #d§() : void
      {
         var _loc1_:String = canvas.stage.loaderInfo.parameters.serverVersion || "";
         this.§8#e§ = new § #"§(_loc1_);
         this.§8#e§.start();
      }
      
      private function get accessToken() : String
      {
         return §["]§("accessToken") || this.§2i§;
      }
      
      private function §=#5§(param1:§,S§) : void
      {
         §,"W§.§+"H§(param1.§@!L§,param1.errorID);
      }
      
      private function §9!e§(param1:§[!9§) : void
      {
         §,"W§.§7#i§(param1.§@!L§);
      }
      
      private function §!+§(param1:§[!9§) : void
      {
         §,"W§.§?T§(param1.§@!L§);
      }
      
      override protected function getLoadingScreen() : DisplayObjectContainer
      {
         return new LoadingScreen();
      }
      
      private function §""Y§(param1:Array) : void
      {
         var _loc2_:String = null;
         if(!param1)
         {
            return;
         }
         for each(_loc2_ in param1)
         {
            §1#`§.§3!]§.§3!9§(_loc2_);
         }
      }
      
      private function §3"r§(param1:String) : void
      {
         var _loc2_:GiftInboxPopup = null;
         if(this.§ +§)
         {
            if(popupManager.isPopupInQueueById(GiftInboxPopup.ID) || popupManager.isPopupOpenById(GiftInboxPopup.ID))
            {
               GiftInboxPopup.§`!l§(false);
            }
            else
            {
               _loc2_ = new GiftInboxPopup(§[W§.NORMAL,§<d§.DEFAULT,false);
               _loc2_.addEventListener(§'#b§.§<!$§,this.§>"f§,false,0,true);
               _loc2_.§;#%§();
            }
         }
      }
      
      protected function §>"f§(param1:§'#b§) : void
      {
         var _loc2_:§8!H§ = null;
         if(param1.data.result == true)
         {
            _loc2_ = new GiftInboxPopup(§[W§.NORMAL,§<d§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
      }
      
      override protected function getAssetMap() : XML
      {
         return §?!Q§.§<1§(§4!;§);
      }
      
      override protected function getUIData() : XML
      {
         var _loc1_:XML = super.getUIData();
         var _loc2_:XML = §?!Q§.§<1§(§@a§);
         var _loc3_:XML = §?!Q§.§<1§(§ #$§);
         this.§9#;§(_loc2_,_loc1_,["Views","Components"],true);
         this.§9#;§(_loc3_,_loc1_,["Views","Components"],true);
         return _loc1_;
      }
      
      override protected function getPopupData() : XML
      {
         var _loc1_:XML = super.getPopupData();
         var _loc2_:XML = §?!Q§.§<1§(§5#l§);
         this.§9#;§(_loc2_,_loc1_,["Popups"],true);
         return _loc1_;
      }
      
      override protected function getItemDataXML() : XML
      {
         var _loc1_:XML = super.getItemDataXML();
         var _loc2_:XML = §?!Q§.§<1§(§ 4§);
         var _loc3_:Array = ["Item_Materials","Item_Shapes","Item_Resources_Sounds","SoundChannels","Items","Material_Damage_Multipliers","Material_Velocity_Multipliers","Slingshot_Bonus_Damages_Multipliers","Slingshot_Bird_Materials","Slingshot_Bird_Collision_Effects","Powerup_Damage_Multipliers"];
         this.§9#;§(_loc2_,_loc1_,_loc3_);
         return _loc1_;
      }
      
      override protected function loadItems() : void
      {
         super.loadItems();
         this.§8"o§();
      }
      
      protected function §8"o§() : void
      {
         this.§<6§.§@!-§(§1""§.§]!e§(this.§]#$§.§`""§(§2#A§,"chaptertournament")),§1""§.§]!e§(this.§]#$§.§`""§("frommobile.lua","chaptertournament")),§1""§.§]!e§(this.§]#$§.§`""§("slingshots.lua","core")));
         var _loc1_:int = 0;
         while(_loc1_ < this.§]#$§.§-#g§)
         {
            this.§<6§.§@m§(this.§]#$§.§=S§(_loc1_));
            _loc1_++;
         }
      }
      
      override protected function getLevelBackgroundXML() : XML
      {
         var _loc1_:XML = super.getLevelBackgroundXML();
         var _loc2_:XML = §?!Q§.§<1§(§;!d§);
         this.§9#;§(_loc2_,_loc1_,["Backgrounds"]);
         return _loc1_;
      }
      
      protected function §1!A§() : void
      {
         var _loc1_:String = stage.loaderInfo.parameters.userId;
         var _loc2_:String = stage.loaderInfo.parameters.accessToken;
         var _loc3_:String = stage.loaderInfo.parameters.tokenExpiresIn;
         var _loc4_:String = stage.loaderInfo.parameters.acquisitionChannel;
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.userId)
            {
               §,"W§.§'"4§("userId");
            }
            if(!stage.loaderInfo.parameters.accessToken)
            {
               §,"W§.§'"4§("accessToken");
            }
            if(!stage.loaderInfo.parameters.tokenExpiresIn)
            {
               §,"W§.§'"4§("tokenExpiresIn");
            }
         }
         if(!_loc1_)
         {
            throw new Error("Did not receive a facebook user ID.",§@"$§.§'#V§);
         }
         §3!7§.accessToken = this.accessToken;
         this.§5u§ = new §`"T§(stage.loaderInfo.parameters.accessToken || this.§2i§);
         this.§3$-§ = stage.loaderInfo.parameters.analyticsUrl;
         this.§]D§ = stage.loaderInfo.parameters.userId;
         this.§,!F§.§=i§ = new §?!B§(_loc1_,_loc2_);
         this.§,!F§.§=i§.§`#r§();
         §%!v§.load(_loc1_,_loc2_,_loc3_,_loc4_,this.§,!F§.§=i§);
      }
      
      public function §^!G§() : String
      {
         return this.getUrlAsset();
      }
      
      override protected function getUrlAsset() : String
      {
         return "";
      }
      
      public function §'"G§() : String
      {
         return stage.loaderInfo.parameters.buildNumber || "";
      }
      
      override protected function initialize() : void
      {
         this.§;!Z§();
         super.initialize();
         §,!H§ = stage.loaderInfo.parameters.levelId;
         §%U§.addEventListener(Event.INIT,this.§;7§);
         §%U§.addEventListener(Event.COMPLETE,this.§^#Q§);
         §%h§.§3!]§.§#$§(mLevelManager);
         this.§1!A§();
         this.§#$$§();
         §<#K§(false);
         §6X§.addCallback("purchaseComplete",this.§2!i§);
         §6X§.addCallback("purchaseFailed",this.§@g§);
         §6X§.addCallback("giftsSentToUsers",this.§""Y§);
         §6X§.addCallback("onUrl",this.§3"r§);
         this.§>r§();
         this.§3!j§();
      }
      
      private function §2#e§() : void
      {
         this.§^!R§ = new §0"T§();
         (this.§^!R§ as §0"T§).addEventListener(Event.COMPLETE,this.§'"T§);
         this.§^!R§.§@#S§();
      }
      
      private function §'"T§(param1:Event) : void
      {
         var _loc3_:§@#F§ = null;
         var _loc4_:§8!H§ = null;
         var _loc5_:§8!H§ = null;
         var _loc2_:Array = new Array();
         for each(_loc3_ in this.§^!R§.§-![§)
         {
            if(_loc3_.§8"6§)
            {
               _loc5_ = new §+" §(§[W§.NORMAL,§<d§.§%^§);
               _loc4_ = new §,"e§(§[W§.NORMAL,§<d§.DEFAULT,null,null,_loc5_);
            }
            else
            {
               _loc4_ = new §,$9§(§[W§.NORMAL,§<d§.DEFAULT,_loc3_);
            }
            popupManager.openPopup(_loc4_);
            _loc2_.push(_loc3_.id);
         }
         if(_loc2_.length > 0)
         {
            this.§^!R§.§^"&§(_loc2_);
         }
      }
      
      private function §>r§() : void
      {
         var _loc1_:String = this.§]D§;
         var _loc2_:String = this.accessToken;
         var _loc3_:§-#A§ = §-#A§.§6$2§();
         _loc3_.init(_loc1_,_loc2_,false);
         if(this.§3$-§ && this.§3$-§.indexOf("https://") == -1)
         {
            this.§3$-§ = "https://" + this.§3$-§;
         }
         _loc3_.analyticsUrl = this.§3$-§;
      }
      
      private function §3!j§() : void
      {
         §!l§.§4";§();
      }
      
      private function §2!i§(param1:String, param2:Number, param3:String, param4:String) : void
      {
         if(param4 == "completed")
         {
            §%h§.§3!]§.§=L§(param2 > 0);
         }
      }
      
      private function §@g§() : void
      {
         CoinShopPopup.§7"M§ = false;
         var _loc1_:CoinShopPopup = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID) as CoinShopPopup;
         if(_loc1_)
         {
            _loc1_.§,2§();
         }
      }
      
      protected function §#$$§() : void
      {
         this.§+#V§ = new § ;§(new §,#`§());
      }
      
      public function §[A§() : §,#`§
      {
         return this.§+#V§.§11§;
      }
      
      protected function §,$4§() : void
      {
         this.§3#B§ = new §<#u§(§6!r§,SERVER_ROOT,(§'7§.userProgress as §!#Q§).userID,this.§1"4§);
         this.§2#f§.addChild(this.§3#B§);
         this.§3#B§.height = stage.stageHeight;
         this.§3#B§.x = stage.stageWidth - 180;
         this.§3#B§.addEventListener(§!#d§.§2!"§,this.§^#$§);
         this.§3#B§.addEventListener(§!#d§.§,!1§,this.§15§);
         this.§3#B§.addEventListener(§!#d§.§7!l§,this.§"!>§);
         this.§3#B§.addEventListener(§!#d§.§>! §,this.§!E§);
         this.§3#B§.addEventListener(§!#d§.§=#x§,this.§5"M§);
         this.§3#B§.addEventListener(§!#d§.§[#=§,this.§5#Y§);
         this.§3#B§.addEventListener(§!#d§.§,#E§,this.§8#8§);
         this.§3#B§.addEventListener(§!#d§.§]"<§,this.§1!j§);
         this.§3#B§.addEventListener(§!#d§.BRAG,this.§%`§);
         this.§3#B§.addEventListener(§!#d§.PLAY_LEVEL,this.§%#C§);
         this.§3#B§.addEventListener(§!#d§.§3"9§,this.§7"<§);
         this.§ "7§ = new InviteFriendsPopup(§[W§.NORMAL,§<d§.DEFAULT);
         this.§ "7§.addEventListener(§!#d§.§2!"§,this.§^#$§);
         this.§ "7§.addEventListener(§!#d§.§0!&§,this.§6?§);
         this.§9`§ = null;
      }
      
      protected function §7"<§(param1:Event) : void
      {
         var _loc2_:§8!H§ = new §'$-§(§[W§.NORMAL,§<d§.DEFAULT);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §;7§(param1:Event) : void
      {
         §+!f§.§+#J§(false);
      }
      
      protected function §^#Q§(param1:Event) : void
      {
         §+!f§.§+#J§(true);
      }
      
      public function §-!R§(param1:int, param2:Array = null) : void
      {
         this.§3#B§.§#C§(param1,param2);
      }
      
      public function §4#'§(param1:String) : void
      {
         this.§3#B§.§8g§(param1);
      }
      
      public function §?"0§(param1:String) : void
      {
         this.§3#B§.§5!%§(param1);
         this.§3#B§.§8g§(param1);
      }
      
      override protected function initializeLevelMain() : §#!,§
      {
         return new §#%§(stage,§#o§,§]$ §,mLevelManager);
      }
      
      override protected function initializeLevelItemManager() : §9#s§
      {
         return new §7L§();
      }
      
      override protected function initializeDataModel() : void
      {
         §'7§ = new §+3§();
      }
      
      override protected function initializeLevelManager() : §#!?§
      {
         return new §6^§();
      }
      
      override protected function initializePackageManager() : §2#§
      {
         return new §!#$§(mLevelManager,§3Z§(§#o§));
      }
      
      override protected function initializeUserProgress() : void
      {
         §'7§.userProgress = new §!#Q§(SERVER_ROOT,mLevelManager);
      }
      
      override protected function initializeStates() : void
      {
         §4!§(new §9!"§(mLevelManager,§3Z§(§#o§),§1#%§,false));
         §4!§(new §5d§(mLevelManager,§1#%§,false));
         §4!§(new §[!'§(mLevelManager,§1#%§,false));
         §4!§(new §-!1§(mLevelManager,§1#%§,false));
         §4!§(new §=!-§(mLevelManager,§1#%§,false));
         §4!§(new §,#?§(mLevelManager,§1#%§,false));
         §4!§(new §,"M§(mLevelManager,§1#%§,false));
         §4!§(new § #-§(mLevelManager,§1#%§,false));
         §4!§(new §'=§(mLevelManager,§1#%§,false));
         §4!§(new §!!]§(mLevelManager,§1#%§,false));
         §4!§(new §=#Z§(mLevelManager,§1#%§,false));
         §4!§(new §!a§(mLevelManager,§1#%§,false));
         §4!§(new §5#J§(mLevelManager,§1#%§,false));
         §4!§(new §5!o§(mLevelManager,§1#%§,false));
         §4!§(new §6#A§(mLevelManager,§1#%§,false));
         §4!§(new §^"A§(mLevelManager,§1#%§,false));
         §4!§(new §;"§(mLevelManager,§3Z§(§#o§),§1#%§,false));
         §4!§(new §4"X§(mLevelManager,§1#%§,false));
         §4!§(new §%!'§(mLevelManager,§1#%§,false));
         §4!§(new StateLastWeeksTournamentResults(mLevelManager,§1#%§,false));
         §4!§(new §50§(mLevelManager,§1#%§,false));
         §4!§(new StateTournamentResults(mLevelManager,false,§1#%§));
      }
      
      override protected function createStateObject(param1:Class) : §4$5§
      {
         if(param1 == §]8§ || param1 == §;"§)
         {
            return new param1(mLevelManager,§3Z§(§#o§),§1#%§);
         }
         return new param1(mLevelManager,§1#%§);
      }
      
      public function § #3§() : void
      {
         mLevelManager.selectEpisode(6);
         §7P§(§5#J§.STATE_NAME);
      }
      
      override protected function setupPopupManager() : void
      {
         §32§ = new MovieClip();
         §]!i§.stage.addChild(§32§);
         §8!e§ = new §4!w§(§32§,§1#%§,this);
         §8!e§.addEventListener(§4$#§.OPEN,§+!U§);
         §8!e§.addEventListener(§4$#§.CLOSE,§&s§);
         §="f§ = new §1"T§(§8!e§,§'7§,§ #M§.§'#Y§,new §#"L§(),new §?!z§());
         §8!e§.addLayer(§[W§.NORMAL,true,new Rectangle(0,0,0,0));
         §8!e§.addLayer(§[W§.INFO,true,new Rectangle(0,0,0,0));
         §8!e§.addLayer(§[W§.§5Z§,true,new Rectangle(0,0,0,0));
         §8!e§.addLayer(§[W§.ERROR,true,new Rectangle(0,0,0,0));
      }
      
      override protected function initStateLoad() : §;"m§
      {
         if(!DEBUG_MODE_ENABLED)
         {
            if(!stage.loaderInfo.parameters.assetsUrl)
            {
               §,"W§.§'"4§("assetsUrl");
            }
            if(stage.loaderInfo.parameters.buildNumber)
            {
            }
         }
         try
         {
            Security.allowDomain("*");
            Security.allowInsecureDomain("*");
         }
         catch(e:Error)
         {
         }
         var _loc1_:String = "/flash/";
         if(!stage.loaderInfo.parameters.assetsUrl)
         {
            _loc1_ = "";
         }
         var _loc2_:String = stage.loaderInfo.parameters.assetsRoot || "";
         §&!3§.initialize(stage.loaderInfo.parameters.assetsUrl,_loc1_,_loc2_);
         var _loc3_:String = stage.loaderInfo.parameters.buildNumber || "";
         return new §;#N§(§1#%§,true,§;"m§.STATE_NAME,getMinLoadingScreenTime(),"",_loc3_);
      }
      
      override protected function onGraphicsInitialized(param1:Event) : void
      {
         var _loc3_:String = null;
         §@U§ = true;
         if(§,!H§)
         {
            if(§,!H§.indexOf("2000-") > -1)
            {
               §7P§(§%!'§.STATE_NAME);
               return;
            }
            _loc3_ = mLevelManager.getValidLevelId(§,!H§);
            if(_loc3_ != §,!H§)
            {
               §,"W§.§]Q§(§,!H§);
            }
            §,!H§ = null;
            if(§'7§.userProgress.isLevelOpen(_loc3_))
            {
               this.§<#m§(_loc3_);
               return;
            }
            if(_loc3_.indexOf("2000-") > -1)
            {
               §7P§(§%!'§.STATE_NAME);
               return;
            }
         }
         var _loc2_:String = §["]§("fb_source");
         if(_loc2_ && _loc2_ != "null")
         {
            §-#A§.§6$2§().§;!P§(_loc2_,"");
         }
         §7P§(§[!'§.STATE_NAME);
      }
      
      public function §<#m§(param1:String) : void
      {
         param1 = mLevelManager.getValidLevelId(param1);
         mLevelManager.loadLevel(param1);
         if(param1.indexOf("2000-") > -1)
         {
            §7P§(§5!o§.STATE_NAME);
         }
         else
         {
            §7P§(StateCutScene.STATE_NAME);
         }
      }
      
      override public function setFirstGameState() : void
      {
         this.§ +§ = true;
         this.§-Q§();
      }
      
      protected function §5"c§() : void
      {
         super.setFirstGameState();
      }
      
      public function §-Q§() : void
      {
         var _loc1_:Object = null;
         var _loc2_:§8!H§ = null;
         var _loc3_:Class = null;
         var _loc4_:Array = null;
         var _loc5_:§5$!§ = null;
         var _loc6_:URLRequest = null;
         if(!this.§ +§ || !§+!V§)
         {
            return;
         }
         this.§5"c§();
         §]!m§.§3!]§.§#$§(mLevelManager);
         §]!m§.§3!]§.addEventListener(§0#3§.§0""§,this.§2"R§);
         §4!q§.§3!]§.addEventListener(§&$1§.§6!Q§,this.§!#i§);
         §^;§.§%"l§ = new §3#2§();
         §^;§.§%"l§.§-$0§();
         this.§,$4§();
         §&#%§.§3!]§.init(popupManager);
         if(!§4!q§.§3!]§.active)
         {
            if(TournamentResultsPopup.§2"Z§)
            {
               _loc2_ = new TournamentResultsPopup(§[W§.NORMAL,§<d§.DEFAULT,true);
               popupManager.openPopup(_loc2_);
            }
         }
         if(§]!m§.§3!]§.§,"K§ && §]!m§.§3!]§.§,"K§.§"o§)
         {
            _loc3_ = §]!m§.§3!]§.§,"K§.§"o§;
            _loc2_ = new _loc3_(§[W§);
            popupManager.openPopup(_loc2_);
         }
         §]!m§.§3!]§.addEventListener(§0#3§.§!#R§,this.§7#1§);
         §]!m§.§3!]§.addEventListener(§0#3§.§'"8§,this.§5#[§);
         §]!m§.§3!]§.addEventListener(§0#3§.§"#%§,this.§4!O§);
         if(GiftInboxPopup.§5$9§)
         {
            _loc2_ = new GiftInboxPopup(§[W§.NORMAL,§<d§.DEFAULT,true);
            popupManager.openPopup(_loc2_);
         }
         if(§%h§.§3!]§.§@!3§.§ "U§(§1!_§.§4!1§))
         {
            popupManager.openPopup(new §3#&§(§[W§.NORMAL,§<d§.DEFAULT));
         }
         if(§9n§.§""i§)
         {
            _loc2_ = new MightyEaglePromotionPopup(§[W§.NORMAL,§<d§.DEFAULT,§9n§.§""i§);
            popupManager.openPopup(_loc2_);
         }
         if(§+3§(dataModel).§&!?§.§=#t§() && !dataModel.userProgress.hasTutorialBeenSeen(§!#Q§.§5##§ + §7B§.§2!k§))
         {
            popupManager.openPopup(new §-q§(§[W§.NORMAL,§<d§.DEFAULT,false));
         }
         if(!§+3§(dataModel).§&!?§.§=#t§() && !dataModel.userProgress.hasTutorialBeenSeen(§!#Q§.§7!9§ + §7B§.§2!k§) && §+3§(dataModel).§&!?§.§ #1§(new Date()))
         {
            §+3§(dataModel).§&!?§.§+"J§();
         }
         this.§%K§ = new §;%§();
         this.§%K§.§["H§();
         this.§##O§ = new Vector.<§5$!§>();
         for each(_loc1_ in §%h§.§3!]§.§@!3§.claimableBundles)
         {
            if(§%h§.§3!]§.§@!3§.§ "U§(_loc1_.toString().toUpperCase()))
            {
               switch(_loc1_.toString().toUpperCase())
               {
                  case §'$4§.§6!K§.definition.toUpperCase():
                     popupManager.openPopup(new §0!5§(§[W§.NORMAL,§<d§.DEFAULT,§'$4§.§6!K§));
               }
               for each(_loc4_ in §%#E§.§ !B§)
               {
                  if(_loc4_[§%#E§.§-!E§].toUpperCase() == _loc1_.toString().toUpperCase())
                  {
                     AngryBirdsBase.singleton.popupManager.openPopup(new §%#E§(_loc4_[§%#E§.§-!E§],§%#E§.§ !F§));
                     (_loc5_ = new §5$!§()).addEventListener(Event.COMPLETE,this.§[#0§);
                     _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.§^y§);
                     _loc5_.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.§^y§);
                     _loc5_.addEventListener(§>#J§.§-$%§,this.§^y§);
                     _loc5_.dataFormat = URLLoaderDataFormat.TEXT;
                     this.§##O§.push(_loc5_);
                     (_loc6_ = §>J§.§'[§(AngryBirdsBase.SERVER_ROOT + "/claimfreebundle/" + _loc4_[§%#E§.§-!E§])).method = URLRequestMethod.GET;
                     _loc5_.load(_loc6_);
                  }
               }
            }
         }
         resize(true);
         §+3§(dataModel).§<!^§.§`!m§();
         §+3§(dataModel).§ ,§.slingshots;
         this.§2#e§();
         if(§+3§(dataModel).§+!=§.§-#!§)
         {
            §+3§(dataModel).§+!=§.addEventListener(Event.COMPLETE,this.§@+§);
         }
         else
         {
            this.§@+§(null);
         }
      }
      
      private function §5#[§(param1:§0#3§) : void
      {
         var campData:Object = null;
         var backgroundData:XML = null;
         var luaObject:Object = null;
         var items:Array = null;
         var fn:Function = null;
         var event:§0#3§ = param1;
         var packageLoader:§0#p§ = §0#p§(event.data.packLoader);
         var cb:Function = event.data.cb;
         var packName:String = "tournament_" + §]!m§.§3!]§.brandedTournamentAssetId;
         var campaignFileName:String = "campaign.json";
         if(packageLoader.§""4§(campaignFileName,packName))
         {
            campData = JSON.parse(packageLoader.§`""§(campaignFileName,packName));
            §!l§.§8$'§(§]!m§.§3!]§.brandedTournamentAssetId,campData.action,campData.url);
         }
         var backgroundFileName:String = "background.xml";
         if(packageLoader.§""4§(backgroundFileName,packName))
         {
            backgroundData = new XML(packageLoader.§`""§(backgroundFileName,packName));
            §]$ §.loadBackgroundXML(backgroundData);
         }
         if(packageLoader.§""4§(§2#A§,packName))
         {
            luaObject = §1""§.§]!e§(packageLoader.§`""§(§2#A§,packName));
            this.§9U§(luaObject);
            items = this.§<6§.§2R§(luaObject);
            fn = function(param1:Event):void
            {
               cb();
            };
            if(packageLoader.§]!!§)
            {
               §>"$§.§0"c§(packageLoader.§]!!§,items,fn);
            }
         }
         else
         {
            cb();
         }
      }
      
      private function §9U§(param1:Object) : void
      {
         var _loc3_:Boolean = false;
         var _loc2_:Object = param1.properties;
         if(_loc2_)
         {
            _loc3_ = _loc2_.flockAnimation != undefined ? Boolean(_loc2_.flockAnimation) : true;
            §]!m§.§3!]§.flockAnimation = _loc3_;
         }
      }
      
      protected function §7#1§(param1:§0#3§) : void
      {
         if(this.§<6§ && !§2!m§)
         {
            §2!m§ = true;
            §6!%§ = true;
            this.§<6§.§9"V§(§]!m§.§3!]§.brandedTournamentAssetId);
         }
         var _loc2_:§"#E§ = §]!m§.§3!]§.§,"K§;
         var _loc3_:String = "THEME_MUSIC_" + _loc2_.§+G§;
         if(§@`§.§38§(_loc3_))
         {
            this.§+#V§.§1H§(_loc3_);
         }
         this.playThemeMusic();
      }
      
      public function §7!k§() : void
      {
         if(this.§<6§)
         {
            this.§<6§.§9"V§();
            §2!m§ = false;
         }
      }
      
      protected function §-!x§() : void
      {
         var _loc1_:TournamentResultsPopup = new TournamentResultsPopup(§[W§.NORMAL,§<d§.TOP,false);
         AngryBirdsBase.singleton.popupManager.openPopup(_loc1_);
      }
      
      protected function §2"R§(param1:Event) : void
      {
         this.§5!>§[§7#P§] = true;
         this.§5!>§[§3#4§] = true;
         this.§%"C§();
      }
      
      protected function §!#i§(param1:Event) : void
      {
         this.§5!>§[§7#P§] = true;
         this.§5!>§[§3#4§] = true;
         this.§%"C§();
      }
      
      private function §%"C§() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:§8!H§ = null;
         for each(_loc1_ in this.§5!>§)
         {
            if(!_loc1_)
            {
               return;
            }
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(DailyRewardPopup.ID);
         if(_loc2_)
         {
            _loc2_.addEventListener(§4$#§.CLOSE,this.§,"§);
            return;
         }
         _loc2_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TournamentResultsPopup.ID);
         if(_loc2_)
         {
            return;
         }
         this.§5!>§ = new Array();
         var _loc3_:Boolean = TournamentResultsPopup.§ !r§();
         if(_loc3_)
         {
            §8G§.§6!r§.§#"Z§(§]!m§.§3!]§.levelIDs);
            if(!§4!q§.§3!]§.active)
            {
               this.§-!x§();
            }
         }
      }
      
      private function §,"§(param1:§4$#§) : void
      {
         this.§%"C§();
      }
      
      protected function §@"Y§(param1:§`"E§) : void
      {
         var _loc2_:§8!H§ = null;
         if(DailyRewardPopup.§,j§)
         {
            _loc2_ = new DailyRewardPopup(§[W§.NORMAL,§<d§.TOP,TournamentResultsPopup.§2"Z§);
            popupManager.openPopup(_loc2_);
         }
      }
      
      protected function §@+§(param1:Event) : void
      {
         var _loc2_:Object = §+3§(AngryBirdsBase.singleton.dataModel).§+!=§.§=#3§(§<!K§.§;#P§);
         if(_loc2_)
         {
            §<#K§(_loc2_[0]);
         }
         else
         {
            §<#K§(true);
         }
         this.§3#B§.§+!j§();
         var _loc3_:Object = §+3§(AngryBirdsBase.singleton.dataModel).§+!=§.§=#3§(§<!K§.§[!3§);
         if(_loc3_)
         {
            if(§4!q§.§3!]§.active && _loc3_[0] == §<#u§.§5"W§)
            {
               this.§3#B§.§&!e§(§<#u§.§3"A§);
            }
            else
            {
               this.§3#B§.§&!e§(§<#u§.§@$#§);
            }
         }
         this.§4#I§(null);
         if(this.§#">§)
         {
            if(!§+3§(AngryBirdsBase.singleton.dataModel).§+!=§.§0!f§(this.§#">§.§4D§()))
            {
               AngryBirdsBase.singleton.popupManager.openPopup(this.§#">§);
               §+3§(AngryBirdsBase.singleton.dataModel).§+!=§.§3h§(§<!K§.§&L§,[this.§#">§.§4D§()]);
            }
            else
            {
               this.§#">§ = null;
            }
         }
      }
      
      private function §4#I§(param1:Event) : void
      {
         §+3§(dataModel).§+!=§.removeEventListener(Event.COMPLETE,this.§4#I§);
         §+3§(dataModel).currencyModel.removeEventListener(Event.COMPLETE,this.§4#I§);
         if(§+3§(dataModel).currencyModel.§=a§)
         {
            §+3§(dataModel).§ ,§.§?#v§();
            §+3§(dataModel).§;#Q§.loadItems();
         }
         else
         {
            §+3§(dataModel).currencyModel.addEventListener(Event.COMPLETE,this.§4#I§);
         }
      }
      
      protected function §4!O§(param1:Event) : void
      {
         this.§`W§ = setInterval(this.§="Z§,1000);
      }
      
      private function §="Z§() : void
      {
         var _loc1_:§8!H§ = null;
         var _loc2_:Class = null;
         var _loc3_:§8!H§ = null;
         if(!§]!m§.§3!]§.§6E§ && §]!m§.§3!]§.§7!5§() <= 0)
         {
            §]!m§.§3!]§.§1"X§();
            §]!m§.§3!]§.§6E§ = true;
            §4!q§.§3!]§.§6"?§();
            §2!]§.§&F§ = new Array();
            §2!m§ = false;
            _loc1_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(AvatarCreatorPopup.ID);
            AngryBirdsBase.singleton.popupManager.closePopupById(AvatarCreatorPopup.ID);
            if(!_loc1_)
            {
               _loc1_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(TabbedShopPopup.ID);
            }
            AngryBirdsBase.singleton.popupManager.closePopupById(TabbedShopPopup.ID);
            if(!_loc1_)
            {
               _loc1_ = AngryBirdsBase.singleton.popupManager.getOpenPopupById(CoinShopPopup.ID);
            }
            AngryBirdsBase.singleton.popupManager.closePopupById(CoinShopPopup.ID);
            AngryBirdsBase.singleton.popupManager.closePopupById(NotEnoughCoinsPopup.ID);
            (dataModel as §+3§).§ ,§.§]!U§();
            if(!§%h§.§3!]§.§-#!§)
            {
               §%h§.§3!]§.§=L§();
            }
            if(_loc1_)
            {
               _loc2_ = Object(_loc1_).constructor;
               _loc3_ = new _loc2_(_loc1_.§ $<§,_loc1_.priority);
               popupManager.openPopup(_loc3_);
            }
            if(§]!m§.§3!]§.§7!,§)
            {
               §]!m§.§3!]§.§7!,§.brandedTournamentAssetId = null;
            }
            §;"0§ = true;
         }
         clearInterval(this.§`W§);
      }
      
      public function §#F§(param1:Object) : void
      {
         if(!§6!r§)
         {
            §6!r§ = new §9X§(SERVER_ROOT,(AngryBirdsBase.singleton.dataModel.userProgress as §!#Q§).userID,(AngryBirdsBase.singleton.dataModel.userProgress as §!#Q§).userName);
         }
         §6!r§.injectData(param1);
         var _loc2_:int = §7"m§.§3#s§();
         if(_loc2_ >= 0)
         {
            §,"W§.§`$,§(_loc2_);
         }
      }
      
      override protected function resizeViews(param1:int, param2:int) : void
      {
         var _loc3_:int = param1;
         if(this.§3#B§)
         {
            param1 -= 180;
            this.§3#B§.x = param1;
            this.§3#B§.height = param2;
         }
         super.resizeViews(param1,param2);
         this.§,!$§(_loc3_,param2);
      }
      
      public function §,!$§(param1:Number, param2:Number) : void
      {
         popupManager.setViewSize(param1,param2);
      }
      
      protected function §9#;§(param1:XML, param2:XML, param3:Array, param4:Boolean = false) : void
      {
         var _loc5_:String = null;
         var _loc6_:XML = null;
         for each(_loc5_ in param3)
         {
            for each(_loc6_ in param1[_loc5_].§*§)
            {
               if(param4)
               {
                  delete param2[_loc5_][_loc6_.name()];
               }
               if(!param2[_loc5_][0])
               {
                  param2.appendChild(param1[_loc5_]);
               }
               else
               {
                  param2[_loc5_].appendChild(_loc6_);
               }
            }
         }
      }
      
      protected function §^#$§(param1:§!#d§) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1.data != null)
         {
            exitFullScreen();
            _loc2_ = false;
            if(param1.data.hasOwnProperty("requireReceipt"))
            {
               _loc2_ = param1.data.requireReceipt;
            }
            _loc3_ = param1.data.userId;
            _loc4_ = "SIDEBAR";
            if(param1.data.hasOwnProperty("origin"))
            {
               _loc4_ = param1.data.origin;
            }
            _loc5_ = _loc3_.match(/,/g).length + 1;
            §-#A§.§6$2§().§ "!§(_loc5_,_loc4_);
            §6X§.§3U§("updateSessionToken",§9"+§.§"C§);
            §6X§.§3U§("flashInviteFriendsHandler",_loc3_,_loc2_,§0"F§.§7#"§(§0"F§.INVITE));
         }
         else
         {
            §,"W§.§+#u§();
            popupManager.openPopup(this.§ "7§);
         }
      }
      
      protected function §6?§(param1:§!#d§) : void
      {
         if(param1.data != null)
         {
            this.§&#§.§;!c§(param1.data);
         }
      }
      
      protected function §15§(param1:§!#d§) : void
      {
         var _loc2_:TabbedShopPopup = new TabbedShopPopup(§[W§.NORMAL,§<d§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§4$#§.§%#l§,this.§#!u§);
      }
      
      protected function §"!>§(param1:§!#d§) : void
      {
         var _loc2_:AvatarCreatorPopup = new AvatarCreatorPopup(§[W§.NORMAL,§<d§.DEFAULT);
         popupManager.openPopup(_loc2_);
         _loc2_.addEventListener(§4$#§.§%#l§,this.§["C§);
      }
      
      protected function §["C§(param1:Event) : void
      {
         this.§3#B§.§^q§(§+3§(dataModel).§!!`§);
      }
      
      protected function §#!u§(param1:Event) : void
      {
         this.§^$9§();
      }
      
      public function §^$9§() : void
      {
         this.§3#B§.§+"1§();
      }
      
      protected function §!E§(param1:Event) : void
      {
         §&f§();
      }
      
      protected function §5"M§(param1:§!#d§) : void
      {
         §`"S§.uiInteractionHandler(0,"showCredits",null);
      }
      
      protected function §5#Y§(param1:§!#d§) : void
      {
         if(§`"S§ is StatePlay)
         {
            StatePlay(§`"S§).showTutorials();
         }
      }
      
      protected function §1!j§(param1:§!#d§) : void
      {
         var _loc2_:GiftInboxPopup = new GiftInboxPopup(§[W§.NORMAL,§<d§.DEFAULT,true);
         popupManager.openPopup(_loc2_);
      }
      
      protected function §%`§(param1:§!#d§) : void
      {
         var _loc2_:§<#_§ = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:String = null;
         if(!this.§9`§)
         {
            this.§9`§ = new Timer(1000);
            this.§9`§.addEventListener(TimerEvent.TIMER,this.§#g§);
            this.§9`§.start();
            exitFullScreen();
            _loc2_ = param1.data as §<#_§;
            _loc3_ = _loc2_.§&"v§.rank - 1;
            §,"W§.§6m§(_loc3_.toString());
            _loc5_ = (_loc4_ = mLevelManager.currentLevel != null ? mLevelManager.currentLevel : mLevelManager.previousLevel).substr(0,_loc4_.indexOf("-"));
            _loc6_ = §6^§(mLevelManager).§[!2§(_loc4_);
            if(int(§]!m§.§3!]§.levelIDs.indexOf(_loc4_)) > -1)
            {
               _loc6_ = String(§]!m§.§3!]§.§-#P§(_loc4_));
            }
            §6X§.§3U§("updateSessionToken",§9"+§.§"C§);
            §6X§.§3U§("flashBrag",_loc2_.§&"v§.userId,_loc5_,_loc4_,mLevelManager.getCurrentEpisodeModel().writtenName + "-" + _loc6_,_loc6_,§0"F§.§7#"§(§0"F§.BRAG));
         }
      }
      
      private function §#g§(param1:TimerEvent) : void
      {
         if(this.§9`§)
         {
            this.§9`§.stop();
            this.§9`§.removeEventListener(TimerEvent.TIMER,this.§#g§);
            this.§9`§ = null;
         }
      }
      
      protected function §%#C§(param1:§!#d§) : void
      {
         var _loc2_:String = param1.target.data.lvl;
         var _loc3_:String = mLevelManager.getValidLevelId(_loc2_);
         if(_loc3_ != _loc2_)
         {
            §,"W§.§]Q§(_loc2_);
         }
         if(§'7§.userProgress.isLevelOpen(_loc3_))
         {
            mLevelManager.loadLevel(_loc3_);
            §7P§(StateCutScene.STATE_NAME);
            return;
         }
      }
      
      protected function §8#8§(param1:§!#d§) : void
      {
         var musicManager:§,#`§ = null;
         var mySO:SharedObject = null;
         var e:§!#d§ = param1;
         §<#K§(!§-"W§());
         if(§-"W§())
         {
            if(§^!X§() == StatePlay.STATE_NAME)
            {
               if(!§>"$§.isPaused)
               {
                  §>"$§.§3#'§.background.playAmbientSound();
               }
            }
            else if(§^!X§() == §-!1§.STATE_NAME || §^!X§() == §<!B§.STATE_NAME || §^!X§() == §"$6§.STATE_NAME || §^!X§() == §[!'§.STATE_NAME)
            {
               musicManager = §8G§.§%#S§.§[A§();
               musicManager.§<#Z§(§ ;§.§0e§);
            }
         }
         try
         {
            mySO = SharedObject.getLocal(§?"g§,§0#?§);
            mySO.data.useSounds = §^@§;
            mySO.flush();
         }
         catch(e:Error)
         {
         }
      }
      
      public function §6k§(param1:String, param2:int) : Boolean
      {
         var _loc6_:Object = null;
         var _loc7_:Object = null;
         var _loc3_:int = (§'7§.userProgress as §!#Q§).getStarsForLevel(param1,param2);
         var _loc4_:Object = this.§9_§(param2,_loc3_,0,true);
         var _loc5_:Number = 0;
         if(§]!m§.§3!]§ && §]!m§.§3!]§.levelScores)
         {
            _loc6_ = null;
            for each(_loc7_ in §]!m§.§3!]§.levelScores)
            {
               if(_loc7_.l == param1)
               {
                  _loc7_.p = param2;
                  _loc7_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
                  _loc6_ = _loc7_;
               }
               _loc5_ += param2;
            }
            if(!_loc6_)
            {
               (_loc6_ = new Object()).l = param1;
               _loc6_.p = param2;
               _loc6_.r = !!_loc4_.rankAfterUpdate ? _loc4_.rankAfterUpdate : 0;
               §]!m§.§3!]§.levelScores.push(_loc6_);
               _loc5_ += param2;
            }
         }
         if(_loc4_.rankAfterUpdate)
         {
            (§'7§.userProgress as §!#Q§).§-#$§(param1,_loc4_.rankAfterUpdate);
         }
         if(§4!q§.§3!]§.active)
         {
            return _loc4_.leagueRankAfterUpdate < _loc4_.leagueOriginalRank;
         }
         return false;
      }
      
      public function § "q§(param1:String) : void
      {
         var _loc2_:int = §'7§.userProgress.getScoreForLevel(param1);
         var _loc3_:int = §'7§.userProgress.getStarsForLevel(param1);
         var _loc4_:int = §'7§.userProgress.getEagleScoreForLevel(param1);
         var _loc5_:Object;
         if((_loc5_ = this.§9_§(_loc2_,_loc3_,_loc4_)).rankAfterUpdate)
         {
            (§'7§.userProgress as §!#Q§).§%w§(param1,_loc5_.rankAfterUpdate);
         }
      }
      
      private function §9_§(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : Object
      {
         return this.§&#§.§-y§(mLevelManager.currentLevel,param1,param2,param3,param4);
      }
      
      public function get §&#§() : §<#u§
      {
         return this.§3#B§;
      }
      
      public function get §0"n§() : § #"§
      {
         return this.§8#e§;
      }
      
      public function §7#8§() : void
      {
         if(this.§8#e§)
         {
            this.§8#e§.§0"g§();
         }
      }
      
      override public function getVersionInfo() : String
      {
         return "Version: " + §>"J§ + " " + §`!-§;
      }
      
      public function §9"v§() : String
      {
         return §,"W§.§##[§;
      }
      
      public function §7">§() : String
      {
         return §;-§.§1!]§;
      }
      
      override protected function initializeGame() : void
      {
         var _loc1_:int = Math.round(getTimer() / 1000);
         §,"W§.§`#f§(§;-§.§1!]§,_loc1_.toString(),_loc1_);
         §,"W§.trackPageView(this,§;-§.§1!]§);
         this.§ +§ = true;
         super.initializeGame();
      }
      
      override protected function onKeyDown(param1:KeyboardEvent) : void
      {
         super.onKeyDown(param1);
         if(!this.§0"0§)
         {
            this.§0"0§ = String.fromCharCode(param1.keyCode);
         }
         else
         {
            this.§0"0§ += String.fromCharCode(param1.keyCode);
         }
         this.§0"0§ = this.§0"0§.toLowerCase();
         if(this.§0"0§.length > 15)
         {
            this.§0"0§ = this.§0"0§.substr(1);
         }
      }
      
      public function get §+T§() : §;%§
      {
         return this.§%K§;
      }
      
      override public function externalPause() : void
      {
      }
      
      override public function externalResume() : void
      {
      }
      
      protected function get §<6§() : §7L§
      {
         return §7L§(§#o§);
      }
      
      protected function get §]#$§() : §!#$§
      {
         return §!#$§(§&";§);
      }
      
      override protected function getThemeMusicName() : String
      {
         return § ;§.§0e§;
      }
      
      override public function playThemeMusic() : void
      {
         var _loc1_:§,#`§ = null;
         if(§6!%§)
         {
            _loc1_ = §8G§.§%#S§.§[A§();
            _loc1_.§6x§(§ ;§.§0e§);
         }
      }
      
      private function §>!v§() : Boolean
      {
         var _loc1_:§7#!§ = §#$+§.§#!C§("Channel_Theme");
         return _loc1_.§^7§ > 0;
      }
      
      override public function stopThemeMusic() : void
      {
         var _loc2_:§@!"§ = null;
         var _loc1_:§7#!§ = §#$+§.§#!C§("Channel_Theme");
         if(_loc1_.§^7§ > 0)
         {
            _loc2_ = _loc1_.§1#F§(0);
            this.§[A§().§4#<§(_loc2_.§]#Q§,_loc2_.id);
         }
         super.stopThemeMusic();
      }
      
      public function get §+"X§() : §`"T§
      {
         return this.§5u§;
      }
      
      public function get §,!F§() : §+3§
      {
         return §+3§(dataModel);
      }
      
      override public function setState(param1:String) : Boolean
      {
         var _loc2_:Boolean = super.setState(param1);
         if(_loc2_)
         {
            this.§-#s§(param1);
         }
         return _loc2_;
      }
      
      public function §-#s§(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < §##6§.length)
         {
            if(§##6§[_loc2_][0] == param1)
            {
               this.§+#g§ = _loc2_;
               break;
            }
            _loc2_++;
         }
      }
      
      public function §="g§() : Object
      {
         var _loc1_:Object = new Object();
         _loc1_.state = §##6§[this.§+#g§][0];
         _loc1_.screenName = §##6§[this.§+#g§][1];
         return _loc1_;
      }
      
      private function §[#0§(param1:Event) : void
      {
         var _loc2_:int = 0;
         if(param1.currentTarget.data)
         {
            _loc2_ = 0;
            while(_loc2_ < this.§##O§.length)
            {
               if(this.§##O§[_loc2_].data == param1.currentTarget.data)
               {
                  this.§##O§.splice(_loc2_,1);
                  break;
               }
               _loc2_++;
            }
         }
         if(this.§##O§.length == 0)
         {
            §%h§.§3!]§.§=L§();
         }
      }
      
      private function §^y§(param1:ErrorEvent) : void
      {
         §4"d§.log("Can\'t claim bundle: " + param1.toString());
      }
      
      public function §`p§(param1:String) : void
      {
         var _loc2_:Object = {"origin":param1};
         var _loc3_:QuestionPopup = new QuestionPopup(§[W§.NORMAL,§<d§.DEFAULT,"Friend list permission","In order to play with your friends, you need to allow access to your facebook friend info.\n" + "Do you want to play with your friends?",QuestionPopup.§4a§,_loc2_,"FriendlistPermission");
         _loc3_.addEventListener(§8"k§.§"!<§,this.§^#7§);
         if(this.§ +§)
         {
            AngryBirdsBase.singleton.popupManager.openPopup(_loc3_);
         }
         else
         {
            this.§#">§ = _loc3_;
         }
      }
      
      private function §^#7§(param1:§8"k§) : void
      {
         §,"W§.§ !u§();
         AngryBirdsBase.singleton.exitFullScreen();
         §6X§.addCallback("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §6X§.§3U§("askForMissingGamePermissions");
         var _loc2_:String = "";
         if(param1.data.hasOwnProperty("origin"))
         {
            _loc2_ = param1.data.origin;
         }
         §-#A§.§6$2§().§2#4§(_loc2_);
         if(AngryBirdsBase.DEBUG_MODE_ENABLED)
         {
            this.gamePermissionRequestComplete("true");
         }
         if(this.§#">§)
         {
            this.§#">§ = null;
         }
      }
      
      private function gamePermissionRequestComplete(param1:String) : void
      {
         §6X§.§5!3§("gamePermissionRequestComplete",this.gamePermissionRequestComplete);
         §<#u§.§ #C§ = param1 == "true";
         if(§<#u§.§ #C§)
         {
            this.§-!R§(§<#u§.§,#I§);
            §%!v§.§=##§();
         }
      }
      
      public function §1!>§() : void
      {
         this.§]!l§ = new Timer(this.§,!F§.§=i§.expiresIn * 1000,1);
         this.§]!l§.addEventListener(TimerEvent.TIMER_COMPLETE,this.§'$,§);
         this.§]!l§.start();
      }
      
      private function §'$,§(param1:TimerEvent) : void
      {
         this.§]!l§.stop();
         this.§]!l§ = null;
         this.§,!F§.§=i§.§`#r§();
      }
      
      public function §]i§() : §[@§
      {
         if(this.§9!x§ == null)
         {
            this.§9!x§ = new §%#I§(mLevelManager);
         }
         return this.§9!x§;
      }
   }
}
